<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2017-06-07 Wed 13:37 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>sicp</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="ying dai" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<script src='https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js'></script>
<link rel='stylesheet' href='../css/worg2.css' typbe='text/css'/>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
<script type="text/javascript" async src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML"></script>
</head>
<body>
<div id="preamble" class="status">

<div class='nav'>
<div class='blog' style='text-align:right'>
<a href='/index.html'> Home </a> | <a href='/contact.html'> Contact </a>
</div>
</div>
</div>
<div id="content">
<h1 class="title">sicp</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org6856a3b">Chapter 1 Building Abstractions with Procedures</a>
<ul>
<li><a href="#orge2591c6">The Elements of Programming</a>
<ul>
<li><a href="#org6cc2dd8">Expressions</a></li>
<li><a href="#org507535c">Naming and the Environment</a></li>
<li><a href="#org772d196">Evaluating Combinations</a></li>
<li><a href="#org00caaa2">Compound Procedures</a></li>
<li><a href="#org1714c2f">The Substitution Model for Procedure Application</a></li>
<li><a href="#org9f3efd2">Applicative order versus normal order</a></li>
<li><a href="#org42f2ba7">Conditional Expressions and Predicates</a></li>
<li><a href="#org5674ffa">Example: Square Roots by Newton's Method</a></li>
<li><a href="#org7e5104a">Supplement of Newton's Method:</a></li>
<li><a href="#org94c47ff">Procedures as Black-Box Abstractions</a>
<ul>
<li><a href="#org549e4f4">Local names</a></li>
<li><a href="#org98ca863">Internal definitions and block structure</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#orged7acb5">Procedures and the Processes They Generate</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-org6856a3b" class="outline-2">
<h2 id="org6856a3b">Chapter 1 Building Abstractions with Procedures</h2>
<div class="outline-text-2" id="text-org6856a3b">
<blockquote>
<p>
The acts of the mind, wherein it exerts its power over simple
ideas, are chiefly these three: 1. Combining several simple ideas
into one compound one, and thus all complex ideas are made. 2. The
second is bringing two ideas, whether simple or complex,
together, and seting them by one another so as to take a view of
them at once, without uniting them into one, by which it gets all
its ideas of relations. 3. The third is separating them from all
other ideas that accompany them in their real existence: this is
called abstraction, and thus all its general ideas are made.
</p>

<p>
—John Locke, An Essay Concerning Human Understanding (1690)
</p>
</blockquote>
</div>

<div id="outline-container-orge2591c6" class="outline-3">
<h3 id="orge2591c6">The Elements of Programming</h3>
<div class="outline-text-3" id="text-orge2591c6">
<p>
A powerful programming language is
more than just a means for
instructing a computer to perform
tasks. The language also serves as a
framework within which we organize
our idea about processes.
</p>

<p>
Every powerful language has three
mechanisms for accomplishing this:
</p>
<ul class="org-ul">
<li><code>primitive expressions</code>, which
represent the simplest entities
the language is concerned with.</li>
<li><code>means of combination</code>, by which
compound elements are build from
simpler ones, and</li>
<li><code>means of abstraction</code>, by which
compound elements can be named and
manipulated as units.</li>
</ul>

<p>
In programming, we deal with two kinds of elements:
procedures and data.
</p>
</div>

<div id="outline-container-org6cc2dd8" class="outline-4">
<h4 id="org6cc2dd8">Expressions</h4>
<div class="outline-text-4" id="text-org6cc2dd8">
<p>
Expressions representing numbers
maybe combined with an expression
representing a primitive
procedures(such as + or *) to form a
compound expression of the procedure
to those numbers.
</p>

<div class="org-src-container">
<pre class="src src-scheme"><span style="color: #707183;">(</span>+ 137 349<span style="color: #707183;">)</span>

<span style="color: #707183;">(</span>/ 5 99<span style="color: #707183;">)</span>

<span style="color: #707183;">(</span>+ 2.2 19<span style="color: #707183;">)</span>
</pre>
</div>

<p>
The convention of placing the operator to the left of
the operands is known as <code>prefix notation</code> , and it may be somewhat
confusing at first because it departs significantly from the
customary mathematical convention. Prefix notation has serveral
advantages. One of the is that it can accommodate
procedures that may take an arbitrary number of arguments, as the
following examples:
</p>


<div class="org-src-container">
<pre class="src src-scheme"><span style="color: #707183;">(</span>+ 12 23 43 4<span style="color: #707183;">)</span>

<span style="color: #707183;">(</span>* 33  85 2<span style="color: #707183;">)</span>
</pre>
</div>

<p>
A second advantage of prefix
notation is that it extends in a
straightforward way to allow
combinations to be nested, that is,
to have combinations whose
elements are themselves
combinations:
</p>

<div class="org-src-container">
<pre class="src src-scheme"><span style="color: #707183;">(</span>+ <span style="color: #7388d6;">(</span>* 3 5<span style="color: #7388d6;">)</span> <span style="color: #7388d6;">(</span>- 10 6<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
</pre>
</div>

<p>
There is no limit to the depth of such nesting.
</p>

<p>
Instead to write the code like in one line:
</p>

<div class="org-src-container">
<pre class="src src-scheme"><span style="color: #707183;">(</span>+ <span style="color: #7388d6;">(</span>* 3 <span style="color: #909183;">(</span>+ <span style="color: #709870;">(</span>* 2 4<span style="color: #709870;">)</span> <span style="color: #709870;">(</span>+ 3 5<span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388d6;">)</span> <span style="color: #7388d6;">(</span>+ <span style="color: #909183;">(</span>- 10 7<span style="color: #909183;">)</span> 6<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
</pre>
</div>

<p>
We can write it to the following form as pretty-printing:
</p>

<div class="org-src-container">
<pre class="src src-scheme"><span style="color: #707183;">(</span>+ <span style="color: #7388d6;">(</span>* 3
      <span style="color: #909183;">(</span>+ <span style="color: #709870;">(</span>* 2 4<span style="color: #709870;">)</span>
         <span style="color: #709870;">(</span>+ 3 5<span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388d6;">)</span>
   <span style="color: #7388d6;">(</span>+ <span style="color: #909183;">(</span>- 10 7<span style="color: #909183;">)</span>
      6<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org507535c" class="outline-4">
<h4 id="org507535c">Naming and the Environment</h4>
<div class="outline-text-4" id="text-org507535c">
<p>
In the Scheme, we name things with <code>define</code> .
</p>

<div class="org-src-container">
<pre class="src src-scheme"><span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #0000ff;">size</span> 2<span style="color: #707183;">)</span>

size

<span style="color: #707183;">(</span>* 5 size<span style="color: #707183;">)</span>
</pre>
</div>

<p>
Here are further examples of the use of <code>define</code> :
</p>
<div class="org-src-container">
<pre class="src src-scheme"><span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #0000ff;">pi</span> 3.14<span style="color: #707183;">)</span>

<span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #0000ff;">radius</span> 10<span style="color: #707183;">)</span>

<span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #0000ff;">curcumference</span> <span style="color: #7388d6;">(</span>* 2 pi radius<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
</pre>
</div>
</div>
</div>


<div id="outline-container-org772d196" class="outline-4">
<h4 id="org772d196">Evaluating Combinations</h4>
<div class="outline-text-4" id="text-org772d196">
<p>
For example,evaluating
</p>
<div class="org-src-container">
<pre class="src src-scheme"><span style="color: #707183;">(</span>* <span style="color: #7388d6;">(</span>+ 2 <span style="color: #909183;">(</span>* 4 6<span style="color: #909183;">)</span><span style="color: #7388d6;">)</span>
   <span style="color: #7388d6;">(</span>+ 3 5 7<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
</pre>
</div>

<p>
requires that the evaluation rule be applied to four
different combinations. We can obtain a picture of this
process by representing the combination in the form of a tree
, as shown in blow. The terminal nodes represent either
operators or numbers.
</p>


<div class="figure">
<p><img src="./imgs/20170606_164720_53196PP.png" alt="20170606_164720_53196PP.png" />
</p>
</div>
</div>
</div>

<div id="outline-container-org00caaa2" class="outline-4">
<h4 id="org00caaa2">Compound Procedures</h4>
<div class="outline-text-4" id="text-org00caaa2">
<p>
Now we will learn about <code>procedure definitions</code> , a much
more powerful abstraction by which a compound operation
can be given a name and then referred to as a unit. Like:
</p>

<div class="org-src-container">
<pre class="src src-scheme"><span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">square</span> x<span style="color: #7388d6;">)</span> <span style="color: #7388d6;">(</span>* x x<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>

<span style="color: #707183;">(</span>square 21<span style="color: #707183;">)</span>

<span style="color: #707183;">(</span>square <span style="color: #7388d6;">(</span>+ 2 5<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>

<span style="color: #707183;">(</span>square <span style="color: #7388d6;">(</span>square 3<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
</pre>
</div>

<p>
The general form of a procedure definition is
</p>
<div class="org-src-container">
<pre class="src src-scheme"><span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">&lt;name&gt;</span> &lt;formal parameters<span style="color: #7388d6;">)</span>
<span style="color: #228b22;">&lt;body&gt;</span><span style="color: #707183;">)</span>
</pre>
</div>

<p>
For example, \(x^2 + y^2\) can be expressed as
</p>

<div class="org-src-container">
<pre class="src src-scheme"><span style="color: #707183;">(</span>+ <span style="color: #7388d6;">(</span>square x<span style="color: #7388d6;">)</span> <span style="color: #7388d6;">(</span>square y<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
</pre>
</div>
</div>
</div>


<div id="outline-container-org1714c2f" class="outline-4">
<h4 id="org1714c2f">The Substitution Model for Procedure Application</h4>
<div class="outline-text-4" id="text-org1714c2f">
<div class="org-src-container">
<pre class="src src-scheme"><span style="color: #707183;">(</span>f 5<span style="color: #707183;">)</span>
<span style="color: #707183;">(</span>sum-of-squares <span style="color: #7388d6;">(</span>+ a 1<span style="color: #7388d6;">)</span> <span style="color: #7388d6;">(</span>* a 2<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
<span style="color: #707183;">(</span>sum-of-squares <span style="color: #7388d6;">(</span>+ 5 1<span style="color: #7388d6;">)</span> <span style="color: #7388d6;">(</span>* 5 2<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
<span style="color: #707183;">(</span>+ <span style="color: #7388d6;">(</span>square 6<span style="color: #7388d6;">)</span> <span style="color: #7388d6;">(</span>square 10<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
<span style="color: #707183;">(</span>+ <span style="color: #7388d6;">(</span>* 6 6<span style="color: #7388d6;">)</span> <span style="color: #7388d6;">(</span>* 10 10<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
<span style="color: #707183;">(</span>+ 36 100<span style="color: #707183;">)</span>
136
</pre>
</div>

<p>
The process we have just described is called the <code>substitution model</code> for
procedure application.
</p>
</div>
</div>

<div id="outline-container-org9f3efd2" class="outline-4">
<h4 id="org9f3efd2">Applicative order versus normal order</h4>
<div class="outline-text-4" id="text-org9f3efd2">
<p>
The above way is not the only way to perform evaluation.
An alternative evalution model would not evaluate the
operands until their values were needed. Instead it first
substitute operand expressions for parameters until it
obtained an expression involving only primitive operators,
and then perform the evaluation.
</p>

<p>
In this place, We still use the (f 5) as an example.
</p>

<div class="org-src-container">
<pre class="src src-scheme"><span style="color: #707183;">(</span>sum-of-squares <span style="color: #7388d6;">(</span>+ 5 1<span style="color: #7388d6;">)</span> <span style="color: #7388d6;">(</span>* 5 2<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
<span style="color: #707183;">(</span>+ <span style="color: #7388d6;">(</span>square <span style="color: #909183;">(</span>+ 5 1<span style="color: #909183;">)</span><span style="color: #7388d6;">)</span> <span style="color: #7388d6;">(</span>square <span style="color: #909183;">(</span>* 5 2<span style="color: #909183;">)</span><span style="color: #7388d6;">)</span> <span style="color: #707183;">)</span> <span style="color: #707183;">(</span>+ <span style="color: #7388d6;">(</span>*<span style="color: #909183;">(</span>+51<span style="color: #909183;">)(</span>+51<span style="color: #909183;">)</span><span style="color: #7388d6;">)</span> <span style="color: #7388d6;">(</span>*<span style="color: #909183;">(</span>*52<span style="color: #909183;">)(</span>*52<span style="color: #909183;">)</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>

<span style="color: #707183;">(</span>+ <span style="color: #7388d6;">(</span>* 6 6<span style="color: #7388d6;">)</span> <span style="color: #7388d6;">(</span>* 10 10<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
<span style="color: #707183;">(</span>+  36 100<span style="color: #707183;">)</span>
136
</pre>
</div>

<p>
This method is called <code>normal-order evaluation</code> with fully
expand and then reduce evaluation method, in contrast
to the "evaluate the arguments and the apply" method that
the interpreter actually uses, which is called <code>applicative-order evaluation</code> .
</p>
</div>
</div>

<div id="outline-container-org42f2ba7" class="outline-4">
<h4 id="org42f2ba7">Conditional Expressions and Predicates</h4>
<div class="outline-text-4" id="text-org42f2ba7">
<p>
Now, we will do like this:
\[ |x| =\left\{ \begin{aligned} x & , & if & & x > 0 \\ 0 & , & if
   & & x = 0 \\ -x & , & if & & x < 0\end{aligned} \right.\]
</p>

<p>
We will compute the absolute value of a number by testing whether the number is
positive, negative, or zero.
</p>

<div class="org-src-container">
<pre class="src src-scheme"><span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">abs</span> x<span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span><span style="color: #a020f0;">cond</span> <span style="color: #909183;">(</span><span style="color: #709870;">(</span>&gt; x 0<span style="color: #709870;">)</span> x<span style="color: #909183;">)</span>
          <span style="color: #909183;">(</span><span style="color: #709870;">(</span>= x 0<span style="color: #709870;">)</span> 0<span style="color: #909183;">)</span>
          <span style="color: #909183;">(</span><span style="color: #709870;">(</span>&lt; x 0<span style="color: #709870;">)</span> <span style="color: #709870;">(</span>- x<span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>

<span style="color: #b22222;">;; </span><span style="color: #b22222;">or this</span>
<span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">abs</span> x<span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span><span style="color: #a020f0;">cond</span> <span style="color: #909183;">(</span><span style="color: #709870;">(</span>&lt; x 0<span style="color: #709870;">)</span> <span style="color: #709870;">(</span>- x<span style="color: #709870;">)</span><span style="color: #909183;">)</span>
           <span style="color: #909183;">(</span><span style="color: #a020f0;">else</span> x<span style="color: #909183;">)</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>

<span style="color: #b22222;">;; </span><span style="color: #b22222;">if</span>
<span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">abs</span> x<span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span><span style="color: #a020f0;">if</span> <span style="color: #909183;">(</span>&lt; x 0<span style="color: #909183;">)</span>
        <span style="color: #909183;">(</span>- x<span style="color: #909183;">)</span>
        x<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
</pre>
</div>


<p>
The general form of a conditional expression is
</p>
<div class="org-src-container">
<pre class="src src-scheme"><span style="color: #707183;">(</span><span style="color: #a020f0;">cond</span> <span style="color: #7388d6;">(</span><span style="color: #909183;">&#10216;</span>p1<span style="color: #909183;">&#10217;</span> <span style="color: #909183;">&#10216;</span>e1<span style="color: #909183;">&#10217;</span><span style="color: #7388d6;">)</span>
      <span style="color: #7388d6;">(</span><span style="color: #909183;">&#10216;</span>p2<span style="color: #909183;">&#10217;</span> <span style="color: #909183;">&#10216;</span>e2<span style="color: #909183;">&#10217;</span><span style="color: #7388d6;">)</span>
        ...
      <span style="color: #7388d6;">(</span><span style="color: #909183;">&#10216;</span>pn<span style="color: #909183;">&#10217;</span> <span style="color: #909183;">&#10216;</span>en<span style="color: #909183;">&#10217;</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
</pre>
</div>

<p>
There are logical composition operations, which enable us
to construct compound predicates.
</p>
<ul class="org-ul">
<li>(and &lt;e<sub>1</sub>&gt; &#x2026; &lt;e<sub>n</sub>&gt;) If any &lt;e&gt; evaluates to false, the value
of the and expression is false, and the rest of &lt;e&gt;'s are not
evaluated.</li>

<li>(or &#x2026;.) Any is ture, then return true. If all is false, then return false.</li>

<li>(not &#x2026;.)</li>
</ul>

<p>
As an example of how these are used. Such \(x\) be in the range \(5 < x < 10\) may be expressed as
</p>
<div class="org-src-container">
<pre class="src src-scheme"><span style="color: #707183;">(</span><span style="color: #a020f0;">and</span> <span style="color: #7388d6;">(</span>&gt; x 5<span style="color: #7388d6;">)</span> <span style="color: #7388d6;">(</span>&lt; x 10<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
</pre>
</div>

<p>
As another example, we can define a predicate to test whether one
number is greater than or equal to another as:
</p>

<div class="org-src-container">
<pre class="src src-scheme"><span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">&gt;=</span> x y<span style="color: #7388d6;">)</span> <span style="color: #7388d6;">(</span><span style="color: #a020f0;">or</span> <span style="color: #909183;">(</span>&gt; x y<span style="color: #909183;">)</span> <span style="color: #909183;">&#65288;</span>= x y<span style="color: #909183;">&#65289;</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">or</span>
<span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">&gt;=</span> x y<span style="color: #7388d6;">)</span> <span style="color: #7388d6;">(</span>not <span style="color: #909183;">(</span>&lt; x y<span style="color: #909183;">)</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org5674ffa" class="outline-4">
<h4 id="org5674ffa">Example: Square Roots by Newton's Method</h4>
<div class="outline-text-4" id="text-org5674ffa">
<p>
Procedures are much like ordinary mathematical
functions. But there is an important difference
between mathematical functions and computer procedures.
Procedures must be effective.
</p>

<p>
As a case in point, consider the problem of computing square roots.
We can define the square-root function as
\[
   \sqrt x = the \  y \  such \ that \ y \ge 0 \ and \; y^2 = x.
   \]
</p>

<p>
This describes a perfectly legitimate mathematical function. We could use it
to recognize whether one number is the square root of another. On the other
hand, the definition does not describe a procedure. Indeed, it tells us nothing about how to actually find
the square root of a give number.
</p>

<div class="org-src-container">
<pre class="src src-scheme"><span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">sqrt</span> x<span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span>the y <span style="color: #909183;">(</span><span style="color: #a020f0;">and</span> <span style="color: #709870;">(</span>&gt; y 0<span style="color: #709870;">)</span>
            <span style="color: #709870;">(</span>= <span style="color: #907373;">(</span>square y<span style="color: #907373;">)</span> x<span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
</pre>
</div>

<p>
In mathematics we are usually concerned with
declarative(what is) descriptions, whereas in
computer science we are usually concerned with
imperative(how to) descriptions.
</p>

<p>
<a href="https://en.wikipedia.org/wiki/File:NewtonIteration_Ani.gif">Square root by Newton's method</a>
</p>

<p>
We write this basic strategy as a procedure:
</p>

<div class="org-src-container">
<pre class="src src-scheme"><span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">sqrt-iter</span> guess x<span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span><span style="color: #a020f0;">if</span> <span style="color: #909183;">(</span>good-enough? guess x<span style="color: #909183;">)</span>
        guess
        <span style="color: #909183;">(</span>sqrt-iter <span style="color: #709870;">(</span>improve guess x<span style="color: #709870;">)</span> x<span style="color: #909183;">)</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>

<span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">improve</span> guess x<span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span>average guess <span style="color: #909183;">(</span>/ x guess<span style="color: #909183;">)</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>

<span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">average</span> x y<span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span>/ <span style="color: #909183;">(</span>+ x y<span style="color: #909183;">)</span> 2<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>

<span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">square</span> x<span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span>* x x<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>

<span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">good-enough?</span> guess x<span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span>&lt; <span style="color: #909183;">(</span>abs <span style="color: #709870;">(</span>- <span style="color: #907373;">(</span>square guess<span style="color: #907373;">)</span> x<span style="color: #709870;">)</span><span style="color: #909183;">)</span> 0.001<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>

<span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">sqrt</span> x<span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span>sqrt-iter 1.0 x<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
</pre>
</div>

<p>
So, we can use <i>sqrt</i> to compute square root.
</p>

<div class="org-src-container">
<pre class="src src-scheme"><span style="color: #707183;">(</span>sqrt 9<span style="color: #707183;">)</span>
<span style="color: #707183;">(</span>sqrt <span style="color: #7388d6;">(</span>+ 100 37<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org7e5104a" class="outline-4">
<h4 id="org7e5104a">Supplement of Newton's Method:</h4>
<div class="outline-text-4" id="text-org7e5104a">
<p>
(If you want see more detail, please visit <a href="https://en.wikipedia.org/wiki/Newton's_method">here</a>)
</p>


<div class="figure">
<p><img src="./imgs/20170607_121804_5319HaV.png" alt="20170607_121804_5319HaV.png" />
</p>
<p><span class="figure-number">Figure 2: </span>My understand of Newton's Method</p>
</div>


<div class="figure">
<p><img src="./imgs/newton-method.gif" alt="newton-method.gif" />
</p>
<p><span class="figure-number">Figure 3: </span>From wikipedia of Newton's Method</p>
</div>
</div>
</div>

<div id="outline-container-org94c47ff" class="outline-4">
<h4 id="org94c47ff">Procedures as Black-Box Abstractions</h4>
<div class="outline-text-4" id="text-org94c47ff">
<p>
In the previous problem, we talk about the sqrt.
Notice that the definition of sqrt-iter is recursive.
This will be addressed more carefully in later section.
</p>

<p>
The importance of this decomposition strategy is not
simply that one is dividing the program into parts.
</p>

<p>
So, a precedure definition should be able to suppress
detail. The users of the procedure may not have written
the procedure themselves, but may have obtained it from
another programmer as a black box. A user should not need
to know how the procedure is implemented in order to use it.
</p>
</div>

<div id="outline-container-org549e4f4" class="outline-5">
<h5 id="org549e4f4">Local names</h5>
<div class="outline-text-5" id="text-org549e4f4">
<p>
The simplest consequence is that the parameter of a procedure
must be local to the body of the procedure.
</p>
</div>
</div>


<div id="outline-container-org98ca863" class="outline-5">
<h5 id="org98ca863">Internal definitions and block structure</h5>
<div class="outline-text-5" id="text-org98ca863">
<p>
We would like to localize the subprocedures, hiding them inside
sqrt so that sqrt could coexist with other successive
approximations, each having its own private good enough?
procedure. To make this possible, we allow a procedure to have
internal definitions that are local to that procedure. For
example, in the square root problem we can write.
</p>


<div class="org-src-container">
<pre class="src src-scheme"><span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">sqrt</span> x<span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span><span style="color: #a020f0;">define</span> <span style="color: #909183;">(</span><span style="color: #0000ff;">square</span> x<span style="color: #909183;">)</span> <span style="color: #909183;">(</span>* x x<span style="color: #909183;">)</span><span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span><span style="color: #a020f0;">define</span> <span style="color: #909183;">(</span><span style="color: #0000ff;">average</span> x y<span style="color: #909183;">)</span> <span style="color: #909183;">(</span>/ <span style="color: #709870;">(</span>+ x y<span style="color: #709870;">)</span> 2<span style="color: #909183;">)</span><span style="color: #7388d6;">)</span>  
    <span style="color: #7388d6;">(</span><span style="color: #a020f0;">define</span> <span style="color: #909183;">(</span><span style="color: #0000ff;">good-enough?</span> guess x<span style="color: #909183;">)</span>
    <span style="color: #909183;">(</span>&lt; <span style="color: #709870;">(</span>abs <span style="color: #907373;">(</span>- <span style="color: #6276ba;">(</span>square guess<span style="color: #6276ba;">)</span> x<span style="color: #907373;">)</span><span style="color: #709870;">)</span> 0.001<span style="color: #909183;">)</span><span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span><span style="color: #a020f0;">define</span> <span style="color: #909183;">(</span><span style="color: #0000ff;">improve</span> guess x<span style="color: #909183;">)</span> <span style="color: #909183;">(</span>average guess <span style="color: #709870;">(</span>/ x guess<span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388d6;">)</span> <span style="color: #7388d6;">(</span><span style="color: #a020f0;">define</span> <span style="color: #909183;">(</span><span style="color: #0000ff;">sqrt-iter</span> guess x<span style="color: #909183;">)</span>
    <span style="color: #909183;">(</span><span style="color: #a020f0;">if</span> <span style="color: #709870;">(</span>good-enough? guess x<span style="color: #709870;">)</span> guess
            <span style="color: #709870;">(</span>sqrt-iter <span style="color: #907373;">(</span>improve guess x<span style="color: #907373;">)</span> x<span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388d6;">)</span>
      <span style="color: #7388d6;">(</span>sqrt-iter 1.0 x<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
</pre>
</div>

<p>
Such nesting of definitions, called block structure.
</p>
</div>
</div>
</div>
</div>

<div id="outline-container-orged7acb5" class="outline-3">
<h3 id="orged7acb5">Procedures and the Processes They Generate</h3>
</div>
</div>
</div>
<div id="postamble" class="status">
<script type="text/javascript" src="https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/datejs/1.0/date.min.js"></script>

<script>
var base_url = 'https://api.github.com';
var title = document.title;
var owner = 'yydai';
var repo = 'yydai.github.io';
var search_issues = base_url + '/search/issues?q=' + title + '+user:' + owner + '+label:blog';

console.log("search_issues = "+ search_issues);

function test() {
  jQuery.ajax({
      type: 'GET',
      async: false,
      dataType:'json',
      url: search_issues,
      success:function(data) {
         result = data;
      }
  });
  return result;
}
var result = test();
var items = result.items[0];
if(jQuery.isEmptyObject(items)) {
    create(title);
} else {
    html_url = items.html_url;
	document.body.innerHTML +=
'<div id="comments"><h2>Comments</h2><div id="header">Want to leave a comment? Visit <a href="'+ html_url + '"> this issue page on GitHub</a> (you will need a GitHub account).</div></div>'
}


function create(title) {
    var creare = base_url + '/repos/' + owner + '/' + repo + '/issues';
  var payload = {
          'title': title,
      'body': 'You can write comments in this issues.',
      'labels': ['blog'],
  }
  $.ajax({
    type: 'POST',
    url: create,
    crossDomain: true,
    // The key needs to match your method's input parameter (case-sensitive).
    data: JSON.stringify(payload),
    beforeSend: function(xhr) {
        xhr.setRequestHeader('Authorization', 'Basic eXlkYWk6ZGVpc3Q5MjgxNw==');
        xhr.setRequestHeader('Access-Control-Allow-Origin' , '*');
        xhr.setRequestHeader('contentType', 'application/json; charset=utf-8');
    },
    dataType: 'json',
    success: function(data){alert('create issue success');},
    failure: function(errMsg) {
        alert('create issue failed');
    }
});
}

console.log("total_count = " + result.total_count);
if(result.total_count == 1) {
    var comments_url = result.items[0].comments_url;
} else if (result.total_count == 0) {
        // create a new issue
    //create(title);
} else {
        // result not only
        alert('Cannot load the comments.');
}

function loadComments(data) {
    for (var i=0; i<data.length; i++) {
      var cuser = data[i].user.login;
      var cuserlink = 'https://' + repo + '/' + data[i].user.login;
      var clink = comments_url + '#issuecomment-' + data[i].url.substring(data[i].url.lastIndexOf("/")+1);
      var cbody = data[i].body_html;
      var cavatarlink = data[i].user.avatar_url;
      var cdate = Date.parse(data[i].created_at).toString('yyyy-MM-dd HH:mm:ss');

      var code = '<div class="comment"><div class="commentheader"><div class="commentgravatar">' + '<img src="' + cavatarlink + '" alt="" width="20" height="20">' + '</div><a class="commentuser" href=\""+ cuserlink + "\">' + cuser + '</a><a class="commentdate" href=\"" + clink + "\">' + cdate + '</a></div><div class="commentbody">' + cbody + '</div></div>';

      $('#comments').append(code);
    }
  }


var comments_api = comments_url + '?per_page=100';
console.log("comments api: " + comments_api);
$.ajax(comments_api, {
    headers: {Accept: 'application/vnd.github.full+json'},
    dataType: 'json',
    success: function(msg){
      loadComments(msg);
   }
  });


</script>

<hr />
 <div class='footer'>
© 2017 yydai<br/>
Email: dai92817@icloud.com
</div>
</div>
</body>
</html>
