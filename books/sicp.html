<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2017-07-08 Sat 23:14 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>SICP sicp</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="ying dai" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<script src='https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js'></script>
<link rel='stylesheet' href='../css/worg2.css' typbe='text/css'/>
<link rel='shortcut icon' type='image/x-icon' href='/favicon.ico'>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
<script type="text/javascript" async src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML"></script>
</head>
<body>
<div id="preamble" class="status">

<div class='nav'>
<div class='blog' style='text-align:right'>
<a href='/index.html'> Home </a> | <a href='/contact.html'> About </a>
</div>
</div>
</div>
<div id="content">
<h1 class="title">SICP sicp</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org0e0ce93">环境的选择</a></li>
<li><a href="#org26f0dba">相关资源</a>
<ul>
<li><a href="#org5524284">SICP</a></li>
</ul>
</li>
<li><a href="#org7dd25bb">读书笔记和代码</a>
<ul>
<li><a href="#orgbeb89c8">Chapter 1 Building Abstractions with Procedures</a>
<ul>
<li><a href="#org298c106">The Elements of Programming</a>
<ul>
<li><a href="#org09bab18">Expressions</a></li>
<li><a href="#org8c5b0d3">Naming and the Environment</a></li>
<li><a href="#orge805cc0">Evaluating Combinations</a></li>
<li><a href="#orgc28a909">Compound Procedures</a></li>
<li><a href="#orgd5b2025">The Substitution Model for Procedure Application</a></li>
<li><a href="#org18eee9e">Applicative order versus normal order</a></li>
<li><a href="#orgadc9110">Conditional Expressions and Predicates</a></li>
<li><a href="#org1a986c5">Example: Square Roots by Newton's Method</a></li>
<li><a href="#org9420f11">Supplement of Newton's Method:</a></li>
<li><a href="#org99e9fcd">Procedures as Black-Box Abstractions</a></li>
<li><a href="#org40daf28">Local names</a></li>
<li><a href="#org19de04d">Internal definitions and block structure</a></li>
</ul>
</li>
<li><a href="#orgfc145ec">Procedures and the Processes They Generate</a>
<ul>
<li><a href="#org67b0b8e">Linear Recursion and Iteration</a></li>
<li><a href="#org8890bda">Tree Recusion</a></li>
<li><a href="#orgba747f2">Example: Counting change</a></li>
<li><a href="#org661710b">Orders of Growth</a></li>
<li><a href="#orgb0746c8">Exponentiation</a></li>
<li><a href="#org588cf30">Greatest Common Divisors</a></li>
<li><a href="#org0935e9e">Example: Testing for primality</a></li>
<li><a href="#orge00c611">The Fermat test</a></li>
<li><a href="#org5f242ee">Probabilistic methods</a></li>
</ul>
</li>
<li><a href="#org5f2cf7d">Formulating Abstractions with Higher-Order Procedures</a>
<ul>
<li><a href="#orgbf1c944">Procedures as Arguments \heart</a></li>
<li><a href="#org6018cfa">Constructing Procedures Using lambda</a></li>
<li><a href="#orgd4b6654">using <b>let</b> to create local variables</a></li>
<li><a href="#org5773aca">Procedures as General Methods</a></li>
<li><a href="#orgd3e6323">Procedures as Returned Values</a></li>
<li><a href="#org1a0509c">Newton's method</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#orgb96bbc7">Chapter 2 Building Abstractions with Data</a>
<ul>
<li><a href="#org3200fd3">Introduction to Data Abstraction</a>
<ul>
<li><a href="#org490eab5">Example: Arithmetic Operations for Rational Numbers</a></li>
<li><a href="#orge93d5e2">Pairs</a></li>
<li><a href="#org67df884">Representing rational numbers</a></li>
<li><a href="#orgfa55092">What Is Meant by Data?</a></li>
<li><a href="#org5303ee4"><span class="todo TODO">TODO</span> Extended Exercise: Interval Arithmetic</a></li>
</ul>
</li>
<li><a href="#org6787b1b">Hierarchical Data and the Closure Property</a>
<ul>
<li><a href="#org820b61f">Representing Sequences</a></li>
<li><a href="#org5331bc7">List operations</a></li>
<li><a href="#org18ee4d3">Mapping over lists</a></li>
<li><a href="#orgb84ba59">Hierarchical Structures</a></li>
<li><a href="#org3f85f08">Mapping over trees</a></li>
<li><a href="#orgb2fd55b">Sequences as Conventional Interfaces &check;</a></li>
<li><a href="#org31f93bd">Nested Mappings</a></li>
<li><a href="#orgf1bc8f6">Example: A Picture Language</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="#org42e00c6">练习答案</a>
<ul>
<li><a href="#orgab99062">Chapter 1</a>
<ul>
<li><a href="#org74f3638">Exercise 1.1 p26</a></li>
<li><a href="#orgc00ae39">Exercise 1.2</a></li>
<li><a href="#org4baa341">Exercise 1.3</a></li>
<li><a href="#org4660549">Exercise 1.4</a></li>
<li><a href="#org2519789">Exercise 1.5</a></li>
<li><a href="#org2872007">Exercise 1.6</a></li>
<li><a href="#org6560aef">Exercise 1.7 &check;</a></li>
<li><a href="#orgff8eaa0">Exercise 1.8</a></li>
<li><a href="#org7c61a3d">Exercise 1.9</a></li>
<li><a href="#orgad899ae">Exercise 1.10</a></li>
<li><a href="#org43b62a9">Exercise 1.11 <b>?</b></a></li>
<li><a href="#org8a5cf71">Exercise 1.12 <b>?</b></a></li>
<li><a href="#org8c1b2bf">Exercise 1.13 <b>?</b></a></li>
<li><a href="#org164b553">Exercise 1.14 <b>?</b></a></li>
<li><a href="#org6f9799d">Exercise 1.15 &check;</a></li>
<li><a href="#org8bca4fd">Exercise 1.16 &check;</a></li>
<li><a href="#org086d930">Exercise 1.17</a></li>
<li><a href="#org615d022">Exercise 1.18</a></li>
<li><a href="#org3940947">Exercise 1.19 <b>?</b></a></li>
<li><a href="#orgccdd5f8">Exercise 1.20</a></li>
<li><a href="#org103f83a">Exercise 1.21</a></li>
<li><a href="#orga2cad67"><span class="todo TODO">TODO</span> Exercise 1.22</a></li>
<li><a href="#orgdcb4b35">Exercise 1.23</a></li>
<li><a href="#org37dc2f3"><span class="todo TODO">TODO</span> Exercise 1.24</a></li>
<li><a href="#org4638122"><span class="todo TODO">TODO</span> Exercise 1.25</a></li>
<li><a href="#org2edddca">Exercise 1.26</a></li>
<li><a href="#org37bfa24">Exercise 1.27</a></li>
<li><a href="#orgaf4ecec">Exercise 1.28</a></li>
<li><a href="#orgcb1d839">Exercise 1.29 &check;</a></li>
<li><a href="#org8e7c111">Exercise 1.30 &check;</a></li>
<li><a href="#orgcf62518">Exercise 1.31</a></li>
<li><a href="#org5705ba4">Exercise 1.32</a></li>
<li><a href="#org48795d2">Exercise 1.33</a></li>
<li><a href="#org6865f84">Exercise 1.34</a></li>
<li><a href="#orgb0c0585">Exercise 1.35</a></li>
</ul>
</li>
<li><a href="#org94fed2e">Chapter 2</a>
<ul>
<li><a href="#orgc2044f6">Exercise 2.1</a></li>
<li><a href="#orgd547d5c">Exercise 2.2</a></li>
<li><a href="#org8d1ac83"><span class="todo TODO">TODO</span> Exercise 2.3</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<hr />

<p>
这个主要介 SICP 这本书环境搭建，相关的资源以及读书笔记和代码。
</p>

<div id="outline-container-org0e0ce93" class="outline-2">
<h2 id="org0e0ce93">环境的选择</h2>
<div class="outline-text-2" id="text-org0e0ce93">
<p>
学习 SICP 这本书，我们要先搭建一个 scheme 环境，可以使用 Emacs，但是比较的麻烦。另外，下载<a href="http://download.racket-lang.org/">DrRacket</a>。
这里有个链接：<a href="http://docs.racket-lang.org/sicp-manual/index.html">http://docs.racket-lang.org/sicp-manual/index.html</a>
</p>
</div>
</div>

<div id="outline-container-org26f0dba" class="outline-2">
<h2 id="org26f0dba">相关资源</h2>
<div class="outline-text-2" id="text-org26f0dba">
</div><div id="outline-container-org5524284" class="outline-3">
<h3 id="org5524284">SICP</h3>
<div class="outline-text-3" id="text-org5524284">
<ul class="org-ul">
<li><a href="https://mitpress.mit.edu/sicp/">MIT Sicp site</a></li>
<li><a href="https://mitpress.mit.edu/sicp/full-text/book/book.html">html 版本</a></li>
<li><a href="https://pan.baidu.com/s/1geG13H5">Pdf 版本</a></li>
<li><a href="https://mitpress.mit.edu/sicp/psets/index.html">Sample Programming Assignments</a></li>
<li><a href="https://www.gitbook.com/book/evarga/solutions-guide-for-instructor-s-manual-of-sicp/details">Solutions Guide for Instructor's Manual of SICP</a></li>
<li><a href="https://courses.p2pu.org/en/groups/sicp-study-group/content/sicp-online-resources/">sicp study group</a></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org7dd25bb" class="outline-2">
<h2 id="org7dd25bb">读书笔记和代码</h2>
<div class="outline-text-2" id="text-org7dd25bb">
</div>

<div id="outline-container-orgbeb89c8" class="outline-3">
<h3 id="orgbeb89c8">Chapter 1 Building Abstractions with Procedures</h3>
<div class="outline-text-3" id="text-orgbeb89c8">
<blockquote>
<p>
The acts of the mind, wherein it exerts its power over simple
ideas, are chiefly these three: 1. Combining several simple ideas
into one compound one, and thus all complex ideas are made. 2. The
second is bringing two ideas, whether simple or complex,
together, and seting them by one another so as to take a view of
them at once, without uniting them into one, by which it gets all
its ideas of relations. 3. The third is separating them from all
other ideas that accompany them in their real existence: this is
called abstraction, and thus all its general ideas are made.
</p>

<p>
—John Locke, An Essay Concerning Human Understanding (1690)
</p>
</blockquote>
</div>


<div id="outline-container-org298c106" class="outline-4">
<h4 id="org298c106">The Elements of Programming</h4>
<div class="outline-text-4" id="text-org298c106">
<p>
A powerful programming language is
more than just a means for
instructing a computer to perform
tasks. The language also serves as a
framework within which we organize
our idea about processes.
</p>

<p>
Every powerful language has three
mechanisms for accomplishing this:
</p>
<ul class="org-ul">
<li><code>primitive expressions</code>, which
represent the simplest entities
the language is concerned with.</li>
<li><code>means of combination</code>, by which
compound elements are build from
simpler ones, and</li>
<li><code>means of abstraction</code>, by which
compound elements can be named and
manipulated as units.</li>
</ul>

<p>
In programming, we deal with two kinds of elements:
procedures and data.
</p>
</div>

<div id="outline-container-org09bab18" class="outline-5">
<h5 id="org09bab18">Expressions</h5>
<div class="outline-text-5" id="text-org09bab18">
<p>
Expressions representing numbers
maybe combined with an expression
representing a primitive
procedures(such as + or *) to form a
compound expression of the procedure
to those numbers.
</p>

<div class="org-src-container">
<pre class="src src-scheme"><span style="color: #707183;">(</span>+ 137 349<span style="color: #707183;">)</span>

<span style="color: #707183;">(</span>/ 5 99<span style="color: #707183;">)</span>

<span style="color: #707183;">(</span>+ 2.2 19<span style="color: #707183;">)</span>
</pre>
</div>

<p>
The convention of placing the operator to the left of
the operands is known as <code>prefix notation</code> , and it may be somewhat
confusing at first because it departs significantly from the
customary mathematical convention. Prefix notation has serveral
advantages. One of the is that it can accommodate
procedures that may take an arbitrary number of arguments, as the
following examples:
</p>


<div class="org-src-container">
<pre class="src src-scheme"><span style="color: #707183;">(</span>+ 12 23 43 4<span style="color: #707183;">)</span>

<span style="color: #707183;">(</span>* 33  85 2<span style="color: #707183;">)</span>
</pre>
</div>

<p>
A second advantage of prefix
notation is that it extends in a
straightforward way to allow
combinations to be nested, that is,
to have combinations whose
elements are themselves
combinations:
</p>

<div class="org-src-container">
<pre class="src src-scheme"><span style="color: #707183;">(</span>+ <span style="color: #7388d6;">(</span>* 3 5<span style="color: #7388d6;">)</span> <span style="color: #7388d6;">(</span>- 10 6<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
</pre>
</div>

<p>
There is no limit to the depth of such nesting.
</p>

<p>
Instead to write the code like in one line:
</p>

<div class="org-src-container">
<pre class="src src-scheme"><span style="color: #707183;">(</span>+ <span style="color: #7388d6;">(</span>* 3 <span style="color: #909183;">(</span>+ <span style="color: #709870;">(</span>* 2 4<span style="color: #709870;">)</span> <span style="color: #709870;">(</span>+ 3 5<span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388d6;">)</span> <span style="color: #7388d6;">(</span>+ <span style="color: #909183;">(</span>- 10 7<span style="color: #909183;">)</span> 6<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
</pre>
</div>

<p>
We can write it to the following form as pretty-printing:
</p>

<div class="org-src-container">
<pre class="src src-scheme"><span style="color: #707183;">(</span>+ <span style="color: #7388d6;">(</span>* 3
      <span style="color: #909183;">(</span>+ <span style="color: #709870;">(</span>* 2 4<span style="color: #709870;">)</span>
         <span style="color: #709870;">(</span>+ 3 5<span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388d6;">)</span>
   <span style="color: #7388d6;">(</span>+ <span style="color: #909183;">(</span>- 10 7<span style="color: #909183;">)</span>
      6<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org8c5b0d3" class="outline-5">
<h5 id="org8c5b0d3">Naming and the Environment</h5>
<div class="outline-text-5" id="text-org8c5b0d3">
<p>
In the Scheme, we name things with <code>define</code> .
</p>

<div class="org-src-container">
<pre class="src src-scheme"><span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #0000ff;">size</span> 2<span style="color: #707183;">)</span>

size

<span style="color: #707183;">(</span>* 5 size<span style="color: #707183;">)</span>
</pre>
</div>

<p>
Here are further examples of the use of <code>define</code> :
</p>
<div class="org-src-container">
<pre class="src src-scheme"><span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #0000ff;">pi</span> 3.14<span style="color: #707183;">)</span>

<span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #0000ff;">radius</span> 10<span style="color: #707183;">)</span>

<span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #0000ff;">curcumference</span> <span style="color: #7388d6;">(</span>* 2 pi radius<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
</pre>
</div>
</div>
</div>


<div id="outline-container-orge805cc0" class="outline-5">
<h5 id="orge805cc0">Evaluating Combinations</h5>
<div class="outline-text-5" id="text-orge805cc0">
<p>
For example,evaluating
</p>
<div class="org-src-container">
<pre class="src src-scheme"><span style="color: #707183;">(</span>* <span style="color: #7388d6;">(</span>+ 2 <span style="color: #909183;">(</span>* 4 6<span style="color: #909183;">)</span><span style="color: #7388d6;">)</span>
   <span style="color: #7388d6;">(</span>+ 3 5 7<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
</pre>
</div>

<p>
requires that the evaluation rule be applied to four
different combinations. We can obtain a picture of this
process by representing the combination in the form of a tree
, as shown in blow. The terminal nodes represent either
operators or numbers.
</p>


<div class="figure">
<p><img src="./imgs/20170606_164720_53196PP.png" alt="20170606_164720_53196PP.png" />
</p>
</div>
</div>
</div>

<div id="outline-container-orgc28a909" class="outline-5">
<h5 id="orgc28a909">Compound Procedures</h5>
<div class="outline-text-5" id="text-orgc28a909">
<p>
Now we will learn about <code>procedure definitions</code> , a much
more powerful abstraction by which a compound operation
can be given a name and then referred to as a unit. Like:
</p>

<div class="org-src-container">
<pre class="src src-scheme"><span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">square</span> x<span style="color: #7388d6;">)</span> <span style="color: #7388d6;">(</span>* x x<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>

<span style="color: #707183;">(</span>square 21<span style="color: #707183;">)</span>

<span style="color: #707183;">(</span>square <span style="color: #7388d6;">(</span>+ 2 5<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>

<span style="color: #707183;">(</span>square <span style="color: #7388d6;">(</span>square 3<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
</pre>
</div>

<p>
The general form of a procedure definition is
</p>
<div class="org-src-container">
<pre class="src src-scheme"><span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">&lt;name&gt;</span> &lt;formal parameters<span style="color: #7388d6;">)</span>
<span style="color: #228b22;">&lt;body&gt;</span><span style="color: #707183;">)</span>
</pre>
</div>

<p>
For example, \(x^2 + y^2\) can be expressed as
</p>

<div class="org-src-container">
<pre class="src src-scheme"><span style="color: #707183;">(</span>+ <span style="color: #7388d6;">(</span>square x<span style="color: #7388d6;">)</span> <span style="color: #7388d6;">(</span>square y<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
</pre>
</div>

<p>
<a id="orgb19e2ae"></a>
</p>
</div>
</div>
<div id="outline-container-orgd5b2025" class="outline-5">
<h5 id="orgd5b2025">The Substitution Model for Procedure Application</h5>
<div class="outline-text-5" id="text-orgd5b2025">
<div class="org-src-container">
<pre class="src src-scheme"><span style="color: #707183;">(</span>f 5<span style="color: #707183;">)</span>
<span style="color: #707183;">(</span>sum-of-squares <span style="color: #7388d6;">(</span>+ a 1<span style="color: #7388d6;">)</span> <span style="color: #7388d6;">(</span>* a 2<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
<span style="color: #707183;">(</span>sum-of-squares <span style="color: #7388d6;">(</span>+ 5 1<span style="color: #7388d6;">)</span> <span style="color: #7388d6;">(</span>* 5 2<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
<span style="color: #707183;">(</span>+ <span style="color: #7388d6;">(</span>square 6<span style="color: #7388d6;">)</span> <span style="color: #7388d6;">(</span>square 10<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
<span style="color: #707183;">(</span>+ <span style="color: #7388d6;">(</span>* 6 6<span style="color: #7388d6;">)</span> <span style="color: #7388d6;">(</span>* 10 10<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
<span style="color: #707183;">(</span>+ 36 100<span style="color: #707183;">)</span>
136
</pre>
</div>

<p>
The process we have just described is called the <code>substitution model</code> for
procedure application.
</p>
</div>
</div>

<div id="outline-container-org18eee9e" class="outline-5">
<h5 id="org18eee9e">Applicative order versus normal order</h5>
<div class="outline-text-5" id="text-org18eee9e">
<p>
The above way is not the only way to perform evaluation.
An alternative evalution model would not evaluate the
operands until their values were needed. Instead it first
substitute operand expressions for parameters until it
obtained an expression involving only primitive operators,
and then perform the evaluation.
</p>

<p>
In this place, We still use the (f 5) as an example.
</p>

<div class="org-src-container">
<pre class="src src-scheme"><span style="color: #707183;">(</span>sum-of-squares <span style="color: #7388d6;">(</span>+ 5 1<span style="color: #7388d6;">)</span> <span style="color: #7388d6;">(</span>* 5 2<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
<span style="color: #707183;">(</span>+ <span style="color: #7388d6;">(</span>square <span style="color: #909183;">(</span>+ 5 1<span style="color: #909183;">)</span><span style="color: #7388d6;">)</span> <span style="color: #7388d6;">(</span>square <span style="color: #909183;">(</span>* 5 2<span style="color: #909183;">)</span><span style="color: #7388d6;">)</span> <span style="color: #707183;">)</span> <span style="color: #707183;">(</span>+ <span style="color: #7388d6;">(</span>*<span style="color: #909183;">(</span>+51<span style="color: #909183;">)(</span>+51<span style="color: #909183;">)</span><span style="color: #7388d6;">)</span> <span style="color: #7388d6;">(</span>*<span style="color: #909183;">(</span>*52<span style="color: #909183;">)(</span>*52<span style="color: #909183;">)</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>

<span style="color: #707183;">(</span>+ <span style="color: #7388d6;">(</span>* 6 6<span style="color: #7388d6;">)</span> <span style="color: #7388d6;">(</span>* 10 10<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
<span style="color: #707183;">(</span>+  36 100<span style="color: #707183;">)</span>
136
</pre>
</div>

<p>
This method is called <code>normal-order evaluation</code> with fully
expand and then reduce evaluation method, in contrast
to the "evaluate the arguments and the apply" method that
the interpreter actually uses, which is called <code>applicative-order evaluation</code> .
</p>
</div>
</div>

<div id="outline-container-orgadc9110" class="outline-5">
<h5 id="orgadc9110">Conditional Expressions and Predicates</h5>
<div class="outline-text-5" id="text-orgadc9110">
<p>
Now, we will do like this:
\[ |x| =\left\{ \begin{aligned} x & , & if & & x > 0 \\ 0 & , & if
   & & x = 0 \\ -x & , & if & & x < 0\end{aligned} \right.\]
</p>

<p>
We will compute the absolute value of a number by testing whether the number is
positive, negative, or zero.
</p>

<div class="org-src-container">
<pre class="src src-scheme"><span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">abs</span> x<span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span><span style="color: #a020f0;">cond</span> <span style="color: #909183;">(</span><span style="color: #709870;">(</span>&gt; x 0<span style="color: #709870;">)</span> x<span style="color: #909183;">)</span>
          <span style="color: #909183;">(</span><span style="color: #709870;">(</span>= x 0<span style="color: #709870;">)</span> 0<span style="color: #909183;">)</span>
          <span style="color: #909183;">(</span><span style="color: #709870;">(</span>&lt; x 0<span style="color: #709870;">)</span> <span style="color: #709870;">(</span>- x<span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>

<span style="color: #b22222;">;; </span><span style="color: #b22222;">or this</span>
<span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">abs</span> x<span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span><span style="color: #a020f0;">cond</span> <span style="color: #909183;">(</span><span style="color: #709870;">(</span>&lt; x 0<span style="color: #709870;">)</span> <span style="color: #709870;">(</span>- x<span style="color: #709870;">)</span><span style="color: #909183;">)</span>
           <span style="color: #909183;">(</span><span style="color: #a020f0;">else</span> x<span style="color: #909183;">)</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>

<span style="color: #b22222;">;; </span><span style="color: #b22222;">if</span>
<span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">abs</span> x<span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span><span style="color: #a020f0;">if</span> <span style="color: #909183;">(</span>&lt; x 0<span style="color: #909183;">)</span>
        <span style="color: #909183;">(</span>- x<span style="color: #909183;">)</span>
        x<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
</pre>
</div>


<p>
The general form of a conditional expression is
</p>
<div class="org-src-container">
<pre class="src src-scheme"><span style="color: #707183;">(</span><span style="color: #a020f0;">cond</span> <span style="color: #7388d6;">(</span><span style="color: #909183;">&#10216;</span>p1<span style="color: #909183;">&#10217;</span> <span style="color: #909183;">&#10216;</span>e1<span style="color: #909183;">&#10217;</span><span style="color: #7388d6;">)</span>
      <span style="color: #7388d6;">(</span><span style="color: #909183;">&#10216;</span>p2<span style="color: #909183;">&#10217;</span> <span style="color: #909183;">&#10216;</span>e2<span style="color: #909183;">&#10217;</span><span style="color: #7388d6;">)</span>
        ...
      <span style="color: #7388d6;">(</span><span style="color: #909183;">&#10216;</span>pn<span style="color: #909183;">&#10217;</span> <span style="color: #909183;">&#10216;</span>en<span style="color: #909183;">&#10217;</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
</pre>
</div>

<p>
There are logical composition operations, which enable us
to construct compound predicates.
</p>
<ul class="org-ul">
<li>(and &lt;e<sub>1</sub>&gt; &#x2026; &lt;e<sub>n</sub>&gt;) If any &lt;e&gt; evaluates to false, the value
of the and expression is false, and the rest of &lt;e&gt;'s are not
evaluated.</li>

<li>(or &#x2026;.) Any is ture, then return true. If all is false, then return false.</li>

<li>(not &#x2026;.)</li>
</ul>

<p>
As an example of how these are used. Such \(x\) be in the range \(5 < x < 10\) may be expressed as
</p>
<div class="org-src-container">
<pre class="src src-scheme"><span style="color: #707183;">(</span><span style="color: #a020f0;">and</span> <span style="color: #7388d6;">(</span>&gt; x 5<span style="color: #7388d6;">)</span> <span style="color: #7388d6;">(</span>&lt; x 10<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
</pre>
</div>

<p>
As another example, we can define a predicate to test whether one
number is greater than or equal to another as:
</p>

<div class="org-src-container">
<pre class="src src-scheme"><span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">&gt;=</span> x y<span style="color: #7388d6;">)</span> <span style="color: #7388d6;">(</span><span style="color: #a020f0;">or</span> <span style="color: #909183;">(</span>&gt; x y<span style="color: #909183;">)</span> <span style="color: #909183;">&#65288;</span>= x y<span style="color: #909183;">&#65289;</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">or</span>
<span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">&gt;=</span> x y<span style="color: #7388d6;">)</span> <span style="color: #7388d6;">(</span>not <span style="color: #909183;">(</span>&lt; x y<span style="color: #909183;">)</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org1a986c5" class="outline-5">
<h5 id="org1a986c5">Example: Square Roots by Newton's Method</h5>
<div class="outline-text-5" id="text-org1a986c5">
<p>
Procedures are much like ordinary mathematical
functions. But there is an important difference
between mathematical functions and computer procedures.
Procedures must be effective.
</p>

<p>
As a case in point, consider the problem of computing square roots.
We can define the square-root function as
\[
   \sqrt x = the \  y \  such \ that \ y \ge 0 \ and \; y^2 = x.
   \]
</p>

<p>
This describes a perfectly legitimate mathematical function. We could use it
to recognize whether one number is the square root of another. On the other
hand, the definition does not describe a procedure. Indeed, it tells us nothing about how to actually find
the square root of a give number.
</p>

<div class="org-src-container">
<pre class="src src-scheme"><span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">sqrt</span> x<span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span>the y <span style="color: #909183;">(</span><span style="color: #a020f0;">and</span> <span style="color: #709870;">(</span>&gt; y 0<span style="color: #709870;">)</span>
            <span style="color: #709870;">(</span>= <span style="color: #907373;">(</span>square y<span style="color: #907373;">)</span> x<span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
</pre>
</div>

<p>
In mathematics we are usually concerned with
declarative(what is) descriptions, whereas in
computer science we are usually concerned with
imperative(how to) descriptions.
</p>

<p>
<a href="https://en.wikipedia.org/wiki/File:NewtonIteration_Ani.gif">Square root by Newton's method</a>
</p>

<p>
We write this basic strategy as a procedure:
</p>

<div class="org-src-container">
<pre class="src src-scheme"><span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">sqrt-iter</span> guess x<span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span><span style="color: #a020f0;">if</span> <span style="color: #909183;">(</span>good-enough? guess x<span style="color: #909183;">)</span>
        guess
        <span style="color: #909183;">(</span>sqrt-iter <span style="color: #709870;">(</span>improve guess x<span style="color: #709870;">)</span> x<span style="color: #909183;">)</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>

<span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">improve</span> guess x<span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span>average guess <span style="color: #909183;">(</span>/ x guess<span style="color: #909183;">)</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>

<span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">average</span> x y<span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span>/ <span style="color: #909183;">(</span>+ x y<span style="color: #909183;">)</span> 2<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>

<span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">square</span> x<span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span>* x x<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>

<span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">good-enough?</span> guess x<span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span>&lt; <span style="color: #909183;">(</span>abs <span style="color: #709870;">(</span>- <span style="color: #907373;">(</span>square guess<span style="color: #907373;">)</span> x<span style="color: #709870;">)</span><span style="color: #909183;">)</span> 0.001<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>

<span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">sqrt</span> x<span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span>sqrt-iter 1.0 x<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
</pre>
</div>

<p>
So, we can use <i>sqrt</i> to compute square root.
</p>

<div class="org-src-container">
<pre class="src src-scheme"><span style="color: #707183;">(</span>sqrt 9<span style="color: #707183;">)</span>
<span style="color: #707183;">(</span>sqrt <span style="color: #7388d6;">(</span>+ 100 37<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org9420f11" class="outline-5">
<h5 id="org9420f11">Supplement of Newton's Method:</h5>
<div class="outline-text-5" id="text-org9420f11">
<p>
(If you want see more detail, please visit <a href="https://en.wikipedia.org/wiki/Newton's_method">here</a>)
</p>


<div class="figure">
<p><img src="./imgs/20170607_121804_5319HaV.png" alt="20170607_121804_5319HaV.png" />
</p>
<p><span class="figure-number">Figure 2: </span>My understand of Newton's Method</p>
</div>


<div class="figure">
<p><img src="./imgs/newton-method.gif" alt="newton-method.gif" />
</p>
<p><span class="figure-number">Figure 3: </span>From wikipedia of Newton's Method</p>
</div>
</div>
</div>

<div id="outline-container-org99e9fcd" class="outline-5">
<h5 id="org99e9fcd">Procedures as Black-Box Abstractions</h5>
<div class="outline-text-5" id="text-org99e9fcd">
<p>
In the previous problem, we talk about the sqrt.
Notice that the definition of sqrt-iter is recursive.
This will be addressed more carefully in later section.
</p>

<p>
The importance of this decomposition strategy is not
simply that one is dividing the program into parts.
</p>

<p>
So, a precedure definition should be able to suppress
detail. The users of the procedure may not have written
the procedure themselves, but may have obtained it from
another programmer as a black box. A user should not need
to know how the procedure is implemented in order to use it.
</p>
</div>
</div>

<div id="outline-container-org40daf28" class="outline-5">
<h5 id="org40daf28">Local names</h5>
<div class="outline-text-5" id="text-org40daf28">
<p>
The simplest consequence is that the parameter of a procedure
must be local to the body of the procedure.
</p>
</div>
</div>

<div id="outline-container-org19de04d" class="outline-5">
<h5 id="org19de04d">Internal definitions and block structure</h5>
<div class="outline-text-5" id="text-org19de04d">
<p>
We would like to localize the subprocedures, hiding them inside
sqrt so that sqrt could coexist with other successive
approximations, each having its own private good enough?
procedure. To make this possible, we allow a procedure to have
internal definitions that are local to that procedure. For
example, in the square root problem we can write.
</p>


<div class="org-src-container">
<pre class="src src-scheme"><span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">sqrt</span> x<span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span><span style="color: #a020f0;">define</span> <span style="color: #909183;">(</span><span style="color: #0000ff;">square</span> x<span style="color: #909183;">)</span> <span style="color: #909183;">(</span>* x x<span style="color: #909183;">)</span><span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span><span style="color: #a020f0;">define</span> <span style="color: #909183;">(</span><span style="color: #0000ff;">average</span> x y<span style="color: #909183;">)</span> <span style="color: #909183;">(</span>/ <span style="color: #709870;">(</span>+ x y<span style="color: #709870;">)</span> 2<span style="color: #909183;">)</span><span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span><span style="color: #a020f0;">define</span> <span style="color: #909183;">(</span><span style="color: #0000ff;">good-enough?</span> guess x<span style="color: #909183;">)</span>
    <span style="color: #909183;">(</span>&lt; <span style="color: #709870;">(</span>abs <span style="color: #907373;">(</span>- <span style="color: #6276ba;">(</span>square guess<span style="color: #6276ba;">)</span> x<span style="color: #907373;">)</span><span style="color: #709870;">)</span> 0.001<span style="color: #909183;">)</span><span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span><span style="color: #a020f0;">define</span> <span style="color: #909183;">(</span><span style="color: #0000ff;">improve</span> guess x<span style="color: #909183;">)</span> <span style="color: #909183;">(</span>average guess <span style="color: #709870;">(</span>/ x guess<span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388d6;">)</span> <span style="color: #7388d6;">(</span><span style="color: #a020f0;">define</span> <span style="color: #909183;">(</span><span style="color: #0000ff;">sqrt-iter</span> guess x<span style="color: #909183;">)</span>
    <span style="color: #909183;">(</span><span style="color: #a020f0;">if</span> <span style="color: #709870;">(</span>good-enough? guess x<span style="color: #709870;">)</span> guess
            <span style="color: #709870;">(</span>sqrt-iter <span style="color: #907373;">(</span>improve guess x<span style="color: #907373;">)</span> x<span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388d6;">)</span>
      <span style="color: #7388d6;">(</span>sqrt-iter 1.0 x<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
</pre>
</div>

<p>
Such nesting of definitions, called block structure.
</p>
</div>
</div>
</div>

<div id="outline-container-orgfc145ec" class="outline-4">
<h4 id="orgfc145ec">Procedures and the Processes They Generate</h4>
<div class="outline-text-4" id="text-orgfc145ec">
<p>
To become experts, we must learn to visualize the
processes generated by various types of procedures.
Only after we have developed such a skill can we learn to
reliably construct programs that exhibit the desired
behavior.
</p>
</div>

<div id="outline-container-org67b0b8e" class="outline-5">
<h5 id="org67b0b8e">Linear Recursion and Iteration</h5>
<div class="outline-text-5" id="text-org67b0b8e">
<p>
We begin by considering the factorial function, defined by
\[
	n! = n \cdot (n-1) \cdot (n-2) \cdots 3 \cdot 2 \cdot 1
    \]
</p>

<p>
Thus, we can compute \(n!\) by computing \((n-1)!\) and
multiplying the result by \(n\).
</p>

<div class="org-src-container">
<pre class="src src-scheme"><span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">factorial</span> n<span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span><span style="color: #a020f0;">if</span> <span style="color: #909183;">(</span>= n 1<span style="color: #909183;">)</span>
        1
        <span style="color: #909183;">(</span>* n <span style="color: #709870;">(</span>factorial <span style="color: #907373;">(</span>- n 1<span style="color: #907373;">)</span><span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
</pre>
</div>


<p>
We can use the substitution model of <a href="#orgb19e2ae">This section</a> to watch this procedure
in action computing \(6!\), as show in <a href="#org13b5548">Figure 4</a>.
</p>


<div id="org13b5548" class="figure">
<p><img src="./imgs/20170607_204838_5319Ukb.png" alt="20170607_204838_5319Ukb.png" />
</p>
<p><span class="figure-number">Figure 4: </span>A linear recursive process for computing 6!</p>
</div>

<p>
Now let's take a different perspective on computing factorial.
We could describe a rule for computing \(n!\).
</p>

\begin{align}
product & \Leftarrow counter * product\\
counter & \Leftarrow counter + 1
\end{align}

<p>
Once again, we can recast our description as a procedure
for computing factorials.
</p>

<div class="org-src-container">
<pre class="src src-scheme"><span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">factorial</span> n<span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span>fact-iter 1 1 n<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>

<span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">fact-iter</span> product counter max-count<span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span><span style="color: #a020f0;">if</span> <span style="color: #909183;">(</span>&gt; counter max-count<span style="color: #909183;">)</span>
        product
        <span style="color: #909183;">(</span>fact-iter <span style="color: #709870;">(</span>* product counter<span style="color: #709870;">)</span>
                    <span style="color: #709870;">(</span>+ counter 1<span style="color: #709870;">)</span>
                    max-count<span style="color: #909183;">)</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
</pre>
</div>

<p>
As before, we can use the substitution mode to visualize
the process of computing \(6!\), as shown in <a href="#org851b660">Figure</a>
</p>


<div id="org851b660" class="figure">
<p><img src="./imgs/20170608_102359_5319_pO.png" alt="20170608_102359_5319_pO.png" />
</p>
<p><span class="figure-number">Figure 5: </span>A linear iterative process for computing 6!</p>
</div>


<p>
Compare the two process. We can find the "shapes" of the two processs
are quite differently.
</p>

<p>
In the next, we'll talk about the difference between
<i>linear recursive process</i> and <i>linear iterative process</i>.
</p>

<p>
Consider the first process. The expansion occurs as the
process builds up a chain of <i>deferred operations</i>. This
python of process, characterized by a chain of deferred
operations, is called a <i>recursive process</i>. Carrying out the
process requires that the iterpreter keep track of the
operations to be performed later on.
</p>

<p>
By contrast, the second process does not grow and shrink.  At each
step, all we need to keep track of, for any n, are the current
values of the variables product, counter, and maxcount.  We call
this an <i>iterative process</i>. In general, an iterative process is one
whose state can be summarized by a fixed number of state
variables, together with a fixed rule that describes how the state
variables should be updated as the process moves from state to
state and an (optional) end test that specifies conditions under
which the process should terminate.
</p>

<p>
Understand the difference between <i>recursive process</i> and <i>recursive
procedure</i>. It may seem disturbing that we refer to a recursive
procedure such as factiter as generating an iterative
process. However, the process really is iterative. In the
page of <b>45</b> , there has more detail about this. <b>Must read this part once again</b>.
</p>

<p>
It will execute an iterative process in constant space, even if
the iterative process is described by a recursive procedure. An
implementation with this property is called tail-recursive.
</p>
</div>
</div>

<div id="outline-container-org8890bda" class="outline-5">
<h5 id="org8890bda">Tree Recusion</h5>
<div class="outline-text-5" id="text-org8890bda">
<p>
As an example, consider computing the sequence of
<b>Fibonacci</b> numbers, in which each number is the sum of the preceding two:
\[0, 1, 1, 2, 3, 5, 8, 13, 21, \cdots\]
</p>

<p>
In general, the Fibonacci numbers can be defined by the rule
</p>


<div class="figure">
<p><img src="./imgs/20170608_113451_5319M0U.png" alt="20170608_113451_5319M0U.png" />
</p>
</div>

<p>
So, we can immediately translate this definition into
a recursive procedure.
</p>
<div class="org-src-container">
<pre class="src src-scheme"><span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">fib</span> n<span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span><span style="color: #a020f0;">cond</span> <span style="color: #909183;">(</span><span style="color: #709870;">(</span>= n 0<span style="color: #709870;">)</span> 0<span style="color: #909183;">)</span>
          <span style="color: #909183;">(</span><span style="color: #709870;">(</span>= n 1<span style="color: #709870;">)</span> 1<span style="color: #909183;">)</span>
          <span style="color: #909183;">(</span><span style="color: #a020f0;">else</span> <span style="color: #709870;">(</span>+ <span style="color: #907373;">(</span>fib <span style="color: #6276ba;">(</span>- n 1<span style="color: #6276ba;">)</span><span style="color: #907373;">)</span>
                   <span style="color: #907373;">(</span>fib <span style="color: #6276ba;">(</span>- n 2<span style="color: #6276ba;">)</span><span style="color: #907373;">)</span><span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
</pre>
</div>


<div id="org6b3459a" class="figure">
<p><img src="./imgs/20170608_113927_5319Z-a.png" alt="20170608_113927_5319Z-a.png" />
</p>
<p><span class="figure-number">Figure 7: </span>The tree-recursive process generated in computing (fib 5)</p>
</div>


<p>
Notice in <a href="#org6b3459a">Figure</a> that the process of (fib 5) like a tree.
And the entrire computation of (fib 3) is duplicated.
Thus, the process uses a number of steps that grows exponentially with
the input. On the other hand, the space required grows only linearly with the input.
</p>

<p>
We can compute Fibonacci numbers iteratively using the procedure.
</p>

<div class="org-src-container">
<pre class="src src-scheme"><span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">fib</span> n<span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span>fib-iter 1 0 n<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>

<span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">fib-iter</span> a b count<span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span><span style="color: #a020f0;">if</span> <span style="color: #909183;">(</span>= count 0<span style="color: #909183;">)</span>
        b
        <span style="color: #909183;">(</span>fib-iter <span style="color: #709870;">(</span>+ a b<span style="color: #709870;">)</span> a <span style="color: #709870;">(</span>- count 1<span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
</pre>
</div>
</div>
</div>


<div id="outline-container-orgba747f2" class="outline-5">
<h5 id="orgba747f2">Example: Counting change</h5>
<div class="outline-text-5" id="text-orgba747f2">
<p>
This part is more difficult to understand. And it is mainly about
how to change amount of money with n kinds of coins.
<b>Read this part later</b>
</p>
</div>
</div>


<div id="outline-container-org661710b" class="outline-5">
<h5 id="org661710b">Orders of Growth</h5>
<div class="outline-text-5" id="text-org661710b">
<p>
Order of growth provides a useful indication of how we may
expect the behavior of the process to change as we change the size of
the problem. We represent the orders with the symbol of \(\Theta\),
like \(\Theta(n) \; \Theta(n^2) \cdots\).
</p>
</div>
</div>

<div id="outline-container-orgb0746c8" class="outline-5">
<h5 id="orgb0746c8">Exponentiation</h5>
<div class="outline-text-5" id="text-orgb0746c8">
<p>
Consider the problem of computing the exponential of a
given number. One way to do this is via the recursive definition.
</p>

\begin{align}
b^n & = b \cdot b^{n-1},\\ b^0 & = 1,
\end{align}

<p>
which translates readily into the procedure
</p>
<div class="org-src-container">
<pre class="src src-scheme"><span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">expt</span> b n<span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span><span style="color: #a020f0;">if</span> <span style="color: #909183;">(</span>= n 0<span style="color: #909183;">)</span>
        1
        <span style="color: #909183;">(</span>* b <span style="color: #709870;">(</span>expt b <span style="color: #907373;">(</span>- n 1<span style="color: #907373;">)</span><span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
</pre>
</div>

<p>
This is a linear recursive process, which requires \(\Theta(n)\)
steps and \(\Theta(n)\) space. Just as with factorial, we can
readily formulate an equivalent linear iteration:
</p>

<div class="org-src-container">
<pre class="src src-scheme"><span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">exp</span> b n<span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span>expt-iter b n 1<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>

<span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">expt-iter</span> b counter product<span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span><span style="color: #a020f0;">if</span> <span style="color: #909183;">(</span>= counter 0<span style="color: #909183;">)</span>
        product
        <span style="color: #909183;">(</span>expt-iter b <span style="color: #709870;">(</span>- counter 1<span style="color: #709870;">)</span> <span style="color: #709870;">(</span>* b product<span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
</pre>
</div>

<p>
This version requires \(\Theta(n)\) steps and \(\Theta(1)\) space.
</p>

<p>
We can compute exponentials in fewer steps by using successive
squaring. For instance, rather than computing \(b^8\) as
</p>

<p>
\[b \cdot (b \cdot (b \cdot (b \cdot (b \cdot (b \cdot b)))))\]
</p>

<p>
we can compute it using three multiplication:
</p>

\begin{align}
b^2 & = b \cdot b, \\
b^4 & = b^2 \cdot b^2 \\
b^8 & = b^4 \cdot b^4 \\
\end{align}

<p>
So, we can use the rule:
</p>

\begin{align}
b^n & = (b^{n/2})^2 & \text{if $n$ is even}\\
b^n & = b \cdot b^{n-1} & \text{if $n$ is odd}
\end{align}

<p>
We can express this method as a procedure
</p>
<div class="org-src-container">
<pre class="src src-scheme"><span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">fast-expt</span> b n<span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span><span style="color: #a020f0;">cond</span> <span style="color: #909183;">(</span><span style="color: #709870;">(</span>= n 0<span style="color: #709870;">)</span> 1<span style="color: #909183;">)</span>
          <span style="color: #909183;">(</span><span style="color: #709870;">(</span>even? n<span style="color: #709870;">)</span> <span style="color: #709870;">(</span>square <span style="color: #907373;">(</span>fast-expt b <span style="color: #6276ba;">(</span>/ n 2<span style="color: #6276ba;">)</span><span style="color: #907373;">)</span><span style="color: #709870;">)</span><span style="color: #909183;">)</span>
          <span style="color: #909183;">(</span><span style="color: #a020f0;">else</span> <span style="color: #709870;">(</span>* b <span style="color: #907373;">(</span>fast-expt b <span style="color: #6276ba;">(</span>- n 1<span style="color: #6276ba;">)</span><span style="color: #907373;">)</span><span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>

<span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">even?</span> n<span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span>= <span style="color: #909183;">(</span>remainder n 2<span style="color: #909183;">)</span> 0<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
</pre>
</div>

<p>
The process has \(\Theta(\log n)\) growth. The difference
between \(\Theta(\log n)\) growth and \(\Theta(n)\) growth becomes striking as \(n\)
becomes large. For example, <i>fast-expt</i> for \(n = 1000\) requireds only 14 multiplication.
</p>
</div>
</div>

<div id="outline-container-org588cf30" class="outline-5">
<h5 id="org588cf30">Greatest Common Divisors</h5>
<div class="outline-text-5" id="text-org588cf30">
<p>
The greatest common divisor(GCD) of two integers \(a\)
and \(b\) is defined to be the largest integer that divides both
\(a\) and \(b\) with no remainder.
</p>

<p>
The idea of the algorithm is based on the observation that, if \(r\) is the
reminder when \(a\) is divided by \(b\), then the common
divisors of \(a\) and \(b\) are precisely the same as the
common divisors of \(b\) and \(r\). Thus, we can use the
equation
\[GCD(a,b) = GCD(b,r)\]
</p>

<p>
For example,
</p>

\begin{align}GCD(206,40) & = GCD(40,6) \\ & = GCD(6,4) \\ & = GCD(4,2) \\ & = GCD(2,0) \\ & = 2\end{align}


<p>
This method for computing the \(GCD\) is known as <b>Euclid's Algorithm</b>.
</p>

<div class="org-src-container">
<pre class="src src-scheme"><span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">gcd</span> a b<span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span><span style="color: #a020f0;">if</span> <span style="color: #909183;">(</span>= b 0<span style="color: #909183;">)</span>
        a
        <span style="color: #909183;">(</span>gcd b <span style="color: #709870;">(</span>remainder a b<span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
</pre>
</div>

<p>
And the order of growth is \(\Theta(\log n)\). You can get the proof in the page of 64.
</p>
</div>
</div>

<div id="outline-container-org0935e9e" class="outline-5">
<h5 id="org0935e9e">Example: Testing for primality</h5>
<div class="outline-text-5" id="text-org0935e9e">
<blockquote>
<p>
A primality test is an algorithm for determining whether an input
number is prime. -From Wikipedia
</p>
</blockquote>

<div class="org-src-container">
<pre class="src src-scheme"><span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">smallest-divisor</span> n<span style="color: #7388d6;">)</span> <span style="color: #7388d6;">(</span>find-divisor n 2<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>

<span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">find-divisor</span> n test-divisor<span style="color: #7388d6;">)</span>
        <span style="color: #7388d6;">(</span><span style="color: #a020f0;">cond</span> <span style="color: #909183;">(</span><span style="color: #709870;">(</span>&gt; <span style="color: #907373;">(</span>square test-divisor<span style="color: #907373;">)</span> n<span style="color: #709870;">)</span> n<span style="color: #909183;">)</span>
              <span style="color: #909183;">(</span><span style="color: #709870;">(</span>divides? test-divisor n<span style="color: #709870;">)</span> test-divisor<span style="color: #909183;">)</span>
              <span style="color: #909183;">(</span><span style="color: #a020f0;">else</span> <span style="color: #709870;">(</span>find-divisor n <span style="color: #907373;">(</span>+ test-divisor 1<span style="color: #907373;">)</span><span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>

<span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">divides?</span> a b<span style="color: #7388d6;">)</span> <span style="color: #7388d6;">(</span>= <span style="color: #909183;">(</span>remainder b a<span style="color: #909183;">)</span> 0<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>

<span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">prime?</span> n<span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span>= n <span style="color: #909183;">(</span>smallest-divisor n<span style="color: #909183;">)</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
</pre>
</div>

<p>
We can test whether a number is prime as follows: \(n\) is
prime if and only if \(n\) is its own smallest divisor.
</p>

<p>
The end test for <i>find-divisor</i> is based on the fact that if \(n\)
is not prime it must have a divisor less than or equal
to \(\sqrt n\). This means that the algorithm need only
test divisors between \(1\) and \(\sqrt n\). So the order of growth
is \(\Theta(\sqrt n)\).
</p>
</div>
</div>


<div id="outline-container-orge00c611" class="outline-5">
<h5 id="orge00c611">The <a href="https://en.wikipedia.org/wiki/Pierre_de_Fermat">Fermat</a> test</h5>
<div class="outline-text-5" id="text-orge00c611">
<p>
The \(\Theta(\log n)\) primality test is based on a result
from number theory known as <b>Fermat's Little Theorem</b>.
</p>

<blockquote>
<p>
<b>Fermat’s Little Theorem</b>: If \(n\) is a prime number and \(a\) is any
positive integer less than \(n\), then \(a\) raised to the \(n^{th}\) power is
congruent to \(a\) modulo \(n\).
</p>
</blockquote>

<p>
Given a number \(n\), pick a random number \(a < n\) and compute the
remainder of an modulo \(n\). If the result is not equal to \(a\), then \(n\)
is certainly not prime. If it is \(a\), then chances are good that \(n\)
is prime. Now pick another random number \(a\) and test it with the
same method. If it also satisfies the equation, then we can be
even more confident that \(n\) is prime. By trying more and more
values of \(a\), we can increase our confidence in the result. This
algorithm is known as the <b>Fermat test</b>.
</p>

<p>
The implement of the Fermat test, please see the page of 67.
</p>
</div>
</div>


<div id="outline-container-org5f242ee" class="outline-5">
<h5 id="org5f242ee">Probabilistic methods</h5>
<div class="outline-text-5" id="text-org5f242ee">
<p>
The Fermat test differs in character from most familiar algorithms,
in which one computes an answer that is guaranteed to be correct.
</p>

<p>
If you want see more detail about this section, you can look at the page of 69.
</p>
</div>
</div>
</div>

<div id="outline-container-org5f2cf7d" class="outline-4">
<h4 id="org5f2cf7d">Formulating Abstractions with Higher-Order Procedures</h4>
<div class="outline-text-4" id="text-org5f2cf7d">
<p>
Procedures that manipulate procedures are called higher-order procedures.
</p>

<p>
This section shows how higher-order procedures can serve as
powerful abstraction mechanisms, vastly increasing the expressive
power of our language.
</p>
</div>

<div id="outline-container-orgbf1c944" class="outline-5">
<h5 id="orgbf1c944">Procedures as Arguments \heart</h5>
<div class="outline-text-5" id="text-orgbf1c944">
<p>
This part list three procedures and you will find they have the same pattern.
</p>

<div class="org-src-container">
<pre class="src src-scheme"><span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">sum-integer</span> a b<span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span><span style="color: #a020f0;">if</span> <span style="color: #909183;">(</span>&gt; a b<span style="color: #909183;">)</span>
        0
        <span style="color: #909183;">(</span>+ a <span style="color: #709870;">(</span>sum-integer <span style="color: #907373;">(</span>+ a 1<span style="color: #907373;">)</span> b<span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
</pre>
</div>
<p>
And the second computes the sum of the cubes of the
integers in the given range.
</p>
<div class="org-src-container">
<pre class="src src-scheme"><span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">cube</span> x<span style="color: #7388d6;">)</span> <span style="color: #7388d6;">(</span>* x x x<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
<span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">sum-cubes</span> a b<span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span><span style="color: #a020f0;">if</span> <span style="color: #909183;">(</span>&gt; a b<span style="color: #909183;">)</span>
        0
        <span style="color: #909183;">(</span>+ <span style="color: #709870;">(</span>cube a<span style="color: #709870;">)</span> <span style="color: #709870;">(</span>sum-cubes <span style="color: #907373;">(</span>+ a 1<span style="color: #907373;">)</span> b<span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
</pre>
</div>

<p>
The third computes the sum of a sequence of terms in the series.
</p>

\begin{align}
\frac{1}{1 \cdot 3} + \frac{1}{5 \cdot 7} + \frac{1}{9 \cdot 11} + \cdots,
\end{align}

<p>
which converges to \(\pi/8\):
</p>
<div class="org-src-container">
<pre class="src src-scheme"><span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">pi-sum</span> a b<span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span><span style="color: #a020f0;">if</span> <span style="color: #909183;">(</span>&gt; a b<span style="color: #909183;">)</span>
        0
        <span style="color: #909183;">(</span>+ <span style="color: #709870;">(</span>/ 1.0 <span style="color: #907373;">(</span>* a <span style="color: #6276ba;">(</span>+ a 2<span style="color: #6276ba;">)</span><span style="color: #907373;">)</span><span style="color: #709870;">)</span>
           <span style="color: #709870;">(</span>pi-sum <span style="color: #907373;">(</span>+ a 4<span style="color: #907373;">)</span> b<span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
</pre>
</div>


<p>
Now, we could generate each of the procedures by filling in slots int the same template:
</p>
<div class="org-src-container">
<pre class="src src-scheme"><span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">&lt;name&gt;</span> a b<span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span><span style="color: #a020f0;">if</span> <span style="color: #909183;">(</span>&gt; a b<span style="color: #909183;">)</span>
        0
        <span style="color: #909183;">(</span>+ <span style="color: #709870;">(</span><span style="color: #228b22;">&lt;term&gt;</span> a<span style="color: #709870;">)</span>
           <span style="color: #709870;">(</span><span style="color: #228b22;">&lt;name&gt;</span> <span style="color: #907373;">(</span><span style="color: #228b22;">&lt;next&gt;</span> a<span style="color: #907373;">)</span> b<span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-scheme"><span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">sum</span> term a next b<span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span><span style="color: #a020f0;">if</span> <span style="color: #909183;">(</span>&gt; a b<span style="color: #909183;">)</span>
        0
        <span style="color: #909183;">(</span>+ <span style="color: #709870;">(</span>term a<span style="color: #709870;">)</span>
           <span style="color: #709870;">(</span>sum term <span style="color: #907373;">(</span>next a<span style="color: #907373;">)</span> next b<span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
</pre>
</div>

<p>
So, we can define the third one like this
</p>
<div class="org-src-container">
<pre class="src src-scheme"><span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">pi-sum</span> a b<span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span><span style="color: #a020f0;">define</span> <span style="color: #909183;">(</span><span style="color: #0000ff;">pi-term</span> x<span style="color: #909183;">)</span>
        <span style="color: #909183;">(</span>/ 1.0 <span style="color: #709870;">(</span>* x <span style="color: #907373;">(</span>+ x 2<span style="color: #907373;">)</span><span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span><span style="color: #a020f0;">define</span> <span style="color: #909183;">(</span><span style="color: #0000ff;">pi-next</span> x<span style="color: #909183;">)</span>
        <span style="color: #909183;">(</span>+ x 4<span style="color: #909183;">)</span><span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span>sum pi-term a pi-next b<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
</pre>
</div>

<p>
Using these procedures, we can compute &pi;.
</p>
<div class="org-src-container">
<pre class="src src-scheme"><span style="color: #707183;">(</span>* 8 <span style="color: #7388d6;">(</span>pi-sum 1 1000<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
</pre>
</div>

<p>
We can computer this with the procedure blow:
</p>


<div class="figure">
<p><img src="./imgs/20170609_094130_5319mIh.png" alt="20170609_094130_5319mIh.png" />
</p>
</div>

<div class="org-src-container">
<pre class="src src-scheme"><span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">integral</span> f a b dx<span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span><span style="color: #a020f0;">define</span> <span style="color: #909183;">(</span><span style="color: #0000ff;">add-dx</span> x<span style="color: #909183;">)</span>
        <span style="color: #909183;">(</span>+ x dx<span style="color: #909183;">)</span><span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span>* <span style="color: #909183;">(</span>sum f <span style="color: #709870;">(</span>+ a <span style="color: #907373;">(</span>/ dx 2.0<span style="color: #907373;">)</span><span style="color: #709870;">)</span> add-dx b<span style="color: #909183;">)</span>
       dx<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>

<span style="color: #707183;">(</span>integral cube 0 1 0.01<span style="color: #707183;">)</span>
<span style="color: #707183;">(</span>integral cube 0 1 0.001<span style="color: #707183;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org6018cfa" class="outline-5">
<h5 id="org6018cfa">Constructing Procedures Using lambda</h5>
<div class="outline-text-5" id="text-org6018cfa">
<p>
We can define a procedure without name. This is the
special form of <b>lambda</b>.
</p>

<div class="org-src-container">
<pre class="src src-scheme"><span style="color: #707183;">(</span><span style="color: #a020f0;">lambda</span> <span style="color: #7388d6;">(</span>x<span style="color: #7388d6;">)</span> <span style="color: #7388d6;">(</span>+ x 4<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>

<span style="color: #b22222;">;; </span><span style="color: #b22222;">using in pi sum</span>
<span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">pi-sum</span> a b<span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span>sum <span style="color: #909183;">(</span><span style="color: #a020f0;">lambda</span> <span style="color: #709870;">(</span>x<span style="color: #709870;">)</span> <span style="color: #709870;">(</span>/ 1.0 <span style="color: #907373;">(</span>* x <span style="color: #6276ba;">(</span>+ x 2<span style="color: #6276ba;">)</span><span style="color: #907373;">)</span><span style="color: #709870;">)</span><span style="color: #909183;">)</span>
         a
         <span style="color: #909183;">(</span><span style="color: #a020f0;">lambda</span> <span style="color: #709870;">(</span>x<span style="color: #709870;">)</span> <span style="color: #709870;">(</span>+ x 4<span style="color: #709870;">)</span><span style="color: #909183;">)</span>
         b<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
</pre>
</div>

<p>
<b>lambda</b> is used to create procedures in the same
way as define, except that no name is specified for the procedure:
</p>

<div class="org-src-container">
<pre class="src src-scheme"><span style="color: #707183;">(</span><span style="color: #a020f0;">lambda</span> <span style="color: #7388d6;">(</span><span style="color: #228b22;">&lt;formal-parameters&gt;</span><span style="color: #7388d6;">)</span> <span style="color: #228b22;">&lt;body&gt;</span><span style="color: #707183;">)</span>

<span style="color: #707183;">(</span><span style="color: #7388d6;">(</span><span style="color: #a020f0;">lambda</span> <span style="color: #909183;">(</span>x y z<span style="color: #909183;">)</span> <span style="color: #909183;">(</span>+ x y <span style="color: #709870;">(</span>square z<span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388d6;">)</span>
 1 2 3<span style="color: #707183;">)</span>
</pre>
</div>
</div>
</div>


<div id="outline-container-orgd4b6654" class="outline-5">
<h5 id="orgd4b6654">using <b>let</b> to create local variables</h5>
<div class="outline-text-5" id="text-orgd4b6654">
<p>
Suppose we wish to compute the function:
</p>

\begin{align}
f(x,y)=x(1+xy)^2 +y(1−y)+(1+xy)(1−y),
\end{align}

<p>
which we could also express as
</p>
\begin{align}
a & = 1 + xy,\\
b & = 1 - y,\\
f(x,y) & = xa^2 + yb + ab.
\end{align}

<p>
The version one procedure is:
</p>
<div class="org-src-container">
<pre class="src src-scheme"><span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">f</span> x y<span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span><span style="color: #a020f0;">define</span> <span style="color: #909183;">(</span><span style="color: #0000ff;">f-helper</span> a b<span style="color: #909183;">)</span>
        <span style="color: #909183;">(</span>+ <span style="color: #709870;">(</span>* x <span style="color: #907373;">(</span>square a<span style="color: #907373;">)</span><span style="color: #709870;">)</span>
           <span style="color: #709870;">(</span>* y b<span style="color: #709870;">)</span>
           <span style="color: #709870;">(</span>* a b<span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388d6;">)</span>
      <span style="color: #7388d6;">(</span>f-helper <span style="color: #909183;">(</span>+ 1 <span style="color: #709870;">(</span>* x y<span style="color: #709870;">)</span><span style="color: #909183;">)</span>
    <span style="color: #909183;">(</span>- 1 y<span style="color: #909183;">)</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
</pre>
</div>

<p>
The verson two procedure with lambda is:
</p>
<div class="org-src-container">
<pre class="src src-scheme"><span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">f</span> x y<span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span><span style="color: #909183;">(</span><span style="color: #a020f0;">lambda</span> <span style="color: #709870;">(</span>a b<span style="color: #709870;">)</span>
        <span style="color: #709870;">(</span>+ <span style="color: #907373;">(</span>* x <span style="color: #6276ba;">(</span>square a<span style="color: #6276ba;">)</span><span style="color: #907373;">)</span>
           <span style="color: #907373;">(</span>* y b<span style="color: #907373;">)</span>
           <span style="color: #907373;">(</span>* a b<span style="color: #907373;">)</span><span style="color: #709870;">)</span><span style="color: #909183;">)</span>
     <span style="color: #909183;">(</span>+ 1 <span style="color: #709870;">(</span>* x y<span style="color: #709870;">)</span><span style="color: #909183;">)</span>
     <span style="color: #909183;">(</span>- 1 y<span style="color: #909183;">)</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
</pre>
</div>

<p>
And the version three using <b>let</b> is:
</p>
<div class="org-src-container">
<pre class="src src-scheme"><span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">f</span> x y<span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span><span style="color: #a020f0;">let</span> <span style="color: #909183;">(</span><span style="color: #709870;">(</span>a <span style="color: #907373;">(</span>+ 1 <span style="color: #6276ba;">(</span>* x y<span style="color: #6276ba;">)</span><span style="color: #907373;">)</span><span style="color: #709870;">)</span>
            <span style="color: #709870;">(</span>b <span style="color: #907373;">(</span>- 1 y<span style="color: #907373;">)</span><span style="color: #709870;">)</span><span style="color: #909183;">)</span>
        <span style="color: #909183;">(</span>+ <span style="color: #709870;">(</span>* x <span style="color: #907373;">(</span>square a<span style="color: #907373;">)</span><span style="color: #709870;">)</span>
           <span style="color: #709870;">(</span>* y b<span style="color: #709870;">)</span>
           <span style="color: #709870;">(</span>* a b<span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
</pre>
</div>

<p>
A <b>let</b> expression is simply syntactic sugar for the
underlying <b>lambda</b> application.
</p>
</div>
</div>


<div id="outline-container-org5773aca" class="outline-5">
<h5 id="org5773aca">Procedures as General Methods</h5>
<div class="outline-text-5" id="text-org5773aca">
<p>
In this section, we'll discuss two more elaborate examples.
One is general methods for finding zeros, and another is fixed points of functions.
</p>
</div>


<ul class="org-ul"><li><a id="orgaab95db"></a>Finding roots of equations by the half-interval method.<br /></li>

<li><a id="orgb65e616"></a>Finding fixed points of functions<br /><div class="outline-text-6" id="text-orgb65e616">
<p>
A number \(x\) is called a fixed point of a function f if \(x\) satisfies the equation \(f (x) = x\).
</p>

<p>
For some functions f we can locate a fixed point by beginning with an initial guess and applying f repeatedly,
</p>
\begin{align}
f(x), f(f(x)), f(f(f(x))), \cdots,
\end{align}

<p>
(If you want learn more about fixed point, please visit <a href="https://en.wikipedia.org/wiki/Fixed_point_(mathematics)">here</a>.)
</p>

<p>
We can use this to compute \sqrt, but I can't understand this. <a href="https://briangordon.github.io/2014/06/sqrts-and-fixed-points.html">here</a>
</p>

<p>
\(\sqrt x\) is a fixed-point of the function \(y = x / y\).
</p>
</div></li></ul>
</div>
<div id="outline-container-orgd3e6323" class="outline-5">
<h5 id="orgd3e6323">Procedures as Returned Values</h5>
<div class="outline-text-5" id="text-orgd3e6323">
<div class="org-src-container">
<pre class="src src-scheme"><span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">average-damp</span> f<span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span><span style="color: #a020f0;">lambda</span> <span style="color: #909183;">(</span>x<span style="color: #909183;">)</span> <span style="color: #909183;">(</span>average x <span style="color: #709870;">(</span>f x<span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>

<span style="color: #707183;">(</span><span style="color: #7388d6;">(</span>average-damp square<span style="color: #7388d6;">)</span> 10<span style="color: #707183;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org1a0509c" class="outline-5">
<h5 id="org1a0509c">Newton's method</h5>
<div class="outline-text-5" id="text-org1a0509c">
<p>
Read later. This part is very interesting.
</p>
</div>
<ul class="org-ul"><li><a id="org669daa2"></a>Abstractions and first-class procedures<br /><div class="outline-text-6" id="text-org669daa2">
<p>
Some of the “rights and privileges” of first-class elements are:
</p>
<ul class="org-ul">
<li>They may be named by variables.</li>
<li>They may be passed as arguments to procedures.</li>
<li>They may be returned as the results of procedures.</li>
<li>They may be included in data structures.</li>
</ul>
</div></li></ul>
</div>
</div>
</div>

<div id="outline-container-orgb96bbc7" class="outline-3">
<h3 id="orgb96bbc7">Chapter 2 Building Abstractions with Data</h3>
<div class="outline-text-3" id="text-orgb96bbc7">
</div><div id="outline-container-org3200fd3" class="outline-4">
<h4 id="org3200fd3">Introduction to Data Abstraction</h4>
<div class="outline-text-4" id="text-org3200fd3">
</div><div id="outline-container-org490eab5" class="outline-5">
<h5 id="org490eab5">Example: Arithmetic Operations for Rational Numbers</h5>
<div class="outline-text-5" id="text-org490eab5">

<div class="figure">
<p><img src="./imgs/20170615_142951_55502L2y.png" alt="20170615_142951_55502L2y.png" />
</p>
</div>


<div class="org-src-container">
<pre class="src src-scheme"><span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">add-rat</span> x y<span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span>make-rat <span style="color: #909183;">(</span>+ <span style="color: #709870;">(</span>* <span style="color: #907373;">(</span>numer x<span style="color: #907373;">)</span> <span style="color: #907373;">(</span>denom y<span style="color: #907373;">)</span><span style="color: #709870;">)</span>
                 <span style="color: #709870;">(</span>* <span style="color: #907373;">(</span>numer y<span style="color: #907373;">)</span> <span style="color: #907373;">(</span>denom x<span style="color: #907373;">)</span><span style="color: #709870;">)</span><span style="color: #909183;">)</span>
              <span style="color: #909183;">(</span>* <span style="color: #709870;">(</span>denom x<span style="color: #709870;">)</span> <span style="color: #709870;">(</span>denom y<span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>

<span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">sub-rat</span> x y<span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span>make-rat <span style="color: #909183;">(</span>- <span style="color: #709870;">(</span>* <span style="color: #907373;">(</span>numer x<span style="color: #907373;">)</span> <span style="color: #907373;">(</span>denom y<span style="color: #907373;">)</span><span style="color: #709870;">)</span>
                       <span style="color: #709870;">(</span>* <span style="color: #907373;">(</span>numer y<span style="color: #907373;">)</span> <span style="color: #907373;">(</span>denom x<span style="color: #907373;">)</span><span style="color: #709870;">)</span><span style="color: #909183;">)</span>
                    <span style="color: #909183;">(</span>* <span style="color: #709870;">(</span>denom x<span style="color: #709870;">)</span> <span style="color: #709870;">(</span>denom y<span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
<span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">mul-rat</span> x y<span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span>make-rat <span style="color: #909183;">(</span>* <span style="color: #709870;">(</span>numer x<span style="color: #709870;">)</span> <span style="color: #709870;">(</span>numer y<span style="color: #709870;">)</span><span style="color: #909183;">)</span>
    <span style="color: #909183;">(</span>* <span style="color: #709870;">(</span>denom x<span style="color: #709870;">)</span> <span style="color: #709870;">(</span>denom y<span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span> <span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">div-rat</span> x y<span style="color: #7388d6;">)</span>
      <span style="color: #7388d6;">(</span>make-rat <span style="color: #909183;">(</span>* <span style="color: #709870;">(</span>numer x<span style="color: #709870;">)</span> <span style="color: #709870;">(</span>denom y<span style="color: #709870;">)</span><span style="color: #909183;">)</span>
                <span style="color: #909183;">(</span>* <span style="color: #709870;">(</span>denom x<span style="color: #709870;">)</span> <span style="color: #709870;">(</span>numer y<span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>

<span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">equal-rat?</span> x y<span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span>= <span style="color: #909183;">(</span>* <span style="color: #709870;">(</span>numer x<span style="color: #709870;">)</span> <span style="color: #709870;">(</span>denom y<span style="color: #709870;">)</span><span style="color: #909183;">)</span>
         <span style="color: #909183;">(</span>* <span style="color: #709870;">(</span>numer y<span style="color: #709870;">)</span> <span style="color: #709870;">(</span>denom x<span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orge93d5e2" class="outline-5">
<h5 id="orge93d5e2">Pairs</h5>
<div class="outline-text-5" id="text-orge93d5e2">
<p>
Data objects constructed from pairs are called list-structured data.
</p>

<div class="org-src-container">
<pre class="src src-scheme"><span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #0000ff;">x</span> <span style="color: #7388d6;">(</span>cons 1 2<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
<span style="color: #707183;">(</span>car x<span style="color: #707183;">)</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">1</span>
<span style="color: #707183;">(</span>cdr x<span style="color: #707183;">)</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">2</span>

<span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #0000ff;">x</span> <span style="color: #7388d6;">(</span>cons 1 2<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
<span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #0000ff;">y</span> <span style="color: #7388d6;">(</span>cons 3 4<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
<span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #0000ff;">z</span> <span style="color: #7388d6;">(</span>cons x y<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
<span style="color: #707183;">(</span>car <span style="color: #7388d6;">(</span>car z<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
1
<span style="color: #707183;">(</span>car <span style="color: #7388d6;">(</span>cdr z<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span> 3
</pre>
</div>
</div>
</div>
<div id="outline-container-org67df884" class="outline-5">
<h5 id="org67df884">Representing rational numbers</h5>
<div class="outline-text-5" id="text-org67df884">
<div class="org-src-container">
<pre class="src src-scheme"><span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">make-rat</span> n d<span style="color: #7388d6;">)</span> <span style="color: #7388d6;">(</span>cons n d<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
<span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">numer</span> x<span style="color: #7388d6;">)</span> <span style="color: #7388d6;">(</span>car x<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
<span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">denom</span> x<span style="color: #7388d6;">)</span> <span style="color: #7388d6;">(</span>cdr x<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>

<span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">print-rat</span> x<span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span>newline<span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span>display <span style="color: #909183;">(</span>numer x<span style="color: #909183;">)</span><span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span>display <span style="color: #8b2252;">"/"</span><span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span>display <span style="color: #909183;">(</span>denom x<span style="color: #909183;">)</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>

<span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #0000ff;">one-half</span> <span style="color: #7388d6;">(</span>make-rat 1 2<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
<span style="color: #707183;">(</span>print-rat one-half<span style="color: #707183;">)</span>

<span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #0000ff;">one-third</span> <span style="color: #7388d6;">(</span>make-rat 1 3<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
<span style="color: #707183;">(</span>print-rat <span style="color: #7388d6;">(</span>add-rat one-half one-third<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
</pre>
</div>
<p>
As the final example shows, our rational-number implementation does not reduce rational numbers to lowest terms. We can remedy this by changing make-rat.
</p>

<p>
In this place, we can use <b>gcd</b> to solve this problem.
</p>

<div class="org-src-container">
<pre class="src src-scheme">The gcd function don't need to compare which one is bigger.

<span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">gcd</span> a b<span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span><span style="color: #a020f0;">if</span> <span style="color: #909183;">(</span>= b 0<span style="color: #909183;">)</span>
        a
        <span style="color: #909183;">(</span>gcd b <span style="color: #709870;">(</span>remainder a b<span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388d6;">)</span>

<span style="color: #7388d6;">(</span><span style="color: #a020f0;">define</span> <span style="color: #909183;">(</span><span style="color: #0000ff;">make-rat</span> n d<span style="color: #909183;">)</span>
    <span style="color: #909183;">(</span><span style="color: #a020f0;">let</span> <span style="color: #709870;">(</span><span style="color: #907373;">(</span>g <span style="color: #6276ba;">(</span>gcd n d<span style="color: #6276ba;">)</span><span style="color: #907373;">)</span><span style="color: #709870;">)</span>
        <span style="color: #709870;">(</span>cons <span style="color: #907373;">(</span>/ n g<span style="color: #907373;">)</span> <span style="color: #907373;">(</span>/ d g<span style="color: #907373;">)</span><span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388d6;">)</span>

<span style="color: #7388d6;">(</span>print-rat <span style="color: #909183;">(</span>add-rat one-third one-third<span style="color: #909183;">)</span><span style="color: #7388d6;">)</span>

<span style="color: #b22222;">;; </span><span style="color: #b22222;">now we have 2/3</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orgfa55092" class="outline-5">
<h5 id="orgfa55092">What Is Meant by Data?</h5>
<div class="outline-text-5" id="text-orgfa55092">
<p>
This point is illustrated strikingly by the fact that we could implement cons, car, and cdr without using any data structures at all but only using procedures. Here are the definitions:
</p>

<div class="org-src-container">
<pre class="src src-scheme"><span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">cons</span> x y<span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span><span style="color: #a020f0;">define</span> <span style="color: #909183;">(</span><span style="color: #0000ff;">dispatch</span> m<span style="color: #909183;">)</span>
        <span style="color: #909183;">(</span><span style="color: #a020f0;">cond</span> <span style="color: #709870;">(</span><span style="color: #907373;">(</span>= m 0<span style="color: #907373;">)</span> x<span style="color: #709870;">)</span>
        <span style="color: #709870;">(</span><span style="color: #907373;">(</span>= m 1<span style="color: #907373;">)</span> y<span style="color: #709870;">)</span>
        <span style="color: #709870;">(</span><span style="color: #a020f0;">else</span> <span style="color: #907373;">(</span>error <span style="color: #8b2252;">"Argument not 0 or 1: CONS"</span> m<span style="color: #907373;">)</span><span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388d6;">)</span>
    dispatch<span style="color: #707183;">)</span>

<span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">car</span> z<span style="color: #7388d6;">)</span> <span style="color: #7388d6;">(</span>z 0<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
<span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">cdr</span> z<span style="color: #7388d6;">)</span> <span style="color: #7388d6;">(</span>z 1<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org5303ee4" class="outline-5">
<h5 id="org5303ee4"><span class="todo TODO">TODO</span> Extended Exercise: Interval Arithmetic</h5>
</div>
</div>
<div id="outline-container-org6787b1b" class="outline-4">
<h4 id="org6787b1b">Hierarchical Data and the Closure Property</h4>
<div class="outline-text-4" id="text-org6787b1b">

<div class="figure">
<p><img src="./imgs/20170615_191542_555029_B.png" alt="20170615_191542_555029_B.png" />
</p>
</div>
</div>
<div id="outline-container-org820b61f" class="outline-5">
<h5 id="org820b61f">Representing Sequences</h5>
<div class="outline-text-5" id="text-org820b61f">

<div class="figure">
<p><img src="./imgs/20170615_192242_55502KKI.png" alt="20170615_192242_55502KKI.png" />
</p>
</div>


<div class="org-src-container">
<pre class="src src-scheme"><span style="color: #707183;">(</span>cons 1
  <span style="color: #7388d6;">(</span>cons 2
        <span style="color: #909183;">(</span>cons 3
              <span style="color: #709870;">(</span>cons 4 nil<span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
</pre>
</div>

<p>
Such a sequence of pairs, formed by nested conses, is called a list,
</p>

<p>
Scheme provides a primitive called list to help in constructing lists.
The above sequence could be produced by (list 1 2 3 4). In general,
</p>

<div class="org-src-container">
<pre class="src src-scheme"><span style="color: #707183;">(</span>list <span style="color: #7388d6;">&#10216;</span>a1<span style="color: #7388d6;">&#10217;</span> <span style="color: #7388d6;">&#10216;</span>a2<span style="color: #7388d6;">&#10217;</span> . . . <span style="color: #7388d6;">&#10216;</span>an<span style="color: #7388d6;">&#10217;</span><span style="color: #707183;">)</span>
</pre>
</div>

<p>
is equivalent to
</p>
<div class="org-src-container">
<pre class="src src-scheme"><span style="color: #707183;">(</span>cons <span style="color: #7388d6;">&#10216;</span>a1<span style="color: #7388d6;">&#10217;</span>
    <span style="color: #7388d6;">(</span>cons <span style="color: #909183;">&#10216;</span>a2<span style="color: #909183;">&#10217;</span>
        <span style="color: #909183;">(</span>cons . . .
            <span style="color: #709870;">(</span>cons <span style="color: #907373;">&#10216;</span>an<span style="color: #907373;">&#10217;</span>
                nil<span style="color: #709870;">)</span>. . .<span style="color: #909183;">)</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
</pre>
</div>

<p>
Be careful not to confuse the expression (list 1 2 3 4) with the list (1 2 3 4), which is the result obtained when the expression is evaluated.
</p>

<div class="org-src-container">
<pre class="src src-scheme"><span style="color: #707183;">(</span>cons 10 one-through-four<span style="color: #707183;">)</span>
<span style="color: #707183;">(</span>10 1 2 3 4<span style="color: #707183;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org5331bc7" class="outline-5">
<h5 id="org5331bc7">List operations</h5>
<div class="outline-text-5" id="text-org5331bc7">
<p>
The procedure <b>list-ref</b> takes as arguments a list and a
number <b>n</b> and returen the \(n^{th}\) item of the list.
</p>

<div class="org-src-container">
<pre class="src src-scheme"><span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">list-ref</span> items n<span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span><span style="color: #a020f0;">if</span> <span style="color: #909183;">(</span>= n 0<span style="color: #909183;">)</span>
        <span style="color: #909183;">(</span>car items<span style="color: #909183;">)</span>
        <span style="color: #909183;">(</span>list-ref <span style="color: #709870;">(</span>cdr items<span style="color: #709870;">)</span> <span style="color: #709870;">(</span>- n 1<span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>

<span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #0000ff;">squares</span> <span style="color: #7388d6;">(</span>list 1 4 9 16 25<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>

<span style="color: #707183;">(</span>list-ref squares 3<span style="color: #707183;">)</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-scheme"><span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">length</span> items<span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span><span style="color: #a020f0;">if</span> <span style="color: #909183;">(</span>null? items<span style="color: #909183;">)</span>
        0
        <span style="color: #909183;">(</span>+ 1 <span style="color: #709870;">(</span>length <span style="color: #907373;">(</span>cdr items<span style="color: #907373;">)</span><span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>

<span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #0000ff;">odds</span> <span style="color: #7388d6;">(</span>list 1 3 5<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>

<span style="color: #707183;">(</span>length odds<span style="color: #707183;">)</span>
</pre>
</div>

<p>
We also can compute <b>length</b> in an iterative style:
</p>
<div class="org-src-container">
<pre class="src src-scheme"><span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">length</span> items<span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span><span style="color: #a020f0;">define</span> <span style="color: #909183;">(</span><span style="color: #0000ff;">length-iter</span> a count<span style="color: #909183;">)</span>
        <span style="color: #909183;">(</span><span style="color: #a020f0;">if</span> <span style="color: #709870;">(</span>null? a<span style="color: #709870;">)</span>
            count
            <span style="color: #709870;">(</span>length-iter <span style="color: #907373;">(</span>cdr a<span style="color: #907373;">)</span> <span style="color: #907373;">(</span>+ 1 count<span style="color: #907373;">)</span><span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span>length-iter items 0<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-scheme"><span style="color: #707183;">(</span>append squares odds<span style="color: #707183;">)</span>
<span style="color: #707183;">(</span>1 4 9 16 25 1 3 5 7<span style="color: #707183;">)</span>
</pre>
</div>

<p>
<b>append</b> is also implemented using a recursive plan.
</p>

<div class="org-src-container">
<pre class="src src-scheme"><span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">append</span> list1 list2<span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span><span style="color: #a020f0;">if</span> <span style="color: #909183;">(</span>null? list1<span style="color: #909183;">)</span>
        list2
        <span style="color: #909183;">(</span>cons <span style="color: #709870;">(</span>car list1<span style="color: #709870;">)</span> <span style="color: #709870;">(</span>append <span style="color: #907373;">(</span>cdr list1<span style="color: #907373;">)</span> list2<span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org18ee4d3" class="outline-5">
<h5 id="org18ee4d3">Mapping over lists</h5>
<div class="outline-text-5" id="text-org18ee4d3">
<p>
For instance, the following procedure scales each number in a list by a given factor:
</p>
<div class="org-src-container">
<pre class="src src-scheme"><span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">scale-list</span> items factor<span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span><span style="color: #a020f0;">if</span> <span style="color: #909183;">(</span>null? items<span style="color: #909183;">)</span>
        nil
        <span style="color: #909183;">(</span>cons <span style="color: #709870;">(</span>* <span style="color: #907373;">(</span>car items<span style="color: #907373;">)</span> factor<span style="color: #709870;">)</span>
              <span style="color: #709870;">(</span>scale-list <span style="color: #907373;">(</span>cdr items<span style="color: #907373;">)</span> factor<span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
</pre>
</div>

<p>
We can abstract this general idea and capture it as
a common pattern expressed as a higher-order procedure.
</p>

<div class="org-src-container">
<pre class="src src-scheme"><span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">map</span> proc items<span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span><span style="color: #a020f0;">if</span> <span style="color: #909183;">(</span>null? items<span style="color: #909183;">)</span>
        nil
        <span style="color: #909183;">(</span>cons <span style="color: #709870;">(</span>proc <span style="color: #907373;">(</span>car items<span style="color: #907373;">)</span>
              <span style="color: #907373;">(</span><span style="color: #a020f0;">map</span> proc <span style="color: #6276ba;">(</span>cdr items<span style="color: #6276ba;">)</span><span style="color: #907373;">)</span><span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>

<span style="color: #707183;">(</span><span style="color: #a020f0;">map</span> abs <span style="color: #7388d6;">(</span>list -10 2.5 -11.6<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>

<span style="color: #707183;">(</span><span style="color: #a020f0;">map</span> <span style="color: #7388d6;">(</span><span style="color: #a020f0;">lambda</span> <span style="color: #909183;">(</span>x<span style="color: #909183;">)</span> <span style="color: #909183;">(</span>* x x<span style="color: #909183;">)</span><span style="color: #7388d6;">)</span> <span style="color: #7388d6;">(</span>list 1 2 3 4<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orgb84ba59" class="outline-5">
<h5 id="orgb84ba59">Hierarchical Structures</h5>
<div class="outline-text-5" id="text-orgb84ba59">

<div class="figure">
<p><img src="./imgs/20170616_110339_66786ZXz.png" alt="20170616_110339_66786ZXz.png" />
</p>
<p><span class="figure-number">Figure 12: </span>Structure formed by (cons (list 1 2) (list 3 4)).</p>
</div>

<p>
Another way to think of sequences whose elements are sequences is as trees.
</p>


<div class="figure">
<p><img src="./imgs/20170616_110544_66786LhC.png" alt="20170616_110544_66786LhC.png" />
</p>
</div>

<div class="org-src-container">
<pre class="src src-scheme"><span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #0000ff;">x</span> <span style="color: #7388d6;">(</span>cons <span style="color: #909183;">(</span>list 1 2<span style="color: #909183;">)</span> <span style="color: #909183;">(</span>list 3 4<span style="color: #909183;">)</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
<span style="color: #707183;">(</span>length x<span style="color: #707183;">)</span>
3
<span style="color: #707183;">(</span>count-leaves x<span style="color: #707183;">)</span>
4
<span style="color: #707183;">(</span>list x x<span style="color: #707183;">)</span>
<span style="color: #707183;">(</span><span style="color: #7388d6;">(</span><span style="color: #909183;">(</span>1 2<span style="color: #909183;">)</span> 3 4<span style="color: #7388d6;">)</span> <span style="color: #7388d6;">(</span><span style="color: #909183;">(</span>1 2<span style="color: #909183;">)</span> 3 4<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-scheme"><span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">count-leaves</span> x<span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span><span style="color: #a020f0;">cond</span> <span style="color: #909183;">(</span><span style="color: #709870;">(</span>null? x<span style="color: #709870;">)</span> 0<span style="color: #909183;">)</span>
          <span style="color: #909183;">(</span><span style="color: #709870;">(</span>not <span style="color: #907373;">(</span>pair? x<span style="color: #907373;">)</span><span style="color: #709870;">)</span> 1<span style="color: #909183;">)</span>
          <span style="color: #909183;">(</span><span style="color: #a020f0;">else</span> <span style="color: #709870;">(</span>+ <span style="color: #907373;">(</span>count-leaves <span style="color: #6276ba;">(</span>car x<span style="color: #6276ba;">)</span><span style="color: #907373;">)</span>
                   <span style="color: #907373;">(</span>count-leaves <span style="color: #6276ba;">(</span>cdr x<span style="color: #6276ba;">)</span><span style="color: #907373;">)</span><span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
</pre>
</div>

<p>
Scheme provides the primitive predicate <b>pair?</b>, which tests whether its argument is a pair.
</p>
</div>
</div>
<div id="outline-container-org3f85f08" class="outline-5">
<h5 id="org3f85f08">Mapping over trees</h5>
<div class="outline-text-5" id="text-org3f85f08">
<div class="org-src-container">
<pre class="src src-scheme"><span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">scale-tree</span> tree factor<span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span><span style="color: #a020f0;">cond</span> <span style="color: #909183;">(</span><span style="color: #709870;">(</span>null? tree<span style="color: #709870;">)</span> nil<span style="color: #909183;">)</span>
          <span style="color: #909183;">(</span><span style="color: #709870;">(</span>not <span style="color: #907373;">(</span>pair? tree<span style="color: #907373;">)</span><span style="color: #709870;">)</span> <span style="color: #709870;">(</span>* tree factor<span style="color: #709870;">)</span><span style="color: #909183;">)</span>
          <span style="color: #909183;">(</span><span style="color: #a020f0;">else</span> <span style="color: #709870;">(</span>cons <span style="color: #907373;">(</span>scale-tree <span style="color: #6276ba;">(</span>car tree<span style="color: #6276ba;">)</span> factor<span style="color: #907373;">)</span>
                      <span style="color: #907373;">(</span>scale-tree <span style="color: #6276ba;">(</span>cdr tree<span style="color: #6276ba;">)</span> factor<span style="color: #907373;">)</span><span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
</pre>
</div>

<p>
Another way is using map:
</p>
<div class="org-src-container">
<pre class="src src-scheme"><span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">scale-tree</span> tree factor<span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span><span style="color: #a020f0;">map</span> <span style="color: #909183;">(</span><span style="color: #a020f0;">lambda</span> <span style="color: #709870;">(</span>sub-tree<span style="color: #709870;">)</span>
            <span style="color: #709870;">(</span><span style="color: #a020f0;">if</span> <span style="color: #907373;">(</span>pair? subtree<span style="color: #907373;">)</span>
                <span style="color: #907373;">(</span>scale-tree subtree factor<span style="color: #907373;">)</span>
                * sub-tree factor<span style="color: #709870;">)</span><span style="color: #909183;">)</span>
         map<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orgb2fd55b" class="outline-5">
<h5 id="orgb2fd55b">Sequences as Conventional Interfaces &check;</h5>
<div class="outline-text-5" id="text-orgb2fd55b">
<div class="org-src-container">
<pre class="src src-scheme"><span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">even-fibs</span> n<span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span><span style="color: #a020f0;">define</span> <span style="color: #909183;">(</span><span style="color: #0000ff;">next</span> k<span style="color: #909183;">)</span>
        <span style="color: #909183;">(</span><span style="color: #a020f0;">if</span> <span style="color: #709870;">(</span>&gt; k n<span style="color: #709870;">)</span>
            nil
            <span style="color: #709870;">(</span><span style="color: #a020f0;">let</span> <span style="color: #907373;">(</span><span style="color: #6276ba;">(</span>f <span style="color: #858580;">(</span>fib k<span style="color: #858580;">)</span><span style="color: #6276ba;">)</span><span style="color: #907373;">)</span>
                <span style="color: #907373;">(</span><span style="color: #a020f0;">if</span> <span style="color: #6276ba;">(</span>even? f<span style="color: #6276ba;">)</span>
                    <span style="color: #6276ba;">(</span>cons f <span style="color: #858580;">(</span>next <span style="color: #80a880;">(</span>+ k 1<span style="color: #80a880;">)</span><span style="color: #858580;">)</span><span style="color: #6276ba;">)</span>
                    <span style="color: #6276ba;">(</span>next <span style="color: #858580;">(</span>+ k 1<span style="color: #858580;">)</span><span style="color: #6276ba;">)</span><span style="color: #907373;">)</span><span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span>next 0<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
</pre>
</div>

<p>
Filtering a sequence to select only those elements that satisfy a given predicate is accomplished by
</p>

<div class="org-src-container">
<pre class="src src-scheme"><span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">filter</span> predicate sequence<span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span><span style="color: #a020f0;">cond</span> <span style="color: #909183;">(</span><span style="color: #709870;">(</span>null? sequence<span style="color: #709870;">)</span> nil<span style="color: #909183;">)</span>
          <span style="color: #909183;">(</span><span style="color: #709870;">(</span>predicate <span style="color: #907373;">(</span>car sequence<span style="color: #907373;">)</span><span style="color: #709870;">)</span>
            <span style="color: #709870;">(</span>cons <span style="color: #907373;">(</span>car sequence<span style="color: #907373;">)</span>
                <span style="color: #907373;">(</span>filter predicate <span style="color: #6276ba;">(</span>cdr sequence<span style="color: #6276ba;">)</span><span style="color: #907373;">)</span><span style="color: #709870;">)</span><span style="color: #909183;">)</span>
          <span style="color: #909183;">(</span><span style="color: #a020f0;">else</span> <span style="color: #709870;">(</span>filter predicate <span style="color: #907373;">(</span>cdr sequence<span style="color: #907373;">)</span><span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
</pre>
</div>

<p>
For example,
</p>
<pre class="example">
(filter odd? (list 1 2 3 4 5))
(1 3 5)
</pre>

<p>
Accumulations can be implemented by
</p>
<div class="org-src-container">
<pre class="src src-scheme"><span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">accumulate</span> op initial sequence<span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span><span style="color: #a020f0;">if</span> <span style="color: #909183;">(</span>null? sequence<span style="color: #909183;">)</span>
      initial
      <span style="color: #909183;">(</span>op <span style="color: #709870;">(</span>car sequence<span style="color: #709870;">)</span>
          <span style="color: #709870;">(</span>accumulate op initial <span style="color: #907373;">(</span>cdr sequence<span style="color: #907373;">)</span><span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org31f93bd" class="outline-5">
<h5 id="org31f93bd">Nested Mappings</h5>
<div class="outline-text-5" id="text-org31f93bd">
<div class="org-src-container">
<pre class="src src-scheme"><span style="color: #707183;">(</span>accumulate
    append nil <span style="color: #7388d6;">(</span><span style="color: #a020f0;">map</span> <span style="color: #909183;">(</span><span style="color: #a020f0;">lambda</span> <span style="color: #709870;">(</span>i<span style="color: #709870;">)</span>
                    <span style="color: #709870;">(</span><span style="color: #a020f0;">map</span> <span style="color: #907373;">(</span><span style="color: #a020f0;">lambda</span> <span style="color: #6276ba;">(</span>j<span style="color: #6276ba;">)</span> <span style="color: #6276ba;">(</span>list i j<span style="color: #6276ba;">)</span><span style="color: #907373;">)</span>
                        <span style="color: #907373;">(</span>enumerate-interval 1 <span style="color: #6276ba;">(</span>- i 1<span style="color: #6276ba;">)</span><span style="color: #907373;">)</span><span style="color: #709870;">)</span><span style="color: #909183;">)</span>
                 <span style="color: #909183;">(</span>enumerate-interval 1 n<span style="color: #909183;">)</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orgf1bc8f6" class="outline-5">
<h5 id="orgf1bc8f6">Example: A Picture Language</h5>
</div>
</div>
</div>
</div>

<div id="outline-container-org42e00c6" class="outline-2">
<h2 id="org42e00c6">练习答案</h2>
<div class="outline-text-2" id="text-org42e00c6">
</div><div id="outline-container-orgab99062" class="outline-3">
<h3 id="orgab99062">Chapter 1</h3>
<div class="outline-text-3" id="text-orgab99062">
</div><div id="outline-container-org74f3638" class="outline-4">
<h4 id="org74f3638">Exercise 1.1 p26</h4>
<div class="outline-text-4" id="text-org74f3638">
<div class="org-src-container">
<pre class="src src-scheme">10
<span style="color: #707183;">(</span>+ 5 3 4<span style="color: #707183;">)</span> ===&gt; 12
<span style="color: #707183;">(</span>- 9 1<span style="color: #707183;">)</span> ===&gt; 8
3
6
nothing for <span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #0000ff;">a</span> 3<span style="color: #707183;">)</span>
nothing
19
#f for a is 3 and b is 4, so they are not equal, return false
4
16
6
16
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc00ae39" class="outline-4">
<h4 id="orgc00ae39">Exercise 1.2</h4>
<div class="outline-text-4" id="text-orgc00ae39">
<p>
I don't sure how to handle \(4/5\), need decimal?
The answer will be 0, if 4 or 5 is an integer.
</p>
<div class="org-src-container">
<pre class="src src-scheme"><span style="color: #707183;">(</span>/ <span style="color: #7388d6;">(</span>+ 5 4 <span style="color: #909183;">(</span>- 2 <span style="color: #709870;">(</span>- 3 <span style="color: #907373;">(</span>+ 6 <span style="color: #6276ba;">(</span>/ 4 5<span style="color: #6276ba;">)</span><span style="color: #907373;">)</span><span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388d6;">)</span> <span style="color: #7388d6;">(</span>* 3 <span style="color: #909183;">(</span>- 6 2<span style="color: #909183;">)</span> <span style="color: #909183;">(</span>- 2 7<span style="color: #909183;">)</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org4baa341" class="outline-4">
<h4 id="org4baa341">Exercise 1.3</h4>
<div class="outline-text-4" id="text-org4baa341">
<p>
Find a more simple way to do this.
</p>
<div class="org-src-container">
<pre class="src src-scheme"><span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">sum</span> a b c<span style="color: #7388d6;">)</span>
  <span style="color: #7388d6;">(</span><span style="color: #a020f0;">define</span> <span style="color: #909183;">(</span><span style="color: #0000ff;">square-two</span> a b<span style="color: #909183;">)</span>
    <span style="color: #909183;">(</span>+ <span style="color: #709870;">(</span>* a a<span style="color: #709870;">)</span> <span style="color: #709870;">(</span>* b b<span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388d6;">)</span>
  <span style="color: #7388d6;">(</span><span style="color: #a020f0;">cond</span> <span style="color: #909183;">(</span><span style="color: #709870;">(</span><span style="color: #a020f0;">and</span> <span style="color: #907373;">(</span>&lt; a b<span style="color: #907373;">)</span> <span style="color: #907373;">(</span>&lt; a c<span style="color: #907373;">)</span><span style="color: #709870;">)</span> <span style="color: #709870;">(</span>square-two b c<span style="color: #709870;">)</span><span style="color: #909183;">)</span>
        <span style="color: #909183;">(</span><span style="color: #709870;">(</span><span style="color: #a020f0;">and</span> <span style="color: #907373;">(</span>&lt; b a<span style="color: #907373;">)</span> <span style="color: #907373;">(</span>&lt; b c<span style="color: #907373;">)</span><span style="color: #709870;">)</span> <span style="color: #709870;">(</span>square-two a c<span style="color: #709870;">)</span><span style="color: #909183;">)</span>
        <span style="color: #909183;">(</span><span style="color: #a020f0;">else</span> <span style="color: #709870;">(</span>square-two a b<span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
</pre>
</div>
</div>
</div>


<div id="outline-container-org4660549" class="outline-4">
<h4 id="org4660549">Exercise 1.4</h4>
<div class="outline-text-4" id="text-org4660549">
<p>
The function of a-plus-abs-b accept 2 parameters of a and b.
First, it will check if b is greater than 0 or not.  If b &gt; 0, the
local procedure of "(if (&gt; b 0) + -)" will return +, or it will
return -.
</p>

<p>
So, if b &gt; 0, the result is (+ a b) and if b &lt;= 0, the
result is (- a b). In the end, this procedure will return
a plus the absolute value of b. Using infix notation is "a + abs(b)".
</p>
</div>
</div>

<div id="outline-container-org2519789" class="outline-4">
<h4 id="org2519789">Exercise 1.5</h4>
<div class="outline-text-4" id="text-org2519789">
<p>
If the interpreter use applicative-order evaluation, we can't
get any of result. Because, it will first do the step of (p) and then
return the result. But, I can't get the result.
</p>

<p>
If the iterpreter use another way, we will get the result immediately.
In the Normal order, (p) will not be evaluated until it is needed by
some primitive operation and thus this will return 0
</p>

<p>
So, the interpreter use the first one.
</p>

<p>
(Need reference to others answer, I don't really understand this)
</p>
</div>
</div>

<div id="outline-container-org2872007" class="outline-4">
<h4 id="org2872007">Exercise 1.6</h4>
<div class="outline-text-4" id="text-org2872007">
<p>
If you want to understand this question, you must know the difference
between normal-order and applicative order.
</p>

<p>
In this case, it is a normal order evaluation. So, you will get an error
that stack level is too deep.  You can see <a href="https://yydai.github.io/books/sicp.html#org18eee9e">this</a>.
</p>
</div>
</div>


<div id="outline-container-org6560aef" class="outline-4">
<h4 id="org6560aef">Exercise 1.7 &check;</h4>
<div class="outline-text-4" id="text-org6560aef">
<p>
The good-enough? test used in computing square roots will not be
very effective for finding the square roots of very small numbers.
</p>

<p>
An alternative strategy for implementing good-enough? is to watch
how guess changes from one iteration to the next and to stop when
the change is a very small fraction of the guess.
</p>

<div class="org-src-container">
<pre class="src src-scheme"><span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">improve</span> guess x<span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span>average guess <span style="color: #909183;">(</span>/ x guess<span style="color: #909183;">)</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>

<span style="color: #b22222;">;; </span><span style="color: #b22222;">The original version</span>
<span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">good-enough?</span> guess x<span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span>&lt; <span style="color: #909183;">(</span>abs <span style="color: #709870;">(</span>- <span style="color: #907373;">(</span>square guess<span style="color: #907373;">)</span> x<span style="color: #709870;">)</span><span style="color: #909183;">)</span> 0.001<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>

<span style="color: #b22222;">;; </span><span style="color: #b22222;">The new version</span>
<span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">good-enough?</span> guess x<span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span>&lt; <span style="color: #909183;">(</span>abs <span style="color: #709870;">(</span>- <span style="color: #907373;">(</span>improve guess x<span style="color: #907373;">)</span> guess<span style="color: #709870;">)</span><span style="color: #909183;">)</span> <span style="color: #909183;">(</span>* 1.0e-20<span style="color: #909183;">)</span><span style="color: #7388d6;">)</span>


<span style="color: #7388d6;">(</span><span style="color: #a020f0;">define</span> <span style="color: #909183;">(</span><span style="color: #0000ff;">sqrt-iter</span> guess x<span style="color: #909183;">)</span><span style="color: #7388d6;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgff8eaa0" class="outline-4">
<h4 id="orgff8eaa0">Exercise 1.8</h4>
<div class="outline-text-4" id="text-orgff8eaa0">
<p>
The cube root
</p>


<div class="figure">
<p><img src="./imgs/20170613_104358_5319zSn.png" alt="20170613_104358_5319zSn.png" />
</p>
</div>

<div class="org-src-container">
<pre class="src src-scheme"><span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">improve</span> guess x<span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span>/ <span style="color: #909183;">(</span>+ <span style="color: #709870;">(</span>* 2 y<span style="color: #709870;">)</span> <span style="color: #709870;">(</span>/ x <span style="color: #907373;">(</span>* y y<span style="color: #907373;">)</span><span style="color: #709870;">)</span><span style="color: #909183;">)</span> 3<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>

<span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">cube-root</span> x<span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span>cube-iter guess x<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>

<span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">cube-iter</span> guess x<span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span><span style="color: #a020f0;">if</span> <span style="color: #909183;">(</span>good-enough? guess x<span style="color: #909183;">)</span>
        guess
        <span style="color: #909183;">(</span>cube-iter <span style="color: #709870;">(</span>improve guess x<span style="color: #709870;">)</span> x<span style="color: #909183;">)</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>

<span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">good-enough?</span> guess x<span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span>&lt; <span style="color: #909183;">(</span>abs <span style="color: #709870;">(</span>- <span style="color: #907373;">(</span>* guess guess guess<span style="color: #907373;">)</span> x<span style="color: #709870;">)</span><span style="color: #909183;">)</span> 0.01<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
</pre>
</div>

<p>
How to the \(N_th\) root, visit <a href="https://en.wikipedia.org/wiki/Nth_root_algorithm">here</a>.
</p>
</div>
</div>


<div id="outline-container-org7c61a3d" class="outline-4">
<h4 id="org7c61a3d">Exercise 1.9</h4>
<div class="outline-text-4" id="text-org7c61a3d">
<div class="org-src-container">
<pre class="src src-scheme"><span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">+</span> a b<span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span><span style="color: #a020f0;">if</span> <span style="color: #909183;">(</span>= a 0<span style="color: #909183;">)</span> b <span style="color: #909183;">(</span>inc <span style="color: #709870;">(</span>+ <span style="color: #907373;">(</span>dec a<span style="color: #907373;">)</span> b<span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
</pre>
</div>

<pre class="example">
(+ 4 5)
(inc (+ 3 5))
(inc (inc (+ 2 5)))
(inc (inc (inc (+ 1 5))))
(inc (inc (inc (inc (+ 0 5)))))
(inc (inc (inc (inc 5))))
(inc (inc (inc 6)))
(inc (inc 7))
(inc 8)
9
</pre>

<p>
And this procedure:
</p>
<div class="org-src-container">
<pre class="src src-scheme"><span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">+</span> a b<span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span><span style="color: #a020f0;">if</span> <span style="color: #909183;">(</span>= a 0<span style="color: #909183;">)</span> b <span style="color: #909183;">(</span>+ <span style="color: #709870;">(</span>dec a<span style="color: #709870;">)</span> <span style="color: #709870;">(</span>inc b<span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
</pre>
</div>

<pre class="example">
(+ 4 5)
(+ 3 6)
(+ 2 7)
(+ 1 8)
(+ 0 9)
</pre>

<p>
So, the first one is recursive and the second one is
iterative.
</p>
</div>
</div>

<div id="outline-container-orgad899ae" class="outline-4">
<h4 id="orgad899ae">Exercise 1.10</h4>
<div class="outline-text-4" id="text-orgad899ae">
<div class="org-src-container">
<pre class="src src-scheme"><span style="color: #707183;">(</span>A 1 10<span style="color: #707183;">)</span> = <span style="color: #707183;">(</span>A 0 <span style="color: #7388d6;">(</span>A 1 9<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>= 1024
65536
65536
</pre>
</div>

<p>
see <a href="https://github.com/sarabander/p2pu-sicp/blob/master/1.2/Ex1.10.scm">this</a>.
</p>
</div>
</div>

<div id="outline-container-org43b62a9" class="outline-4">
<h4 id="org43b62a9">Exercise 1.11 <b>?</b></h4>
<div class="outline-text-4" id="text-org43b62a9">
<p>
This is the definition of \(f(n)\):
</p>


<div class="figure">
<p><img src="./imgs/20170613_171207_5319Adt.png" alt="20170613_171207_5319Adt.png" />
</p>
</div>
<div class="org-src-container">
<pre class="src src-scheme"><span style="color: #b22222;">;; </span><span style="color: #b22222;">recursive</span>
<span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">f</span> n<span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span><span style="color: #a020f0;">if</span> <span style="color: #909183;">(</span>&lt; n 3<span style="color: #909183;">)</span>
        n
        <span style="color: #909183;">(</span>+ <span style="color: #709870;">(</span>f <span style="color: #907373;">(</span>- n 1<span style="color: #907373;">)</span><span style="color: #709870;">)</span> <span style="color: #709870;">(</span>* 2 <span style="color: #907373;">(</span>f <span style="color: #6276ba;">(</span>- n 2<span style="color: #6276ba;">)</span><span style="color: #907373;">)</span><span style="color: #709870;">)</span> <span style="color: #709870;">(</span>* 3 <span style="color: #907373;">(</span>f <span style="color: #6276ba;">(</span>- n 3<span style="color: #6276ba;">)</span><span style="color: #907373;">)</span><span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
</pre>
</div>

<p>
And the iterative one is: ???
</p>

<p>
You can use this transform:
</p>

\begin{align}
a + 2b + 3c & \rightarrow a \\
a & \rightarrow b \\
b & \rightarrow c
\end{align}

<div class="org-src-container">
<pre class="src src-scheme"><span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">f</span> n<span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span>f-iter 2 1 0 n n<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>

<span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">f-iter</span> a b c count n<span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span><span style="color: #a020f0;">if</span> <span style="color: #909183;">(</span>= count 0<span style="color: #909183;">)</span>
        c
        <span style="color: #909183;">(</span>f-iter <span style="color: #709870;">(</span>+ <span style="color: #907373;">(</span>* 2 b<span style="color: #907373;">)</span>
                   a
                   <span style="color: #907373;">(</span>* 3 c<span style="color: #907373;">)</span><span style="color: #709870;">)</span>
                a
                b
                <span style="color: #709870;">(</span>- count 1<span style="color: #709870;">)</span>
                n<span style="color: #909183;">)</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org8a5cf71" class="outline-4">
<h4 id="org8a5cf71">Exercise 1.12 <b>?</b></h4>
<div class="outline-text-4" id="text-org8a5cf71">
<p>
Pascal’s triangle.
</p>

<p>
I can't understand this problem.
</p>


<div class="figure">
<p><img src="./imgs/Image 20170613 222800.png" alt="Image 20170613 222800.png" />
</p>
</div>

<div class="org-src-container">
<pre class="src src-scheme"><span style="color: #b22222;">;               </span><span style="color: #b22222;">rows</span>
<span style="color: #b22222;">;                 </span><span style="color: #b22222;">1 | 1</span>
<span style="color: #b22222;">;                 </span><span style="color: #b22222;">2 | 1   1</span>
<span style="color: #b22222;">;                 </span><span style="color: #b22222;">3 | 1   2   1</span>
<span style="color: #b22222;">;                 </span><span style="color: #b22222;">4 | 1   3   3   1</span>
<span style="color: #b22222;">;                 </span><span style="color: #b22222;">5 | 1   4   6   4   1</span>
<span style="color: #b22222;">;                   </span><span style="color: #b22222;">--------------------</span>
<span style="color: #b22222;">;               </span><span style="color: #b22222;">cols  1   2   3   4   5</span>


<span style="color: #b22222;">;; </span><span style="color: #b22222;">so , we can define the pascal's triangle with:</span>


<span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">pascal</span> row col<span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span><span style="color: #a020f0;">if</span> <span style="color: #909183;">(</span><span style="color: #a020f0;">or</span> <span style="color: #709870;">(</span>= 1 col<span style="color: #709870;">)</span> <span style="color: #709870;">(</span>= row col<span style="color: #709870;">)</span><span style="color: #909183;">)</span>
        1
        <span style="color: #909183;">(</span>+ <span style="color: #709870;">(</span>pascal <span style="color: #907373;">(</span>- row 1<span style="color: #907373;">)</span> <span style="color: #907373;">(</span>- col 1<span style="color: #907373;">)</span><span style="color: #709870;">)</span>
           <span style="color: #709870;">(</span>pascal <span style="color: #907373;">(</span>- row 1<span style="color: #907373;">)</span> col<span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
</pre>
</div>
</div>
</div>


<div id="outline-container-org8c1b2bf" class="outline-4">
<h4 id="org8c1b2bf">Exercise 1.13 <b>?</b></h4>
<div class="outline-text-4" id="text-org8c1b2bf">
<p>
Use mathematical induction to prove &#x2026;
</p>

<p>
see <a href="https://github.com/sarabander/p2pu-sicp/blob/master/1.2/Ex1.13.pdf">here</a>.
</p>
</div>
</div>


<div id="outline-container-org164b553" class="outline-4">
<h4 id="org164b553">Exercise 1.14 <b>?</b></h4>
<div class="outline-text-4" id="text-org164b553">
<p>
look up  the page of 51 and 56.
</p>
</div>
</div>
<div id="outline-container-org6f9799d" class="outline-4">
<h4 id="org6f9799d">Exercise 1.15 &check;</h4>
<div class="outline-text-4" id="text-org6f9799d">
<p>
5 times to evaluate 12.15?
</p>


<div class="figure">
<p><img src="./imgs/20170614_094241_5319M7I.png" alt="20170614_094241_5319M7I.png" />
</p>
</div>

<div class="org-src-container">
<pre class="src src-scheme"><span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">cube</span> x<span style="color: #7388d6;">)</span> <span style="color: #7388d6;">(</span>* x x x<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
<span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">p</span> x<span style="color: #7388d6;">)</span> <span style="color: #7388d6;">(</span>- <span style="color: #909183;">(</span>* 3 x<span style="color: #909183;">)</span> <span style="color: #909183;">(</span>* 4 <span style="color: #709870;">(</span>cube x<span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span> <span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">sine</span> angle<span style="color: #7388d6;">)</span>
<span style="color: #7388d6;">(</span><span style="color: #a020f0;">if</span> <span style="color: #909183;">(</span>not <span style="color: #709870;">(</span>&gt; <span style="color: #907373;">(</span>abs angle<span style="color: #907373;">)</span> 0.1<span style="color: #709870;">)</span><span style="color: #909183;">)</span> angle
<span style="color: #909183;">(</span>p <span style="color: #709870;">(</span>sine <span style="color: #907373;">(</span>/ angle 3.0<span style="color: #907373;">)</span><span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
<span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #0000ff;">pi</span> 3.1415926<span style="color: #707183;">)</span>

<span style="color: #707183;">(</span>sine <span style="color: #7388d6;">(</span>/ pi 2<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
</pre>
</div>

<p>
solutions:
</p>
<ul class="org-ul">
<li>a. 5 times</li>
</ul>
\begin{align}
121.5 & = 3^x, \\
\log_3{121.5} & = \log 121.5 / \log 3, \\
x & = \log 121.5 / \log 3
\end{align}

<ul class="org-ul">
<li>the order of growth in space is O(n), steps also is O(n). Wrong</li>
</ul>
<p>
Because we got number 5 from taking a logarithm of angle a, so
The order is O(log a).
</p>
</div>
</div>
<div id="outline-container-org8bca4fd" class="outline-4">
<h4 id="org8bca4fd">Exercise 1.16 &check;</h4>
<div class="outline-text-4" id="text-org8bca4fd">
<div class="org-src-container">
<pre class="src src-scheme"><span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">fast-expt2</span> b n<span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span>fast-expt-iter 1 b n<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>

<span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">fast-expt-iter</span> a b n<span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span><span style="color: #a020f0;">cond</span> <span style="color: #909183;">(</span><span style="color: #709870;">(</span>= n 0<span style="color: #709870;">)</span> a<span style="color: #909183;">)</span>
          <span style="color: #909183;">(</span>even? n<span style="color: #909183;">)</span> <span style="color: #909183;">(</span>fast-expt-iter a <span style="color: #709870;">(</span>square b<span style="color: #709870;">)</span> <span style="color: #709870;">(</span>/ n 2<span style="color: #709870;">)</span><span style="color: #909183;">)</span>
          <span style="color: #909183;">(</span><span style="color: #a020f0;">else</span> <span style="color: #709870;">(</span>fast-expt-iter <span style="color: #907373;">(</span>* a b<span style="color: #907373;">)</span> b <span style="color: #907373;">(</span>- n 1<span style="color: #907373;">)</span><span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>

<span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">square</span> x<span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span>* x x<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
</pre>
</div>

<p>
space: O(1), time: O(log n)
</p>
</div>
</div>
<div id="outline-container-org086d930" class="outline-4">
<h4 id="org086d930">Exercise 1.17</h4>
<div class="outline-text-4" id="text-org086d930">

<div class="figure">
<p><img src="./imgs/20170614_150212_5319mPV.png" alt="20170614_150212_5319mPV.png" />
</p>
</div>
<div class="org-src-container">
<pre class="src src-scheme"><span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">mult</span> a b<span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span><span style="color: #a020f0;">define</span> <span style="color: #909183;">(</span><span style="color: #0000ff;">double</span> x<span style="color: #909183;">)</span>
        <span style="color: #909183;">(</span>+ x x<span style="color: #909183;">)</span><span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span><span style="color: #a020f0;">define</span> <span style="color: #909183;">(</span><span style="color: #0000ff;">halve</span> x<span style="color: #909183;">)</span>
        <span style="color: #909183;">(</span>/ x 2<span style="color: #909183;">)</span><span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span><span style="color: #a020f0;">cond</span> <span style="color: #909183;">(</span><span style="color: #709870;">(</span>= b 0<span style="color: #709870;">)</span> a<span style="color: #909183;">)</span>
          <span style="color: #909183;">(</span><span style="color: #709870;">(</span>even? b<span style="color: #709870;">)</span> <span style="color: #709870;">(</span>mult <span style="color: #907373;">(</span>double a<span style="color: #907373;">)</span> <span style="color: #907373;">(</span>halve b<span style="color: #907373;">)</span><span style="color: #709870;">)</span><span style="color: #909183;">)</span>
          <span style="color: #909183;">(</span><span style="color: #a020f0;">else</span> <span style="color: #709870;">(</span>+ a <span style="color: #907373;">(</span>mult a <span style="color: #6276ba;">(</span>- b 1<span style="color: #6276ba;">)</span><span style="color: #907373;">)</span><span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org615d022" class="outline-4">
<h4 id="org615d022">Exercise 1.18</h4>
<div class="outline-text-4" id="text-org615d022">
<div class="org-src-container">
<pre class="src src-scheme"><span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">fast-mult</span> a b<span style="color: #7388d6;">)</span>
<span style="color: #7388d6;">(</span><span style="color: #a020f0;">define</span> <span style="color: #909183;">(</span><span style="color: #0000ff;">double</span> x<span style="color: #909183;">)</span>
  <span style="color: #909183;">(</span>+ x x<span style="color: #909183;">)</span><span style="color: #7388d6;">)</span>
<span style="color: #7388d6;">(</span><span style="color: #a020f0;">define</span> <span style="color: #909183;">(</span><span style="color: #0000ff;">halve</span> x<span style="color: #909183;">)</span>
  <span style="color: #909183;">(</span>/ x 2<span style="color: #909183;">)</span><span style="color: #7388d6;">)</span>
<span style="color: #7388d6;">(</span><span style="color: #a020f0;">define</span> <span style="color: #909183;">(</span><span style="color: #0000ff;">mult-iter</span> a counter sum<span style="color: #909183;">)</span>
  <span style="color: #909183;">(</span><span style="color: #a020f0;">cond</span> <span style="color: #709870;">(</span><span style="color: #907373;">(</span>= counter 0<span style="color: #907373;">)</span>
         sum<span style="color: #709870;">)</span>
        <span style="color: #709870;">(</span><span style="color: #907373;">(</span>even? counter<span style="color: #907373;">)</span>
         <span style="color: #907373;">(</span>mult-iter <span style="color: #6276ba;">(</span>double a<span style="color: #6276ba;">)</span> <span style="color: #6276ba;">(</span>halve counter<span style="color: #6276ba;">)</span> sum<span style="color: #907373;">)</span><span style="color: #709870;">)</span>
        <span style="color: #709870;">(</span><span style="color: #a020f0;">else</span>
         <span style="color: #907373;">(</span>mult-iter a <span style="color: #6276ba;">(</span>- counter 1<span style="color: #6276ba;">)</span> <span style="color: #6276ba;">(</span>+ sum a<span style="color: #6276ba;">)</span><span style="color: #907373;">)</span><span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388d6;">)</span>
<span style="color: #7388d6;">(</span>mult-iter a b 0<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org3940947" class="outline-4">
<h4 id="org3940947">Exercise 1.19 <b>?</b></h4>
<div class="outline-text-4" id="text-org3940947">
<div class="org-src-container">
<pre class="src src-scheme"><span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">fib</span> n<span style="color: #7388d6;">)</span>
  <span style="color: #7388d6;">(</span>fit-iter 1 0 0 1 n<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
<span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">fib-iter</span> a b p q count<span style="color: #7388d6;">)</span>
  <span style="color: #7388d6;">(</span>conf <span style="color: #909183;">(</span><span style="color: #709870;">(</span>= count 0<span style="color: #709870;">)</span> b<span style="color: #909183;">)</span>
        <span style="color: #909183;">(</span><span style="color: #709870;">(</span>even? count<span style="color: #709870;">)</span>
         <span style="color: #709870;">(</span>fib-iter a
                   b
                   <span style="color: #907373;">(</span>+ <span style="color: #6276ba;">(</span>square p<span style="color: #6276ba;">)</span> <span style="color: #6276ba;">(</span>square q<span style="color: #6276ba;">)</span><span style="color: #907373;">)</span>
                   <span style="color: #907373;">(</span>+ <span style="color: #6276ba;">(</span>* 2 p q<span style="color: #6276ba;">)</span> <span style="color: #6276ba;">(</span>square q<span style="color: #6276ba;">)</span><span style="color: #907373;">)</span>
                   <span style="color: #907373;">(</span>/ count 2<span style="color: #907373;">)</span><span style="color: #709870;">)</span><span style="color: #909183;">)</span>
        <span style="color: #909183;">(</span><span style="color: #a020f0;">else</span> <span style="color: #709870;">(</span>fib-iter <span style="color: #907373;">(</span>+ <span style="color: #6276ba;">(</span>* b q<span style="color: #6276ba;">)</span> <span style="color: #6276ba;">(</span>* a q<span style="color: #6276ba;">)</span> <span style="color: #6276ba;">(</span>*a p<span style="color: #6276ba;">)</span><span style="color: #907373;">)</span>
                        <span style="color: #907373;">(</span>+ <span style="color: #6276ba;">(</span>* b p<span style="color: #6276ba;">)</span> <span style="color: #6276ba;">(</span>* a q<span style="color: #6276ba;">)</span><span style="color: #907373;">)</span>
                        p
                        q
                        <span style="color: #907373;">(</span>- count 1<span style="color: #907373;">)</span><span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
</pre>
</div>

<p>
Want get more detail, visit <a href="https://github.com/sarabander/p2pu-sicp/blob/master/1.2/Ex1.19.pdf">here</a>.
</p>
</div>
</div>
<div id="outline-container-orgccdd5f8" class="outline-4">
<h4 id="orgccdd5f8">Exercise 1.20</h4>
<div class="outline-text-4" id="text-orgccdd5f8">
<p>
<a href="https://github.com/qiao/sicp-solutions/blob/master/chapter1/1.20.scm">solution</a>
</p>
</div>
</div>

<div id="outline-container-org103f83a" class="outline-4">
<h4 id="org103f83a">Exercise 1.21</h4>
<div class="outline-text-4" id="text-org103f83a">
<div class="org-src-container">
<pre class="src src-scheme"><span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">smallest-divisor</span> n<span style="color: #7388d6;">)</span>
  <span style="color: #7388d6;">(</span>find-divisor n 2<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
<span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">find-divisor</span> n test-divisor<span style="color: #7388d6;">)</span>
  <span style="color: #7388d6;">(</span><span style="color: #a020f0;">cond</span> <span style="color: #909183;">(</span><span style="color: #709870;">(</span>&gt; <span style="color: #907373;">(</span>square test-divisor<span style="color: #907373;">)</span> n<span style="color: #709870;">)</span> n<span style="color: #909183;">)</span>
        <span style="color: #909183;">(</span><span style="color: #709870;">(</span>divides? test-divisor n<span style="color: #709870;">)</span> test-divisor<span style="color: #909183;">)</span>
        <span style="color: #909183;">(</span><span style="color: #a020f0;">else</span> <span style="color: #709870;">(</span>find-divisor n <span style="color: #907373;">(</span>+ test-divisor 1<span style="color: #907373;">)</span><span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
<span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">divides?</span> a b<span style="color: #7388d6;">)</span>
  <span style="color: #7388d6;">(</span>= <span style="color: #909183;">(</span>remainder b a<span style="color: #909183;">)</span> 0<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orga2cad67" class="outline-4">
<h4 id="orga2cad67"><span class="todo TODO">TODO</span> Exercise 1.22</h4>
</div>

<div id="outline-container-orgdcb4b35" class="outline-4">
<h4 id="orgdcb4b35">Exercise 1.23</h4>
<div class="outline-text-4" id="text-orgdcb4b35">
<p>
Instead of using (+ test-divisor 1), we change it to
(next test-divisor)
</p>

<div class="org-src-container">
<pre class="src src-scheme"><span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">find-divisor</span> n test-divisor<span style="color: #7388d6;">)</span>
  <span style="color: #7388d6;">(</span><span style="color: #a020f0;">cond</span> <span style="color: #909183;">(</span><span style="color: #709870;">(</span>&gt; <span style="color: #907373;">(</span>square test-divisor<span style="color: #907373;">)</span> n<span style="color: #709870;">)</span> n<span style="color: #909183;">)</span>
    <span style="color: #909183;">(</span><span style="color: #709870;">(</span>divides? test-divisor n<span style="color: #709870;">)</span> test-divisor<span style="color: #909183;">)</span>
    <span style="color: #909183;">(</span><span style="color: #a020f0;">else</span> <span style="color: #709870;">(</span>find-divisor n <span style="color: #907373;">(</span>next test-divisor<span style="color: #907373;">)</span><span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>

<span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">next</span> input<span style="color: #7388d6;">)</span>
  <span style="color: #7388d6;">(</span><span style="color: #a020f0;">if</span> <span style="color: #909183;">(</span>= input 2<span style="color: #909183;">)</span>
      3
      <span style="color: #909183;">(</span>+ 2 input<span style="color: #909183;">)</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org37dc2f3" class="outline-4">
<h4 id="org37dc2f3"><span class="todo TODO">TODO</span> Exercise 1.24</h4>
</div>

<div id="outline-container-org4638122" class="outline-4">
<h4 id="org4638122"><span class="todo TODO">TODO</span> Exercise 1.25</h4>
</div>

<div id="outline-container-org2edddca" class="outline-4">
<h4 id="org2edddca">Exercise 1.26</h4>
<div class="outline-text-4" id="text-org2edddca">
<p>
The multiplication expression evaluates expmod twice, resulting in binary process tree, which grows exponentially as O(2<sup>n</sup>). This cancels the advantage we had with O(log n) algorithm, because 2<sup>(log n)</sup> = n.
</p>
</div>
</div>

<div id="outline-container-org37bfa24" class="outline-4">
<h4 id="org37bfa24">Exercise 1.27</h4>
</div>

<div id="outline-container-orgaf4ecec" class="outline-4">
<h4 id="orgaf4ecec">Exercise 1.28</h4>
</div>

<div id="outline-container-orgcb1d839" class="outline-4">
<h4 id="orgcb1d839">Exercise 1.29 &check;</h4>
<div class="outline-text-4" id="text-orgcb1d839">
<div class="org-src-container">
<pre class="src src-scheme"><span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">square</span> x<span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span>* x x<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>

<span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">cube</span> x<span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span>* x x x<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>

<span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">sum</span> term a next b<span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span><span style="color: #a020f0;">if</span> <span style="color: #909183;">(</span>&gt; a b<span style="color: #909183;">)</span>
        0
        <span style="color: #909183;">(</span>+ <span style="color: #709870;">(</span>term a<span style="color: #709870;">)</span>
           <span style="color: #709870;">(</span>sum term <span style="color: #907373;">(</span>next a<span style="color: #907373;">)</span> next b<span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>

<span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">simpson-integral</span> f a b n<span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span><span style="color: #a020f0;">define</span> <span style="color: #909183;">(</span><span style="color: #0000ff;">add-h</span> x<span style="color: #909183;">)</span> <span style="color: #909183;">(</span>+ x h<span style="color: #909183;">)</span><span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span><span style="color: #a020f0;">define</span> <span style="color: #0000ff;">h</span> <span style="color: #909183;">(</span>/ <span style="color: #709870;">(</span>- b a<span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span><span style="color: #a020f0;">define</span> <span style="color: #909183;">(</span><span style="color: #0000ff;">summand</span> x<span style="color: #909183;">)</span>
        <span style="color: #909183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #0000ff;">multiplier</span>
            <span style="color: #709870;">(</span><span style="color: #a020f0;">cond</span> <span style="color: #907373;">(</span><span style="color: #6276ba;">(</span><span style="color: #a020f0;">or</span> <span style="color: #858580;">(</span>= x a<span style="color: #858580;">)</span> <span style="color: #858580;">(</span>= x b<span style="color: #858580;">)</span><span style="color: #6276ba;">)</span> 1<span style="color: #907373;">)</span>
                  <span style="color: #907373;">(</span><span style="color: #6276ba;">(</span>odd? <span style="color: #858580;">(</span>round <span style="color: #80a880;">(</span>/ <span style="color: #887070;">(</span>- x a<span style="color: #887070;">)</span> h<span style="color: #80a880;">)</span><span style="color: #858580;">)</span><span style="color: #6276ba;">)</span><span style="color: #907373;">)</span>
                  <span style="color: #907373;">(</span><span style="color: #a020f0;">else</span> 2<span style="color: #907373;">)</span><span style="color: #709870;">)</span><span style="color: #909183;">)</span>
        <span style="color: #909183;">(</span>* multiplier <span style="color: #709870;">(</span>f x<span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span>* <span style="color: #909183;">(</span>/ h 3<span style="color: #909183;">)</span> <span style="color: #909183;">(</span>sum summand a add-h b<span style="color: #909183;">)</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
</pre>
</div>
</div>
</div>


<div id="outline-container-org8e7c111" class="outline-4">
<h4 id="org8e7c111">Exercise 1.30 &check;</h4>
<div class="outline-text-4" id="text-org8e7c111">
<div class="org-src-container">
<pre class="src src-scheme"><span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">sum</span> term a next b<span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span><span style="color: #a020f0;">define</span> <span style="color: #909183;">(</span><span style="color: #0000ff;">iter</span> a result<span style="color: #909183;">)</span>
        <span style="color: #909183;">(</span><span style="color: #a020f0;">if</span> <span style="color: #709870;">(</span>&gt; a b<span style="color: #709870;">)</span>
            result
            <span style="color: #709870;">(</span>iter <span style="color: #907373;">(</span>next a<span style="color: #907373;">)</span> <span style="color: #907373;">(</span>+ <span style="color: #6276ba;">(</span>term a<span style="color: #6276ba;">)</span> result<span style="color: #907373;">)</span><span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span>iter a 0<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>

<span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">identity</span> x<span style="color: #7388d6;">)</span> x<span style="color: #707183;">)</span>

<span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">inc</span> x<span style="color: #7388d6;">)</span> <span style="color: #7388d6;">(</span>+ 1 x<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>

<span style="color: #707183;">(</span>sum identity 1 inc 10<span style="color: #707183;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgcf62518" class="outline-4">
<h4 id="orgcf62518">Exercise 1.31</h4>
<div class="outline-text-4" id="text-orgcf62518">
<div class="org-src-container">
<pre class="src src-scheme"><span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">product</span> term a next b<span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span><span style="color: #a020f0;">if</span> <span style="color: #909183;">(</span>&gt; a b<span style="color: #909183;">)</span>
        1
        <span style="color: #909183;">(</span>* <span style="color: #709870;">(</span>term a<span style="color: #709870;">)</span>
           <span style="color: #709870;">(</span>product term <span style="color: #907373;">(</span>next a<span style="color: #907373;">)</span> next b<span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>

<span style="color: #b22222;">;; </span><span style="color: #b22222;">iterative product</span>
<span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">product</span> term a next b<span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span><span style="color: #a020f0;">define</span> <span style="color: #909183;">(</span><span style="color: #0000ff;">iter</span> a result<span style="color: #909183;">)</span>
        <span style="color: #909183;">(</span><span style="color: #a020f0;">if</span> <span style="color: #709870;">(</span>&gt; a b<span style="color: #709870;">)</span>
            result
            <span style="color: #709870;">(</span>iter <span style="color: #907373;">(</span>next a<span style="color: #907373;">)</span> <span style="color: #907373;">(</span>* <span style="color: #6276ba;">(</span>term a<span style="color: #6276ba;">)</span> result<span style="color: #907373;">)</span><span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span>iter a 1<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>

<span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">factorial</span> n<span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span><span style="color: #a020f0;">if</span> <span style="color: #909183;">(</span>= n 0<span style="color: #909183;">)</span>
        1
        <span style="color: #909183;">(</span>* n <span style="color: #709870;">(</span>factorial <span style="color: #907373;">(</span>- n 1<span style="color: #907373;">)</span><span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>

<span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">factorial</span> n<span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span>product identify 1 inc n<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>


<span style="color: #b22222;">;; </span><span style="color: #b22222;">pi/4</span>
<span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #0000ff;">quarter-pi</span>
    <span style="color: #7388d6;">(</span><span style="color: #a020f0;">lambda</span> <span style="color: #909183;">(</span>max-factor<span style="color: #909183;">)</span>
            <span style="color: #909183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #0000ff;">add2</span> <span style="color: #709870;">(</span><span style="color: #a020f0;">lambda</span> <span style="color: #907373;">(</span>x<span style="color: #907373;">)</span> <span style="color: #907373;">(</span>+ x 2<span style="color: #907373;">)</span><span style="color: #709870;">)</span><span style="color: #909183;">)</span>
            <span style="color: #909183;">(</span>/ <span style="color: #709870;">(</span>* 2 <span style="color: #907373;">(</span>product square 4 add2 <span style="color: #6276ba;">(</span>- max-factor 2<span style="color: #6276ba;">)</span> max-factor<span style="color: #907373;">)</span><span style="color: #709870;">)</span>
               <span style="color: #709870;">(</span>product square 3 add2 <span style="color: #907373;">(</span>- max-factor 1<span style="color: #907373;">)</span><span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>

<span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #0000ff;">pi-approx</span>
    <span style="color: #7388d6;">(</span><span style="color: #a020f0;">lambda</span> <span style="color: #909183;">(</span>max-factor<span style="color: #909183;">)</span>
        <span style="color: #909183;">(</span>* 4.0 <span style="color: #709870;">(</span>quarter-pi max-factor<span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
</pre>
</div>
</div>
</div>



<div id="outline-container-org5705ba4" class="outline-4">
<h4 id="org5705ba4">Exercise 1.32</h4>
<div class="outline-text-4" id="text-org5705ba4">
<div class="org-src-container">
<pre class="src src-scheme"><span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">accumulate</span> combiner null-value term a next b<span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span><span style="color: #a020f0;">if</span> <span style="color: #909183;">(</span>&gt; a b<span style="color: #909183;">)</span>
        null-value
        <span style="color: #909183;">(</span>combiner <span style="color: #709870;">(</span>term a<span style="color: #709870;">)</span>
                  <span style="color: #709870;">(</span>accumulate combiner null-value term <span style="color: #907373;">(</span>next a<span style="color: #907373;">)</span> next b<span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>


<span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">accumulate</span> combiner null-value term a next b<span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span><span style="color: #a020f0;">define</span> <span style="color: #909183;">(</span><span style="color: #0000ff;">iter</span> a result<span style="color: #909183;">)</span>
        <span style="color: #909183;">(</span><span style="color: #a020f0;">if</span> <span style="color: #709870;">(</span>&gt; a b<span style="color: #709870;">)</span>
            result
            <span style="color: #709870;">(</span>iter <span style="color: #907373;">(</span>next a<span style="color: #907373;">)</span> <span style="color: #907373;">(</span>combiner <span style="color: #6276ba;">(</span>iterm a<span style="color: #6276ba;">)</span> result<span style="color: #907373;">)</span><span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span>iter a null-value<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>

<span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">sum</span> term a next b<span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span>accumulate + 0 term a next b<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>

<span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">product</span> term a next b<span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span>accumulate * 1 term a next b<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org48795d2" class="outline-4">
<h4 id="org48795d2">Exercise 1.33</h4>
<div class="outline-text-4" id="text-org48795d2">
<div class="org-src-container">
<pre class="src src-scheme"><span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">filtered-accumulate</span> filter
                 combiner
                 null-value
                 term
                 a
                 next
                 b<span style="color: #7388d6;">)</span>
  <span style="color: #7388d6;">(</span><span style="color: #a020f0;">define</span> <span style="color: #909183;">(</span><span style="color: #0000ff;">iter</span> a result<span style="color: #909183;">)</span>
    <span style="color: #909183;">(</span><span style="color: #a020f0;">if</span> <span style="color: #709870;">(</span>&gt; a b<span style="color: #709870;">)</span>
    result
    <span style="color: #709870;">(</span>iter <span style="color: #907373;">(</span>next a<span style="color: #907373;">)</span>
          <span style="color: #907373;">(</span>combiner <span style="color: #6276ba;">(</span><span style="color: #a020f0;">if</span> <span style="color: #858580;">(</span>filter a<span style="color: #858580;">)</span>
                <span style="color: #858580;">(</span>term a<span style="color: #858580;">)</span>
                null-value<span style="color: #6276ba;">)</span>
            result<span style="color: #907373;">)</span><span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388d6;">)</span>
  <span style="color: #7388d6;">(</span>iter a null-value<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>

<span style="color: #707183;">(</span>+ <span style="color: #7388d6;">(</span>filtered-accumulate odd? + 0 identity 1 inc 10<span style="color: #7388d6;">)</span>
   <span style="color: #7388d6;">(</span>filtered-accumulate even? + 0 identity 1 inc 10<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span> <span style="color: #b22222;">; </span><span style="color: #b22222;">55</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org6865f84" class="outline-4">
<h4 id="org6865f84">Exercise 1.34</h4>
<div class="outline-text-4" id="text-org6865f84">
<p>
This will give a wrong answer.
(f f) = (f 2) = (2 2)
</p>

<p>
Because 2 is not an operator, so the iterpreter will throw an error.
</p>
</div>
</div>

<div id="outline-container-orgb0c0585" class="outline-4">
<h4 id="orgb0c0585">Exercise 1.35</h4>
<div class="outline-text-4" id="text-orgb0c0585">
<p>
Look at <a href="https://github.com/sarabander/p2pu-sicp/blob/master/1.3/Ex1.35.scm">this</a>.
</p>

<div class="org-src-container">
<pre class="src src-scheme"><span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #0000ff;">tolerance</span> 0.00001<span style="color: #707183;">)</span>

<span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">fixed-point</span> f first-guess<span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span><span style="color: #a020f0;">define</span> <span style="color: #909183;">(</span><span style="color: #0000ff;">close-enough?</span> v1 v2<span style="color: #909183;">)</span>
        <span style="color: #909183;">(</span>&lt; <span style="color: #709870;">(</span>abs <span style="color: #907373;">(</span>- v1 v2<span style="color: #907373;">)</span><span style="color: #709870;">)</span> tolerance<span style="color: #909183;">)</span><span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span><span style="color: #a020f0;">define</span> <span style="color: #909183;">(</span><span style="color: #0000ff;">try</span> guess<span style="color: #909183;">)</span>
        <span style="color: #909183;">(</span><span style="color: #a020f0;">let</span> <span style="color: #709870;">(</span><span style="color: #907373;">(</span>next <span style="color: #6276ba;">(</span>f guess<span style="color: #6276ba;">)</span><span style="color: #907373;">)</span><span style="color: #709870;">)</span>
            <span style="color: #709870;">(</span><span style="color: #a020f0;">if</span> <span style="color: #907373;">(</span>close-enough? guess next<span style="color: #907373;">)</span>
                next
                <span style="color: #907373;">(</span>try next<span style="color: #907373;">)</span><span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span>try first-guess<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>

<span style="color: #707183;">(</span>fixed-point <span style="color: #7388d6;">(</span><span style="color: #a020f0;">lambda</span> <span style="color: #909183;">(</span>x<span style="color: #909183;">)</span> <span style="color: #909183;">(</span>+ 1 <span style="color: #709870;">(</span>/ 1 x<span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org94fed2e" class="outline-3">
<h3 id="org94fed2e">Chapter 2</h3>
<div class="outline-text-3" id="text-org94fed2e">
</div><div id="outline-container-orgc2044f6" class="outline-4">
<h4 id="orgc2044f6">Exercise 2.1</h4>
<div class="outline-text-4" id="text-orgc2044f6">
<div class="org-src-container">
<pre class="src src-scheme"><span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">gcd</span> a b<span style="color: #7388d6;">)</span>
  <span style="color: #7388d6;">(</span><span style="color: #a020f0;">if</span> <span style="color: #909183;">(</span>= b 0<span style="color: #909183;">)</span>
      a
      <span style="color: #909183;">(</span>gcd b <span style="color: #709870;">(</span>remainder a b<span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>

<span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">print-rat</span> x<span style="color: #7388d6;">)</span>
  <span style="color: #7388d6;">(</span>display <span style="color: #909183;">(</span>numer x<span style="color: #909183;">)</span><span style="color: #7388d6;">)</span>
  <span style="color: #7388d6;">(</span>display <span style="color: #8b2252;">"/"</span><span style="color: #7388d6;">)</span>
  <span style="color: #7388d6;">(</span>display <span style="color: #909183;">(</span>denom x<span style="color: #909183;">)</span><span style="color: #7388d6;">)</span>
  <span style="color: #7388d6;">(</span>newline<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>

<span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">numer</span> x<span style="color: #7388d6;">)</span> <span style="color: #7388d6;">(</span>car x<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
<span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">denom</span> x<span style="color: #7388d6;">)</span> <span style="color: #7388d6;">(</span>cdr x<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>

<span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">make-rat</span> n d<span style="color: #7388d6;">)</span>
  <span style="color: #7388d6;">(</span><span style="color: #a020f0;">let</span> <span style="color: #909183;">(</span><span style="color: #709870;">(</span>g <span style="color: #907373;">(</span>abs <span style="color: #6276ba;">(</span>gcd n d<span style="color: #6276ba;">)</span><span style="color: #907373;">)</span><span style="color: #709870;">)</span><span style="color: #909183;">)</span>
    <span style="color: #909183;">(</span><span style="color: #a020f0;">if</span> <span style="color: #709870;">(</span>&lt; d 0<span style="color: #709870;">)</span>
        <span style="color: #709870;">(</span>cons <span style="color: #907373;">(</span>/ <span style="color: #6276ba;">(</span>- n<span style="color: #6276ba;">)</span> g<span style="color: #907373;">)</span> <span style="color: #907373;">(</span>/ <span style="color: #6276ba;">(</span>- d<span style="color: #6276ba;">)</span> g<span style="color: #907373;">)</span><span style="color: #709870;">)</span>
        <span style="color: #709870;">(</span>cons <span style="color: #907373;">(</span>/ n g<span style="color: #907373;">)</span> <span style="color: #907373;">(</span>/ d g<span style="color: #907373;">)</span><span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>

<span style="color: #707183;">(</span>print-rat <span style="color: #7388d6;">(</span>make-rat 12 -15<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
<span style="color: #707183;">(</span>print-rat <span style="color: #7388d6;">(</span>make-rat -4 -18<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
<span style="color: #707183;">(</span>print-rat <span style="color: #7388d6;">(</span>make-rat -18 15<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
<span style="color: #707183;">(</span>print-rat <span style="color: #7388d6;">(</span>make-rat 3 5<span style="color: #7388d6;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgd547d5c" class="outline-4">
<h4 id="orgd547d5c">Exercise 2.2</h4>
<div class="outline-text-4" id="text-orgd547d5c">
<div class="org-src-container">
<pre class="src src-scheme"><span style="color: #707183;">(</span><span style="color: #a020f0;">define</span> <span style="color: #7388d6;">(</span><span style="color: #0000ff;">midpoint-segment</span> s<span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span><span style="color: #a020f0;">let*</span> <span style="color: #909183;">(</span><span style="color: #709870;">(</span>start <span style="color: #907373;">(</span>start-segment s<span style="color: #907373;">)</span><span style="color: #709870;">)</span>
       <span style="color: #709870;">(</span>end   <span style="color: #907373;">(</span>end-segment s<span style="color: #907373;">)</span><span style="color: #709870;">)</span>
       <span style="color: #709870;">(</span>x1 <span style="color: #907373;">(</span>x-point start<span style="color: #907373;">)</span><span style="color: #709870;">)</span>
       <span style="color: #709870;">(</span>y1 <span style="color: #907373;">(</span>y-point start<span style="color: #907373;">)</span><span style="color: #709870;">)</span>
       <span style="color: #709870;">(</span>x2 <span style="color: #907373;">(</span>x-point end<span style="color: #907373;">)</span><span style="color: #709870;">)</span>
       <span style="color: #709870;">(</span>y2 <span style="color: #907373;">(</span>y-point end<span style="color: #907373;">)</span><span style="color: #709870;">)</span><span style="color: #909183;">)</span>
      <span style="color: #909183;">(</span>make-point <span style="color: #709870;">(</span>average x1 x2<span style="color: #709870;">)</span>
          <span style="color: #709870;">(</span>average y1 y2<span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org8d1ac83" class="outline-4">
<h4 id="org8d1ac83"><span class="todo TODO">TODO</span> Exercise 2.3</h4>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<script type="text/javascript" src="https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/datejs/1.0/date.min.js"></script>

<script>
var base_url = 'https://api.github.com';
var title = document.title;
var owner = 'yydai';
var repo = 'yydai.github.io';
var search_issues = base_url + '/search/issues?q=' + title + '+user:' + owner + '+label:blog'+ '+state:open';

console.log("search_issues = "+ search_issues);

function test() {
  jQuery.ajax({
      type: 'GET',
      async: false,
      dataType:'json',
      url: search_issues,
      success:function(data) {
         result = data;
      }
  });
  return result;
}
var result = test();
var items = result.items[0];
if(jQuery.isEmptyObject(items)) {
    create(title);
} else {
    html_url = items.html_url;
	document.body.innerHTML +=
'<div id="comments"><h2>Comments</h2><div id="header">Want to leave a comment? Visit <a href="'+ html_url + '"> this issue page on GitHub</a> (you will need a GitHub account).</div></div>'
}


function create(title) {
	var create_url = 'https://blog-api-server.herokuapp.com/issues?title=' + title + '&labels=blog&body=Welcome to leave comments here.&owner=yydai&repo=yydai.github.io&auth=eXlkYWk6ZGVpc3Q5MjgxNw=='

	jQuery.ajax({
      type: 'GET',
      async: false,
      dataType:'json',
      url: create_url,
      success:function(data) {
         result = data;
      }
  });
}


console.log("total_count = " + result.total_count);
if(result.total_count == 1) {
    var comments_url = result.items[0].comments_url;
} else if (result.total_count == 0) {
        // create a new issue
    //create(title);
} else {
        // result not only
        alert('Cannot load the comments.');
}

function loadComments(data) {
    for (var i=0; i<data.length; i++) {
      var cuser = data[i].user.login;
      var cuserlink = 'https://' + repo + '/' + data[i].user.login;
      var clink = comments_url + '#issuecomment-' + data[i].url.substring(data[i].url.lastIndexOf("/")+1);
      var cbody = data[i].body_html;
      var cavatarlink = data[i].user.avatar_url;
      var cdate = Date.parse(data[i].created_at).toString('yyyy-MM-dd HH:mm:ss');

      var code = '<div class="comment"><div class="commentheader"><div class="commentgravatar">' + '<img src="' + cavatarlink + '" alt="" width="20" height="20">' + '</div><a class="commentuser" href=\""+ cuserlink + "\">' + cuser + '</a><a class="commentdate" href=\"" + clink + "\">' + cdate + '</a></div><div class="commentbody">' + cbody + '</div></div>';

      $('#comments').append(code);
    }
  }


var comments_api = comments_url + '?per_page=100';
console.log("comments api: " + comments_api);
$.ajax(comments_api, {
    headers: {Accept: 'application/vnd.github.full+json'},
    dataType: 'json',
    success: function(msg){
      loadComments(msg);
   }
  });


</script>

<hr />
 <div class='footer'>
© 2017 yydai<br/>
Email: dai92817@icloud.com
</div>
</div>
</body>
</html>
