<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2017-07-10 Mon 18:46 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Emacs 的一些技巧</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="ying dai" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<script src='https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js'></script>
<link rel='stylesheet' href='../css/worg2.css' typbe='text/css'/>
<link rel='shortcut icon' type='image/x-icon' href='/favicon.ico'>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="preamble" class="status">

<div class='nav'>
<div class='blog' style='text-align:right'>
<a href='/index.html'> Home </a> | <a href='/contact.html'> About </a>
</div>
</div>
</div>
<div id="content">
<h1 class="title">Emacs 的一些技巧</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org0320179">设置一个标记(Mark)</a></li>
<li><a href="#org39775bd">快速的选中一行</a></li>
<li><a href="#org38088be">org mode 发布网站的问题</a></li>
<li><a href="#org81ffdcc">Apropos(!important)</a></li>
<li><a href="#orga4fc66d">跳到本行第一个非空格字符上</a></li>
<li><a href="#org39c7fc6">特殊字符与数字键交换</a></li>
<li><a href="#org0dd288b">在 Emacs 中禁用鼠标</a></li>
<li><a href="#org8f609af">交换 C-w 和 M-w 的命令绑定</a></li>
<li><a href="#org2eb6c59">截图</a></li>
<li><a href="#org3498cee">Emacs 的键盘宏</a></li>
<li><a href="#org1fc0cc9">new-line-and-indent</a></li>
<li><a href="#org202b303">Butterfly</a></li>
<li><a href="#orgcc89135">快速生成有序序列</a></li>
<li><a href="#org41a7a4f">C-x r t string-rectangle</a></li>
<li><a href="#orgd162667">MULTIPLE CURSORS</a></li>
<li><a href="#orgf6eb023">xah math input (here)</a></li>
<li><a href="#org12148a9">自动在中英文之间添加空格</a></li>
</ul>
</div>
</div>
<hr />
<div id="outline-container-org0320179" class="outline-2">
<h2 id="org0320179">设置一个标记(Mark)</h2>
<div class="outline-text-2" id="text-org0320179">
<p>
命令是 <code>set-mark-command</code>, 绑定的快捷键为 C-@, C-., C-SPC，推荐使用 <code>C-.</code> 。 因为 C-SPC 与输入法有冲突，C-@比较难按。
再次按下 <code>C-.</code> 会取消标记。
</p>

<p>
设置矩形区域标记，使用 C-x &lt;spc&gt;, visit <a href="https://www.gnu.org/software/emacs/manual/html_node/emacs/Rectangles.html">here</a>.
</p>
</div>
</div>

<div id="outline-container-org39775bd" class="outline-2">
<h2 id="org39775bd">快速的选中一行</h2>
<div class="outline-text-2" id="text-org39775bd">
<p>
现在一行的开头设置一个 <code>mark</code> ，然后移动到行尾。即：
</p>
<div class="org-src-container">
<pre class="src src-shell">C-a C-. C-e
</pre>
</div>

<p>
同样的原理，我们可以在任何一个位置设置一个 mark，然后选中其前面或后面的文本。
</p>
</div>
</div>

<div id="outline-container-org38088be" class="outline-2">
<h2 id="org38088be">org mode 发布网站的问题</h2>
<div class="outline-text-2" id="text-org38088be">
<p>
在 org 中有时需要写类似这种 <code>A_B</code> 的东西，但是在解释成 html 后就成了下标了。
解决的方法可以写成 <code>#+OPTIONS: ^:nil</code>
</p>

<p>
另外一个问题时，在使用 publish 发布的时候，如何禁用 cache，可以这样：
</p>

<div class="org-src-container">
<pre class="src src-lisp"><span style="color: #707183;">(</span>setq org-publish-use-timestamps-flag nil<span style="color: #707183;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org81ffdcc" class="outline-2">
<h2 id="org81ffdcc">Apropos(!important)</h2>
<div class="outline-text-2" id="text-org81ffdcc">
<p>
Finally,  there are two powerhouse commands that you’ll want to turn to
when all else fails. For example, when you’re fairly certain that
Emacs has commands for doing something, but aren’t able to find it
using any of the usual methods. Say, you want to learn how to edit
rectangular regions in Emacs, but can’t remember the commands. That’s
where the apropos commands come in. Two important ones are <code>C-h a</code>, for
<code>apropos-command</code>, and <code>C-h d</code>, for <code>apropos-documentation</code>.
</p>

<p>
For example, pressing <code>C-h a RET rectangle RET</code> will list all commands
containing the string <code>rectangle</code>, along with their key bindings. Then
you can quickly recall that the key binding for <code>kill-rectangle</code> is
 <code>C-x r k</code>, and that most of the other rectangle commands also begin with
<code>C-x r</code>. Note that the “pattern” you provide to these <code>apropos</code> commands can
also be a regular expression.
</p>
</div>
</div>

<div id="outline-container-orga4fc66d" class="outline-2">
<h2 id="orga4fc66d">跳到本行第一个非空格字符上</h2>
<div class="outline-text-2" id="text-orga4fc66d">
<p>
对应的命令是 <code>back-to-indentation</code> ，默认绑定的快捷键是 <code>M-m</code> 。
</p>
</div>
</div>

<div id="outline-container-org39c7fc6" class="outline-2">
<h2 id="org39c7fc6">特殊字符与数字键交换</h2>
<div class="outline-text-2" id="text-org39c7fc6">
<p>
在几乎所有的语言中，我们要输入很多的特殊字符，例如
</p>
<pre class="example">
! @ # $ % ^ &amp; * ( )
</pre>

<p>
但是这种字符的输入有些麻烦，需要按住 shift 键才行，下面我们就优化一下这种操作。
</p>

<div class="org-src-container">
<pre class="src src-elisp"><span style="color: #707183;">(</span><span style="color: #a020f0;">defvar</span> <span style="color: #a0522d;">*unshifted-special-chars-layout*</span>
  <span style="color: #a020f0;">'</span><span style="color: #7388d6;">(</span><span style="color: #909183;">(</span><span style="color: #8b2252;">"1"</span> <span style="color: #8b2252;">"!"</span><span style="color: #909183;">)</span> <span style="color: #b22222;">; </span><span style="color: #b22222;">from -&gt; to</span>
    <span style="color: #909183;">(</span><span style="color: #8b2252;">"2"</span> <span style="color: #8b2252;">"@"</span><span style="color: #909183;">)</span>
    <span style="color: #909183;">(</span><span style="color: #8b2252;">"3"</span> <span style="color: #8b2252;">"#"</span><span style="color: #909183;">)</span>
    <span style="color: #909183;">(</span><span style="color: #8b2252;">"4"</span> <span style="color: #8b2252;">"$"</span><span style="color: #909183;">)</span>
    <span style="color: #909183;">(</span><span style="color: #8b2252;">"5"</span> <span style="color: #8b2252;">"%"</span><span style="color: #909183;">)</span>
    <span style="color: #909183;">(</span><span style="color: #8b2252;">"6"</span> <span style="color: #8b2252;">"^"</span><span style="color: #909183;">)</span>
    <span style="color: #909183;">(</span><span style="color: #8b2252;">"7"</span> <span style="color: #8b2252;">"&amp;"</span><span style="color: #909183;">)</span>
    <span style="color: #909183;">(</span><span style="color: #8b2252;">"8"</span> <span style="color: #8b2252;">"*"</span><span style="color: #909183;">)</span>
    <span style="color: #909183;">(</span><span style="color: #8b2252;">"9"</span> <span style="color: #8b2252;">"("</span><span style="color: #909183;">)</span>
    <span style="color: #909183;">(</span><span style="color: #8b2252;">"0"</span> <span style="color: #8b2252;">")"</span><span style="color: #909183;">)</span>
    <span style="color: #909183;">(</span><span style="color: #8b2252;">"!"</span> <span style="color: #8b2252;">"1"</span><span style="color: #909183;">)</span>
    <span style="color: #909183;">(</span><span style="color: #8b2252;">"@"</span> <span style="color: #8b2252;">"2"</span><span style="color: #909183;">)</span>
    <span style="color: #909183;">(</span><span style="color: #8b2252;">"#"</span> <span style="color: #8b2252;">"3"</span><span style="color: #909183;">)</span>
    <span style="color: #909183;">(</span><span style="color: #8b2252;">"$"</span> <span style="color: #8b2252;">"4"</span><span style="color: #909183;">)</span>
    <span style="color: #909183;">(</span><span style="color: #8b2252;">"%"</span> <span style="color: #8b2252;">"5"</span><span style="color: #909183;">)</span>
    <span style="color: #909183;">(</span><span style="color: #8b2252;">"^"</span> <span style="color: #8b2252;">"6"</span><span style="color: #909183;">)</span>
    <span style="color: #909183;">(</span><span style="color: #8b2252;">"&amp;"</span> <span style="color: #8b2252;">"7"</span><span style="color: #909183;">)</span>
    <span style="color: #909183;">(</span><span style="color: #8b2252;">"*"</span> <span style="color: #8b2252;">"8"</span><span style="color: #909183;">)</span>
    <span style="color: #909183;">(</span><span style="color: #8b2252;">"("</span> <span style="color: #8b2252;">"9"</span><span style="color: #909183;">)</span>
    <span style="color: #909183;">(</span><span style="color: #8b2252;">")"</span> <span style="color: #8b2252;">"0"</span><span style="color: #909183;">)</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>

<span style="color: #707183;">(</span><span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">mb-str-to-unibyte-char</span> <span style="color: #7388d6;">(</span>s<span style="color: #7388d6;">)</span>
  <span style="color: #8b2252;">"Translate first multibyte char in s to internal unibyte representation."</span>
  <span style="color: #7388d6;">(</span>multibyte-char-to-unibyte <span style="color: #909183;">(</span>string-to-char s<span style="color: #909183;">)</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>

<span style="color: #707183;">(</span><span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">remap-keyboard</span> <span style="color: #7388d6;">(</span>mapping<span style="color: #7388d6;">)</span>
  <span style="color: #8b2252;">"Setup keyboard translate table using a list of pairwise key-mappings."</span>
  <span style="color: #7388d6;">(</span>mapcar
   <span style="color: #909183;">(</span><span style="color: #a020f0;">lambda</span> <span style="color: #709870;">(</span>mb-string-pair<span style="color: #709870;">)</span>
     <span style="color: #709870;">(</span>apply <span style="color: #a020f0;">#'</span><span style="color: #008b8b;">keyboard-translate</span>
        <span style="color: #907373;">(</span>mapcar <span style="color: #a020f0;">#'</span><span style="color: #008b8b;">mb-str-to-unibyte-char</span> mb-string-pair<span style="color: #907373;">)</span><span style="color: #709870;">)</span><span style="color: #909183;">)</span>
   mapping<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>

<span style="color: #707183;">(</span>remap-keyboard *unshifted-special-chars-layout*<span style="color: #707183;">)</span>
</pre>
</div>

<p>
这里的按键映射不一定按照这个来配置，你可以选择几个比较常用的设置一下。
</p>
</div>
</div>

<div id="outline-container-org0dd288b" class="outline-2">
<h2 id="org0dd288b">在 Emacs 中禁用鼠标</h2>
<div class="outline-text-2" id="text-org0dd288b">
<p>
为什么要在 Emacs 中禁用鼠标？我想对于 Macbook 用户来说，这是很有意义的。
就我来说，我在编辑的时候经常会不经意的碰到触摸板，这就导致我的光标经常会跑到其他地方，然而我要找到我刚才编辑的地方就会很麻烦。虽然这种事情发生的频率不高，但是非常的烦人。
</p>

<p>
另外一点，不用鼠标也有其他的好处。这会强迫我们使用键盘去操作所有的事情，通常这样会更加的快。如果我们习惯了使用键盘操作所有的事情，我相信效率上会提高一大截。
</p>

<p>
设置的代码，我是直接 copy 的<a href="http://endlessparentheses.com/disable-mouse-only-inside-emacs.html">这里</a>。
</p>

<div class="org-src-container">
<pre class="src src-elisp"><span style="color: #707183;">(</span><span style="color: #a020f0;">define-minor-mode</span> <span style="color: #0000ff;">disable-mouse-mode</span>
  <span style="color: #8b2252;">"A minor-mode that disables all mouse keybinds."</span>
  <span style="color: #483d8b;">:global</span> t
  <span style="color: #483d8b;">:lighter</span> <span style="color: #8b2252;">"Mouse&#128045;"</span>
  <span style="color: #483d8b;">:keymap</span> <span style="color: #7388d6;">(</span>make-sparse-keymap<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>

<span style="color: #707183;">(</span><span style="color: #a020f0;">dolist</span> <span style="color: #7388d6;">(</span>type <span style="color: #a020f0;">'</span><span style="color: #909183;">(</span>mouse down-mouse drag-mouse
                      double-mouse triple-mouse<span style="color: #909183;">)</span><span style="color: #7388d6;">)</span>
  <span style="color: #7388d6;">(</span><span style="color: #a020f0;">dolist</span> <span style="color: #909183;">(</span>prefix <span style="color: #a020f0;">'</span><span style="color: #709870;">(</span><span style="color: #8b2252;">""</span> C- M- S- M-S- C-M- C-S- C-M-S-<span style="color: #709870;">)</span><span style="color: #909183;">)</span>
    <span style="color: #b22222;">;; </span><span style="color: #b22222;">Yes, I actually HAD to go up to 7 here.</span>
    <span style="color: #909183;">(</span><span style="color: #a020f0;">dotimes</span> <span style="color: #709870;">(</span>n 7<span style="color: #709870;">)</span>
      <span style="color: #709870;">(</span><span style="color: #a020f0;">let</span> <span style="color: #907373;">(</span><span style="color: #6276ba;">(</span>k <span style="color: #858580;">(</span>format <span style="color: #8b2252;">"%s%s-%s"</span> prefix type n<span style="color: #858580;">)</span><span style="color: #6276ba;">)</span><span style="color: #907373;">)</span>
        <span style="color: #907373;">(</span>define-key disable-mouse-mode-map
          <span style="color: #6276ba;">(</span>vector <span style="color: #858580;">(</span>intern k<span style="color: #858580;">)</span><span style="color: #6276ba;">)</span> <span style="color: #a020f0;">#'</span><span style="color: #008b8b;">ignore</span><span style="color: #907373;">)</span><span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org8f609af" class="outline-2">
<h2 id="org8f609af">交换 C-w 和 M-w 的命令绑定</h2>
<div class="outline-text-2" id="text-org8f609af">
<p>
在编辑的过程中我发现，复制一块区域的次数要多于使用剪切操作。所以交换了这两个按键。
因为 C-w 绑定到了 <code>whole-line-or-region-kill-region</code> 上，而 M-w 到了 <code>whole-line-or-region-kill-ring-save</code>
</p>

<div class="org-src-container">
<pre class="src src-elisp"><span style="color: #707183;">(</span>global-set-key <span style="color: #7388d6;">(</span>kbd <span style="color: #8b2252;">"C-w"</span><span style="color: #7388d6;">)</span> <span style="color: #a020f0;">'</span><span style="color: #008b8b;">whole-line-or-region-kill-ring-save</span><span style="color: #707183;">)</span>
<span style="color: #707183;">(</span>global-set-key <span style="color: #7388d6;">(</span>kbd <span style="color: #8b2252;">"M-w"</span><span style="color: #7388d6;">)</span> <span style="color: #a020f0;">'</span><span style="color: #008b8b;">whole-line-or-region-kill-region</span><span style="color: #707183;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org2eb6c59" class="outline-2">
<h2 id="org2eb6c59">截图</h2>
<div class="outline-text-2" id="text-org2eb6c59">
<p>
最近在上公开课的时候，经常需要停下来记录一些重点，这就导致效率有些低，所以我想能不能先截图。这样是快了很多，但是对我来说也不方便。
因为我是使用的 Org 来记录的笔记，所以要找到刚才截的图然后插入到 Org 笔记中就不是很方便了，而且图片存放的文件需要手动的建立。所以这些能自动化就好了。
</p>

<p>
我在网上找了一个截图的函数，稍加修改了一下。
</p>

<div class="org-src-container">
<pre class="src src-elisp"><span style="color: #b22222;">;;; </span><span style="color: #b22222;">https://emacs-china.org/t/org-mode/79</span>
<span style="color: #707183;">(</span><span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">my-org-screenshot</span> <span style="color: #7388d6;">()</span>
  <span style="color: #8b2252;">"Take a screenshot into a time stamped unique-named file in the</span>
<span style="color: #8b2252;">same directory as the org-buffer and insert a link to this file."</span>
  <span style="color: #7388d6;">(</span><span style="color: #a020f0;">interactive</span><span style="color: #7388d6;">)</span>
  <span style="color: #7388d6;">(</span>org-display-inline-images<span style="color: #7388d6;">)</span>

  <span style="color: #7388d6;">(</span><span style="color: #a020f0;">setq</span> filename
        <span style="color: #909183;">(</span>concat
         <span style="color: #709870;">(</span>make-temp-name
          <span style="color: #907373;">(</span>concat <span style="color: #6276ba;">(</span>file-name-directory <span style="color: #858580;">(</span>buffer-file-name<span style="color: #858580;">)</span><span style="color: #6276ba;">)</span>
                  <span style="color: #8b2252;">"/imgs/"</span>
                  <span style="color: #6276ba;">(</span>format-time-string <span style="color: #8b2252;">"%Y%m%d_%H%M%S_"</span><span style="color: #6276ba;">)</span><span style="color: #907373;">)</span> <span style="color: #709870;">)</span> <span style="color: #8b2252;">".png"</span><span style="color: #909183;">)</span><span style="color: #7388d6;">)</span>
  <span style="color: #7388d6;">(</span><span style="color: #a020f0;">unless</span> <span style="color: #909183;">(</span>file-exists-p <span style="color: #709870;">(</span>file-name-directory filename<span style="color: #709870;">)</span><span style="color: #909183;">)</span>
    <span style="color: #909183;">(</span>make-directory <span style="color: #709870;">(</span>file-name-directory filename<span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388d6;">)</span>
                                        <span style="color: #b22222;">; </span><span style="color: #b22222;">take screenshot</span>
  <span style="color: #7388d6;">(</span><span style="color: #a020f0;">if</span> <span style="color: #909183;">(</span>eq system-type <span style="color: #a020f0;">'</span><span style="color: #008b8b;">darwin</span><span style="color: #909183;">)</span>
      <span style="color: #909183;">(</span><span style="color: #a020f0;">progn</span>
        <span style="color: #709870;">(</span>call-process-shell-command <span style="color: #8b2252;">"screencapture"</span> nil nil nil nil <span style="color: #8b2252;">" -s "</span> <span style="color: #907373;">(</span>concat
                                                                            <span style="color: #8b2252;">"</span><span style="color: #8b2252; font-weight: bold;">\</span><span style="color: #8b2252; font-weight: bold;">"</span><span style="color: #8b2252;">"</span> filename <span style="color: #8b2252;">"</span><span style="color: #8b2252; font-weight: bold;">\</span><span style="color: #8b2252; font-weight: bold;">"</span><span style="color: #8b2252;">"</span> <span style="color: #907373;">)</span><span style="color: #709870;">)</span>
        <span style="color: #709870;">(</span>call-process-shell-command <span style="color: #8b2252;">"convert"</span> nil nil nil nil <span style="color: #907373;">(</span>concat <span style="color: #8b2252;">"</span><span style="color: #8b2252; font-weight: bold;">\</span><span style="color: #8b2252; font-weight: bold;">"</span><span style="color: #8b2252;">"</span> filename <span style="color: #8b2252;">"</span><span style="color: #8b2252; font-weight: bold;">\</span><span style="color: #8b2252; font-weight: bold;">"</span><span style="color: #8b2252;"> -resize  </span><span style="color: #8b2252; font-weight: bold;">\</span><span style="color: #8b2252; font-weight: bold;">"</span><span style="color: #8b2252;">50%</span><span style="color: #8b2252; font-weight: bold;">\</span><span style="color: #8b2252; font-weight: bold;">"</span><span style="color: #8b2252;">"</span> <span style="color: #907373;">)</span> <span style="color: #907373;">(</span>concat <span style="color: #8b2252;">"</span><span style="color: #8b2252; font-weight: bold;">\</span><span style="color: #8b2252; font-weight: bold;">"</span><span style="color: #8b2252;">"</span> filename <span style="color: #8b2252;">"</span><span style="color: #8b2252; font-weight: bold;">\</span><span style="color: #8b2252; font-weight: bold;">"</span><span style="color: #8b2252;">"</span> <span style="color: #907373;">)</span><span style="color: #709870;">)</span>
        <span style="color: #909183;">)</span><span style="color: #7388d6;">)</span>

  <span style="color: #7388d6;">(</span><span style="color: #a020f0;">setq</span> relative-dir <span style="color: #909183;">(</span>concat <span style="color: #8b2252;">"./imgs/"</span> <span style="color: #709870;">(</span>file-name-nondirectory filename<span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388d6;">)</span>
  <span style="color: #7388d6;">(</span><span style="color: #a020f0;">if</span> <span style="color: #909183;">(</span>file-exists-p filename<span style="color: #909183;">)</span>
      <span style="color: #909183;">(</span>insert <span style="color: #709870;">(</span>concat <span style="color: #8b2252;">"[[file:"</span> relative-dir <span style="color: #8b2252;">"]]"</span><span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388d6;">)</span>
  <span style="color: #7388d6;">(</span>org-display-inline-images<span style="color: #7388d6;">)</span>
  <span style="color: #707183;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org3498cee" class="outline-2">
<h2 id="org3498cee">Emacs 的键盘宏</h2>
<div class="outline-text-2" id="text-org3498cee">
<p>
使用键盘宏可以极大的提高我们的效率。我感觉需要单独写一个文章来介绍这个技巧。
这里介绍了如何使用，保存，以及绑定快捷键。具体看<a href="./emacs-macro.html">这里</a>。
</p>
</div>
</div>
<div id="outline-container-org1fc0cc9" class="outline-2">
<h2 id="org1fc0cc9">new-line-and-indent</h2>
<div class="outline-text-2" id="text-org1fc0cc9">
<p>
在写代码的时候，我们经常需要自动缩进，而不是回到下一行的开头。这时我们就需要这个函数了，
<b>new-line-and-indent</b> 。我们可以直接使用快捷键 <b>C-j</b> 。也可以绑定到 RETURN 键上。
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #707183;">(</span>add-hook <span style="color: #a020f0;">'</span><span style="color: #008b8b;">lisp-mode-hook</span> <span style="color: #a020f0;">'</span><span style="color: #7388d6;">(</span>lambda <span style="color: #909183;">()</span>
  <span style="color: #909183;">(</span>local-set-key <span style="color: #709870;">(</span>kbd <span style="color: #8b2252;">"RET"</span><span style="color: #709870;">)</span> <span style="color: #a020f0;">'</span><span style="color: #008b8b;">newline-and-indent</span><span style="color: #909183;">)</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org202b303" class="outline-2">
<h2 id="org202b303">Butterfly</h2>
<div class="outline-text-2" id="text-org202b303">
<p>
M-x butterfly
</p>

<p>
(animate-string "Hello world"
    (/ (window-height) 2) (- (/ (window-width) 2) 12))
</p>
</div>
</div>

<div id="outline-container-orgcc89135" class="outline-2">
<h2 id="orgcc89135">快速生成有序序列</h2>
<div class="outline-text-2" id="text-orgcc89135">
<p>
如果我们想生成如下效果的序列：
</p>
<pre class="example">
Step 1 of 5: ...
Step 2 of 5: ...
Step 3 of 5: ...
Step 4 of 5: ...
Step 5 of 5: ...
</pre>

<p>
我们就可以借助键盘宏了。
</p>
<ul class="org-ul">
<li><b>C-x C-k C-f</b> 例如 "- Step %d of 5:"</li>
<li>按下 <b>F3</b> 开始宏记录</li>
<li>再次按下 F3 开始插入第一个计数（默认为 0），按下 C-x C-k C-c 可以更改默认值</li>
<li>按 return 键，到下一行</li>
<li>按下 F4 结束宏记录</li>
<li>然后多次按 F4 就可以了</li>
<li>或者按 C-u &lt;次数&gt; F4</li>
</ul>

<p>
根据这个我写了一个函数可以自动做这件事了：
</p>

<div class="org-src-container">
<pre class="src src-elisp"><span style="color: #707183;">(</span><span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">auto-sequence</span> <span style="color: #7388d6;">(</span>format start end<span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span><span style="color: #a020f0;">interactive</span> <span style="color: #8b2252;">"sSequence format is? </span><span style="color: #8b2252; font-weight: bold;">\</span><span style="color: #8b2252; font-weight: bold;">n</span><span style="color: #8b2252;">nEnter start number: </span><span style="color: #8b2252; font-weight: bold;">\</span><span style="color: #8b2252; font-weight: bold;">n</span><span style="color: #8b2252;">nEnter end number:"</span><span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">(</span><span style="color: #a020f0;">progn</span>
      <span style="color: #909183;">(</span>kmacro-set-format format<span style="color: #909183;">)</span>
      <span style="color: #909183;">(</span>kmacro-set-counter start<span style="color: #909183;">)</span>
      <span style="color: #909183;">(</span><span style="color: #a020f0;">while</span> <span style="color: #709870;">(</span>&lt; start <span style="color: #907373;">(</span>+ 1 end<span style="color: #907373;">)</span><span style="color: #709870;">)</span>
        <span style="color: #709870;">(</span>execute-kbd-macro <span style="color: #907373;">(</span>read-kbd-macro <span style="color: #8b2252;">"&lt;f3&gt; RET"</span><span style="color: #907373;">)</span><span style="color: #709870;">)</span>
        <span style="color: #709870;">(</span><span style="color: #a020f0;">setq</span> start <span style="color: #907373;">(</span>+ 1 start<span style="color: #907373;">)</span><span style="color: #709870;">)</span><span style="color: #909183;">)</span>
      <span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
</pre>
</div>

<p>
我们只需要提供 format, start number, end number 就可以了。
</p>
</div>
</div>

<div id="outline-container-org41a7a4f" class="outline-2">
<h2 id="org41a7a4f">C-x r t string-rectangle</h2>
<div class="outline-text-2" id="text-org41a7a4f">
<p>
这里我们说下 <b>C-x r t</b> 这个命令。举个例子一看就明白了。
</p>
<pre class="example">
var a = 1
var b = 2
var c = 3
</pre>
<p>
改成
</p>
<pre class="example">
this.a = 1
this.b = 2
this.c = 3
</pre>
<p>
我们就可以用这个命令了。具体的可以看 <a href="http://emacsrocks.com/e01.html">这里</a>。
</p>
</div>
</div>
<div id="outline-container-orgd162667" class="outline-2">
<h2 id="orgd162667">MULTIPLE CURSORS</h2>
<div class="outline-text-2" id="text-orgd162667">
<p>
Click <a href="https://github.com/magnars/multiple-cursors.el">this</a>.
</p>

<ul class="org-ul">
<li>第一步，先标记一个 region 否则选择当前位置。</li>
<li>第二步，使用命令 C-&gt; 或者 C-+ 来 mark next like this</li>
</ul>
</div>
</div>
<div id="outline-container-orgf6eb023" class="outline-2">
<h2 id="orgf6eb023">xah math input (<a href="http://ergoemacs.org/emacs/xmsi-math-symbols-input.html">here</a>)</h2>
<div class="outline-text-2" id="text-orgf6eb023">
<p>
有了这个我们就可以非常方便的输入一些常用的数学符号，而不是使用 latex 插入。
例如我们输入 字母 p，然后按 S-&lt;SPC&gt; 就转化为了 π。
</p>

<p>
在后来发现在写代码的时候经常会按到这个快捷键，所以我只在 org mode 中打开。
</p>

<div class="org-src-container">
<pre class="src src-lisp"><span style="color: #707183;">(</span>add-hook 'org-mode-hook #'xah-math-input-mode-on<span style="color: #707183;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org12148a9" class="outline-2">
<h2 id="org12148a9">自动在中英文之间添加空格</h2>
<div class="outline-text-2" id="text-org12148a9">
<p>
我们可以使用 <a href="https://github.com/coldnew/pangu-spacing">pangu-spacing</a> 这个 package。
</p>
</div>
</div>
</div>
<div id="postamble" class="status">
<script type="text/javascript" src="https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/datejs/1.0/date.min.js"></script>

<script>
var base_url = 'https://api.github.com';
var title = document.title;
var owner = 'yydai';
var repo = 'yydai.github.io';
var search_issues = base_url + '/search/issues?q=' + title + '+user:' + owner + '+label:blog'+ '+state:open';

console.log("search_issues = "+ search_issues);

function test() {
  jQuery.ajax({
      type: 'GET',
      async: false,
      dataType:'json',
      url: search_issues,
      success:function(data) {
         result = data;
      }
  });
  return result;
}
var result = test();
var items = result.items[0];
if(jQuery.isEmptyObject(items)) {
    create(title);
} else {
    html_url = items.html_url;
	document.body.innerHTML +=
'<div id="comments"><h2>Comments</h2><div id="header">Want to leave a comment? Visit <a href="'+ html_url + '"> this issue page on GitHub</a> (you will need a GitHub account).</div></div>'
}


function create(title) {
	var create_url = 'https://blog-api-server.herokuapp.com/issues?title=' + title + '&labels=blog&body=Welcome to leave comments here.&owner=yydai&repo=yydai.github.io&auth=eXlkYWk6ZGVpc3Q5MjgxNw=='

	jQuery.ajax({
      type: 'GET',
      async: false,
      dataType:'json',
      url: create_url,
      success:function(data) {
         result = data;
      }
  });
}


console.log("total_count = " + result.total_count);
if(result.total_count == 1) {
    var comments_url = result.items[0].comments_url;
} else if (result.total_count == 0) {
        // create a new issue
    //create(title);
} else {
        // result not only
        alert('Cannot load the comments.');
}

function loadComments(data) {
    for (var i=0; i<data.length; i++) {
      var cuser = data[i].user.login;
      var cuserlink = 'https://' + repo + '/' + data[i].user.login;
      var clink = comments_url + '#issuecomment-' + data[i].url.substring(data[i].url.lastIndexOf("/")+1);
      var cbody = data[i].body_html;
      var cavatarlink = data[i].user.avatar_url;
      var cdate = Date.parse(data[i].created_at).toString('yyyy-MM-dd HH:mm:ss');

      var code = '<div class="comment"><div class="commentheader"><div class="commentgravatar">' + '<img src="' + cavatarlink + '" alt="" width="20" height="20">' + '</div><a class="commentuser" href=\""+ cuserlink + "\">' + cuser + '</a><a class="commentdate" href=\"" + clink + "\">' + cdate + '</a></div><div class="commentbody">' + cbody + '</div></div>';

      $('#comments').append(code);
    }
  }


var comments_api = comments_url + '?per_page=100';
console.log("comments api: " + comments_api);
$.ajax(comments_api, {
    headers: {Accept: 'application/vnd.github.full+json'},
    dataType: 'json',
    success: function(msg){
      loadComments(msg);
   }
  });


</script>

<hr />
 <div class='footer'>
© 2017 yydai<br/>
Email: dai92817@icloud.com
</div>
</div>
</body>
</html>
