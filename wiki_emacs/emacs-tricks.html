<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2019-06-21 Fri 01:24 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Emacs 的一些技巧</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="ying dai" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>

<link rel=
<script src='https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js'></script>
<link rel='stylesheet' type='text/css' href='https://gongzhitaao.org/orgcss/org.css' />
<link rel='stylesheet' href='../css/custom.css' typbe='text/css'/>
<link rel='shortcut icon' type='image/x-icon' href='/favicon.ico'>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src='https://www.googletagmanager.com/gtag/js?id=UA-111585106-1'></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-111585106-1');
</script>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="preamble" class="status">

<div class='nav'>
<div class='blog' style='text-align:right'>
<a href='/index.html'> Home </a> | <a href='/gallery_books/index.html'> Books </a> | <a href='/gallery_movies/index.html'> Movies </a> | <a href='/contact.html'> About </a>
</div>
</div>
</div>
<div id="content">
<h1 class="title">Emacs 的一些技巧</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#orgb2882ba">1. 设置一个标记(Mark)</a></li>
<li><a href="#orgfb51c85">2. 快速的选中一行</a></li>
<li><a href="#org8999e6e">3. org mode 发布网站的问题</a></li>
<li><a href="#org60dba9e">4. Apropos</a></li>
<li><a href="#org4e6d5fb">5. 跳到本行第一个非空格字符上</a></li>
<li><a href="#org6c7175e">6. 特殊字符与数字键交换</a></li>
<li><a href="#orgc3399f6">7. 在 Emacs 中禁用鼠标</a></li>
<li><a href="#orgee43c5b">8. 交换 C-w 和 M-w 的命令绑定</a></li>
<li><a href="#org6a9e802">9. 截图</a></li>
<li><a href="#orgcc510d5">10. 拖拽图片到 Org mode</a></li>
<li><a href="#orgb59129c">11. Emacs 的键盘宏</a></li>
<li><a href="#orga08fff6">12. new-line-and-indent</a></li>
<li><a href="#org0e32ef9">13. Butterfly</a></li>
<li><a href="#org02672b0">14. 快速生成有序序列</a></li>
<li><a href="#org751ed96">15. C-x r t string-rectangle</a></li>
<li><a href="#org2367969">16. MULTIPLE CURSORS</a></li>
<li><a href="#org497a4ce">17. xah math input (here)</a></li>
<li><a href="#orgb75b417">18. 自动在中英文之间添加空格</a></li>
<li><a href="#org9c2f80d">19. 禁用特定模式下的快捷键绑定</a></li>
<li><a href="#org9186d74">20. &amp;key</a></li>
<li><a href="#org2676647">21. Tramp 的使用</a></li>
<li><a href="#org85555d5">22. Emacs 中行操作</a></li>
<li><a href="#org06808d1">23. Emacs 模糊打开文件</a></li>
<li><a href="#org80c5dd3">24. Emacs Dired mode</a></li>
<li><a href="#orgddbb8f4">25. 定义 toggle/cycle command（参考）</a></li>
<li><a href="#org3a40834">26. Emacs &#x2013;script</a></li>
<li><a href="#orgea87798">27. Install and Update packages</a></li>
<li><a href="#orgf16813a">28. Emacs List 的操作</a></li>
<li><a href="#orgb7747eb">29. Elisp 代码文件分割线</a></li>
<li><a href="#org97b453f">30. 使用 Deft 快速的记笔记</a></li>
<li><a href="#orgbdeb207">31. MULTIPLE CHOICES IN YASNIPPETS</a></li>
<li><a href="#org62570da">32. org-indent-mode</a></li>
<li><a href="#org6a526dc">33. zencoding mode</a></li>
<li><a href="#orga04b100">34. expand &amp; mark</a></li>
<li><a href="#org707b2cd">35. 下载远程图片到 Org 文件</a></li>
</ul>
</div>
</div>
<hr />
<div id="outline-container-orgb2882ba" class="outline-2">
<h2 id="orgb2882ba">1. 设置一个标记(Mark)</h2>
<div class="outline-text-2" id="text-orgb2882ba">
<p>
命令是 <code>set-mark-command</code>, 绑定的快捷键为 C-@, C-., C-SPC，推荐使用 <code>C-.</code> 。 因为 C-SPC 与输入法有冲突，C-@比较难按。
再次按下 <code>C-.</code> 会取消标记。
</p>

<p>
设置矩形区域标记，使用 C-x &lt;spc&gt;, visit <a href="https://www.gnu.org/software/emacs/manual/html_node/emacs/Rectangles.html">here</a>.
</p>
</div>
</div>

<div id="outline-container-orgfb51c85" class="outline-2">
<h2 id="orgfb51c85">2. 快速的选中一行</h2>
<div class="outline-text-2" id="text-orgfb51c85">
<p>
现在一行的开头设置一个 <code>mark</code> ，然后移动到行尾。即：
</p>
<div class="org-src-container">
<pre class="src src-shell"><code class="shell">C-a C-. C-e
</code></pre>
</div>

<p>
同样的原理，我们可以在任何一个位置设置一个 mark，然后选中其前面或后面的文本。
</p>
</div>
</div>

<div id="outline-container-org8999e6e" class="outline-2">
<h2 id="org8999e6e">3. org mode 发布网站的问题</h2>
<div class="outline-text-2" id="text-org8999e6e">
<p>
在 org 中有时需要写类似这种 <code>A_B</code> 的东西，但是在解释成 html 后就成了下标了。
解决的方法可以写成 <code>#+OPTIONS: ^:nil</code>
</p>

<p>
另外一个问题时，在使用 publish 发布的时候，如何禁用 cache，可以这样：
</p>

<div class="org-src-container">
<pre class="src src-lisp"><code class="lisp"><span style="color: #707183;">(</span>setq org-publish-use-timestamps-flag nil<span style="color: #707183;">)</span>
</code></pre>
</div>
</div>
</div>

<div id="outline-container-org60dba9e" class="outline-2">
<h2 id="org60dba9e">4. Apropos</h2>
<div class="outline-text-2" id="text-org60dba9e">
<p>
Finally, there are two powerhouse commands that you’ll want to
turn to when all else fails. For example, when you’re fairly
certain that Emacs has commands for doing something, but aren’t
able to find it using any of the usual methods. Say, you want to
learn how to edit rectangular regions in Emacs, but can’t remember
the commands. That’s where the apropos commands come in. Two
important ones are <code>C-h a</code>, for <code>apropos-command</code>, and <code>C-h d</code>, for
<code>apropos-documentation</code>.
</p>

<p>
For example, pressing <code>C-h a RET rectangle RET</code> will list all
commands containing the string <code>rectangle</code>, along with their key
bindings. Then you can quickly recall that the key binding for
<code>kill-rectangle</code> is <code>C-x r k</code>, and that most of the other rectangle
commands also begin with <code>C-x r</code>. Note that the “pattern” you
provide to these <code>apropos</code> commands can also be a regular
expression.
</p>
</div>
</div>

<div id="outline-container-org4e6d5fb" class="outline-2">
<h2 id="org4e6d5fb">5. 跳到本行第一个非空格字符上</h2>
<div class="outline-text-2" id="text-org4e6d5fb">
<p>
对应的命令是 <code>back-to-indentation</code> ，默认绑定的快捷键是 <code>M-m</code> 。
</p>
</div>
</div>

<div id="outline-container-org6c7175e" class="outline-2">
<h2 id="org6c7175e">6. 特殊字符与数字键交换</h2>
<div class="outline-text-2" id="text-org6c7175e">
<p>
在几乎所有的语言中，我们要输入很多的特殊字符，例如
</p>
<div class="org-src-container">
<pre class="src src-python"><code class="python">! @ <span style="color: #204A87;"># </span><span style="color: #204A87;">$ % ^ &amp; * ( )</span>
</code></pre>
</div>

<p>
但是这种字符的输入有些麻烦，需要按住 shift 键才行，下面我们就优化一下这种操作。
</p>

<div class="org-src-container">
<pre class="src src-elisp"><code class="elisp"><span style="color: #707183;">(</span><span style="color: #A52A2A; font-weight: bold;">defvar</span> <span style="color: #0084C8; font-weight: bold;">*unshifted-special-chars-layout*</span>
  <span style="color: #A52A2A; font-weight: bold;">'</span><span style="color: #7388d6;">(</span><span style="color: #909183;">(</span><span style="color: #4E9A06;">"1"</span> <span style="color: #4E9A06;">"!"</span><span style="color: #909183;">)</span> <span style="color: #204A87;">; </span><span style="color: #204A87;">from -&gt; to</span>
    <span style="color: #909183;">(</span><span style="color: #4E9A06;">"2"</span> <span style="color: #4E9A06;">"@"</span><span style="color: #909183;">)</span>
    <span style="color: #909183;">(</span><span style="color: #4E9A06;">"3"</span> <span style="color: #4E9A06;">"#"</span><span style="color: #909183;">)</span>
    <span style="color: #909183;">(</span><span style="color: #4E9A06;">"4"</span> <span style="color: #4E9A06;">"$"</span><span style="color: #909183;">)</span>
    <span style="color: #909183;">(</span><span style="color: #4E9A06;">"5"</span> <span style="color: #4E9A06;">"%"</span><span style="color: #909183;">)</span>
    <span style="color: #909183;">(</span><span style="color: #4E9A06;">"6"</span> <span style="color: #4E9A06;">"^"</span><span style="color: #909183;">)</span>
    <span style="color: #909183;">(</span><span style="color: #4E9A06;">"7"</span> <span style="color: #4E9A06;">"&amp;"</span><span style="color: #909183;">)</span>
    <span style="color: #909183;">(</span><span style="color: #4E9A06;">"8"</span> <span style="color: #4E9A06;">"*"</span><span style="color: #909183;">)</span>
    <span style="color: #909183;">(</span><span style="color: #4E9A06;">"9"</span> <span style="color: #4E9A06;">"("</span><span style="color: #909183;">)</span>
    <span style="color: #909183;">(</span><span style="color: #4E9A06;">"0"</span> <span style="color: #4E9A06;">")"</span><span style="color: #909183;">)</span>
    <span style="color: #909183;">(</span><span style="color: #4E9A06;">"!"</span> <span style="color: #4E9A06;">"1"</span><span style="color: #909183;">)</span>
    <span style="color: #909183;">(</span><span style="color: #4E9A06;">"@"</span> <span style="color: #4E9A06;">"2"</span><span style="color: #909183;">)</span>
    <span style="color: #909183;">(</span><span style="color: #4E9A06;">"#"</span> <span style="color: #4E9A06;">"3"</span><span style="color: #909183;">)</span>
    <span style="color: #909183;">(</span><span style="color: #4E9A06;">"$"</span> <span style="color: #4E9A06;">"4"</span><span style="color: #909183;">)</span>
    <span style="color: #909183;">(</span><span style="color: #4E9A06;">"%"</span> <span style="color: #4E9A06;">"5"</span><span style="color: #909183;">)</span>
    <span style="color: #909183;">(</span><span style="color: #4E9A06;">"^"</span> <span style="color: #4E9A06;">"6"</span><span style="color: #909183;">)</span>
    <span style="color: #909183;">(</span><span style="color: #4E9A06;">"&amp;"</span> <span style="color: #4E9A06;">"7"</span><span style="color: #909183;">)</span>
    <span style="color: #909183;">(</span><span style="color: #4E9A06;">"*"</span> <span style="color: #4E9A06;">"8"</span><span style="color: #909183;">)</span>
    <span style="color: #909183;">(</span><span style="color: #4E9A06;">"("</span> <span style="color: #4E9A06;">"9"</span><span style="color: #909183;">)</span>
    <span style="color: #909183;">(</span><span style="color: #4E9A06;">")"</span> <span style="color: #4E9A06;">"0"</span><span style="color: #909183;">)</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>

<span style="color: #707183;">(</span><span style="color: #A52A2A; font-weight: bold;">defun</span> <span style="color: #00578E; font-weight: bold;">mb-str-to-unibyte-char</span> <span style="color: #7388d6;">(</span>s<span style="color: #7388d6;">)</span>
  <span style="color: #4E9A06;">"Translate first multibyte char in s to internal unibyte representation."</span>
  <span style="color: #7388d6;">(</span>multibyte-char-to-unibyte <span style="color: #909183;">(</span>string-to-char s<span style="color: #909183;">)</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>

<span style="color: #707183;">(</span><span style="color: #A52A2A; font-weight: bold;">defun</span> <span style="color: #00578E; font-weight: bold;">remap-keyboard</span> <span style="color: #7388d6;">(</span>mapping<span style="color: #7388d6;">)</span>
  <span style="color: #4E9A06;">"Setup keyboard translate table using a list of pairwise key-mappings."</span>
  <span style="color: #7388d6;">(</span>mapcar
   <span style="color: #909183;">(</span><span style="color: #A52A2A; font-weight: bold;">lambda</span> <span style="color: #709870;">(</span>mb-string-pair<span style="color: #709870;">)</span>
     <span style="color: #709870;">(</span>apply <span style="color: #A52A2A; font-weight: bold;">#'</span><span style="color: #F5666D;">keyboard-translate</span>
        <span style="color: #907373;">(</span>mapcar <span style="color: #A52A2A; font-weight: bold;">#'</span><span style="color: #F5666D;">mb-str-to-unibyte-char</span> mb-string-pair<span style="color: #907373;">)</span><span style="color: #709870;">)</span><span style="color: #909183;">)</span>
   mapping<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>

<span style="color: #707183;">(</span>remap-keyboard *unshifted-special-chars-layout*<span style="color: #707183;">)</span>
</code></pre>
</div>

<p>
这里的按键映射不一定按照这个来配置，你可以选择几个比较常用的设置一下。
</p>
</div>
</div>

<div id="outline-container-orgc3399f6" class="outline-2">
<h2 id="orgc3399f6">7. 在 Emacs 中禁用鼠标</h2>
<div class="outline-text-2" id="text-orgc3399f6">
<p>
为什么要在 Emacs 中禁用鼠标？我想对于 Macbook 用户来说，这是很有意义的。
就我来说，我在编辑的时候经常会不经意的碰到触摸板，这就导致我的光标经常会跑到其他地方，然而我要找到我刚才编辑的地方就会很麻烦。虽然这种事情发生的频率不高，但是非常的烦人。
</p>

<p>
另外一点，不用鼠标也有其他的好处。这会强迫我们使用键盘去操作所有的事情，通常这样会更加的快。如果我们习惯了使用键盘操作所有的事情，我相信效率上会提高一大截。
</p>

<p>
设置的代码，我是直接 copy 的<a href="http://endlessparentheses.com/disable-mouse-only-inside-emacs.html">这里</a>。
</p>

<div class="org-src-container">
<pre class="src src-elisp"><code class="elisp"><span style="color: #707183;">(</span><span style="color: #A52A2A; font-weight: bold;">define-minor-mode</span> <span style="color: #00578E; font-weight: bold;">disable-mouse-mode</span>
  <span style="color: #4E9A06;">"A minor-mode that disables all mouse keybinds."</span>
  <span style="color: #A020F0;">:global</span> t
  <span style="color: #A020F0;">:lighter</span> <span style="color: #4E9A06;">"Mouse&#128045;"</span>
  <span style="color: #A020F0;">:keymap</span> <span style="color: #7388d6;">(</span>make-sparse-keymap<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>

<span style="color: #707183;">(</span><span style="color: #A52A2A; font-weight: bold;">dolist</span> <span style="color: #7388d6;">(</span>type <span style="color: #A52A2A; font-weight: bold;">'</span><span style="color: #909183;">(</span>mouse down-mouse drag-mouse
                      double-mouse triple-mouse<span style="color: #909183;">)</span><span style="color: #7388d6;">)</span>
  <span style="color: #7388d6;">(</span><span style="color: #A52A2A; font-weight: bold;">dolist</span> <span style="color: #909183;">(</span>prefix <span style="color: #A52A2A; font-weight: bold;">'</span><span style="color: #709870;">(</span><span style="color: #4E9A06;">""</span> C- M- S- M-S- C-M- C-S- C-M-S-<span style="color: #709870;">)</span><span style="color: #909183;">)</span>
    <span style="color: #204A87;">;; </span><span style="color: #204A87;">Yes, I actually HAD to go up to 7 here.</span>
    <span style="color: #909183;">(</span><span style="color: #A52A2A; font-weight: bold;">dotimes</span> <span style="color: #709870;">(</span>n 7<span style="color: #709870;">)</span>
      <span style="color: #709870;">(</span><span style="color: #A52A2A; font-weight: bold;">let</span> <span style="color: #907373;">(</span><span style="color: #6276ba;">(</span>k <span style="color: #858580;">(</span>format <span style="color: #4E9A06;">"%s%s-%s"</span> prefix type n<span style="color: #858580;">)</span><span style="color: #6276ba;">)</span><span style="color: #907373;">)</span>
        <span style="color: #907373;">(</span>define-key disable-mouse-mode-map
          <span style="color: #6276ba;">(</span>vector <span style="color: #858580;">(</span>intern k<span style="color: #858580;">)</span><span style="color: #6276ba;">)</span> <span style="color: #A52A2A; font-weight: bold;">#'</span><span style="color: #F5666D;">ignore</span><span style="color: #907373;">)</span><span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
</code></pre>
</div>
</div>
</div>

<div id="outline-container-orgee43c5b" class="outline-2">
<h2 id="orgee43c5b">8. 交换 C-w 和 M-w 的命令绑定</h2>
<div class="outline-text-2" id="text-orgee43c5b">
<p>
在编辑的过程中我发现，复制一块区域的次数要多于使用剪切操作。所以交换了这两个按键。
因为 C-w 绑定到了 <code>whole-line-or-region-kill-region</code> 上，而 M-w 到了 <code>whole-line-or-region-kill-ring-save</code>
</p>

<div class="org-src-container">
<pre class="src src-elisp"><code class="elisp"><span style="color: #707183;">(</span>global-set-key <span style="color: #7388d6;">(</span>kbd <span style="color: #4E9A06;">"C-w"</span><span style="color: #7388d6;">)</span> <span style="color: #A52A2A; font-weight: bold;">'</span><span style="color: #F5666D;">whole-line-or-region-kill-ring-save</span><span style="color: #707183;">)</span>
<span style="color: #707183;">(</span>global-set-key <span style="color: #7388d6;">(</span>kbd <span style="color: #4E9A06;">"M-w"</span><span style="color: #7388d6;">)</span> <span style="color: #A52A2A; font-weight: bold;">'</span><span style="color: #F5666D;">whole-line-or-region-kill-region</span><span style="color: #707183;">)</span>
</code></pre>
</div>
</div>
</div>

<div id="outline-container-org6a9e802" class="outline-2">
<h2 id="org6a9e802">9. 截图</h2>
<div class="outline-text-2" id="text-org6a9e802">
<p>
最近在上公开课的时候，经常需要停下来记录一些重点，这就导致效率有些低，所以我想能不能先截图。这样是快了很多，但是对我来说也不方便。
因为我是使用的 Org 来记录的笔记，所以要找到刚才截的图然后插入到 Org 笔记中就不是很方便了，而且图片存放的文件需要手动的建立。所以这些能自动化就好了。
</p>

<p>
我在网上找了一个截图的函数，稍加修改了一下。
</p>

<div class="org-src-container">
<pre class="src src-elisp"><code class="elisp"><span style="color: #204A87;">;;; </span><span style="color: #204A87;">https://emacs-china.org/t/org-mode/79</span>
<span style="color: #707183;">(</span><span style="color: #A52A2A; font-weight: bold;">defun</span> <span style="color: #00578E; font-weight: bold;">my-org-screenshot</span> <span style="color: #7388d6;">()</span>
  <span style="color: #4E9A06;">"Take a screenshot into a time stamped unique-named file in the</span>
<span style="color: #4E9A06;">same directory as the org-buffer and insert a link to this file."</span>
  <span style="color: #7388d6;">(</span><span style="color: #A52A2A; font-weight: bold;">interactive</span><span style="color: #7388d6;">)</span>
  <span style="color: #7388d6;">(</span>org-display-inline-images<span style="color: #7388d6;">)</span>

  <span style="color: #7388d6;">(</span><span style="color: #A52A2A; font-weight: bold;">setq</span> filename
        <span style="color: #909183;">(</span>concat
         <span style="color: #709870;">(</span>make-temp-name
          <span style="color: #907373;">(</span>concat <span style="color: #6276ba;">(</span>file-name-directory <span style="color: #858580;">(</span>buffer-file-name<span style="color: #858580;">)</span><span style="color: #6276ba;">)</span>
                  <span style="color: #4E9A06;">"/imgs/"</span>
                  <span style="color: #6276ba;">(</span>format-time-string <span style="color: #4E9A06;">"%Y%m%d_%H%M%S_"</span><span style="color: #6276ba;">)</span><span style="color: #907373;">)</span> <span style="color: #709870;">)</span> <span style="color: #4E9A06;">".png"</span><span style="color: #909183;">)</span><span style="color: #7388d6;">)</span>
  <span style="color: #7388d6;">(</span><span style="color: #A52A2A; font-weight: bold;">unless</span> <span style="color: #909183;">(</span>file-exists-p <span style="color: #709870;">(</span>file-name-directory filename<span style="color: #709870;">)</span><span style="color: #909183;">)</span>
    <span style="color: #909183;">(</span>make-directory <span style="color: #709870;">(</span>file-name-directory filename<span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388d6;">)</span>
                                        <span style="color: #204A87;">; </span><span style="color: #204A87;">take screenshot</span>
  <span style="color: #7388d6;">(</span><span style="color: #A52A2A; font-weight: bold;">if</span> <span style="color: #909183;">(</span>eq system-type <span style="color: #A52A2A; font-weight: bold;">'</span><span style="color: #F5666D;">darwin</span><span style="color: #909183;">)</span>
      <span style="color: #909183;">(</span><span style="color: #A52A2A; font-weight: bold;">progn</span>
        <span style="color: #709870;">(</span>call-process-shell-command <span style="color: #4E9A06;">"screencapture"</span> nil nil nil nil <span style="color: #4E9A06;">" -s "</span> <span style="color: #907373;">(</span>concat
                                                                            <span style="color: #4E9A06;">"</span><span style="color: #4E9A06; font-weight: bold;">\</span><span style="color: #4E9A06; font-weight: bold;">"</span><span style="color: #4E9A06;">"</span> filename <span style="color: #4E9A06;">"</span><span style="color: #4E9A06; font-weight: bold;">\</span><span style="color: #4E9A06; font-weight: bold;">"</span><span style="color: #4E9A06;">"</span> <span style="color: #907373;">)</span><span style="color: #709870;">)</span>
        <span style="color: #709870;">(</span>call-process-shell-command <span style="color: #4E9A06;">"convert"</span> nil nil nil nil <span style="color: #907373;">(</span>concat <span style="color: #4E9A06;">"</span><span style="color: #4E9A06; font-weight: bold;">\</span><span style="color: #4E9A06; font-weight: bold;">"</span><span style="color: #4E9A06;">"</span> filename <span style="color: #4E9A06;">"</span><span style="color: #4E9A06; font-weight: bold;">\</span><span style="color: #4E9A06; font-weight: bold;">"</span><span style="color: #4E9A06;"> -resize  </span><span style="color: #4E9A06; font-weight: bold;">\</span><span style="color: #4E9A06; font-weight: bold;">"</span><span style="color: #4E9A06;">50%</span><span style="color: #4E9A06; font-weight: bold;">\</span><span style="color: #4E9A06; font-weight: bold;">"</span><span style="color: #4E9A06;">"</span> <span style="color: #907373;">)</span> <span style="color: #907373;">(</span>concat <span style="color: #4E9A06;">"</span><span style="color: #4E9A06; font-weight: bold;">\</span><span style="color: #4E9A06; font-weight: bold;">"</span><span style="color: #4E9A06;">"</span> filename <span style="color: #4E9A06;">"</span><span style="color: #4E9A06; font-weight: bold;">\</span><span style="color: #4E9A06; font-weight: bold;">"</span><span style="color: #4E9A06;">"</span> <span style="color: #907373;">)</span><span style="color: #709870;">)</span>
        <span style="color: #909183;">)</span><span style="color: #7388d6;">)</span>

  <span style="color: #7388d6;">(</span><span style="color: #A52A2A; font-weight: bold;">setq</span> relative-dir <span style="color: #909183;">(</span>concat <span style="color: #4E9A06;">"./imgs/"</span> <span style="color: #709870;">(</span>file-name-nondirectory filename<span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388d6;">)</span>
  <span style="color: #7388d6;">(</span><span style="color: #A52A2A; font-weight: bold;">if</span> <span style="color: #909183;">(</span>file-exists-p filename<span style="color: #909183;">)</span>
      <span style="color: #909183;">(</span>insert <span style="color: #709870;">(</span>concat <span style="color: #4E9A06;">"[[file:"</span> relative-dir <span style="color: #4E9A06;">"]]"</span><span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388d6;">)</span>
  <span style="color: #7388d6;">(</span>org-display-inline-images<span style="color: #7388d6;">)</span>
  <span style="color: #707183;">)</span>
</code></pre>
</div>
</div>
</div>
<div id="outline-container-orgcc510d5" class="outline-2">
<h2 id="orgcc510d5">10. 拖拽图片到 Org mode</h2>
<div class="outline-text-2" id="text-orgcc510d5">
<p>
有时候想把电脑上的图片引入到 Org 中会比较繁琐，所以就想能不能直接拖进来呢？后来找了个函数改了改。
这个函数会把图片 copy 到当前目录的 imgs 子目录下，如果没有 imgs 需要先创建一个。当然，你可以改下面的函数来满足自己的需求。
</p>

<div class="org-src-container">
<pre class="src src-elisp"><code class="elisp">    <span style="color: #204A87;">;; </span><span style="color: #204A87;">drag file to org mode</span>
    <span style="color: #204A87;">;; </span><span style="color: #204A87;">http://kitchingroup.cheme.cmu.edu/blog/2015/07/10/Drag-images-and-files-onto-org-mode-and-insert-a-link-to-them/</span>
<span style="color: #707183;">(</span><span style="color: #A52A2A; font-weight: bold;">defun</span> <span style="color: #00578E; font-weight: bold;">my-dnd-func</span> <span style="color: #7388d6;">(</span>event<span style="color: #7388d6;">)</span>
  <span style="color: #7388d6;">(</span><span style="color: #A52A2A; font-weight: bold;">interactive</span> <span style="color: #4E9A06;">"e"</span><span style="color: #7388d6;">)</span>
  <span style="color: #7388d6;">(</span>goto-char <span style="color: #909183;">(</span>nth 1 <span style="color: #709870;">(</span>event-start event<span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388d6;">)</span>
  <span style="color: #7388d6;">(</span>x-focus-frame nil<span style="color: #7388d6;">)</span>
  <span style="color: #7388d6;">(</span><span style="color: #A52A2A; font-weight: bold;">let*</span> <span style="color: #909183;">(</span><span style="color: #709870;">(</span>payload <span style="color: #907373;">(</span>car <span style="color: #6276ba;">(</span>last event<span style="color: #6276ba;">)</span><span style="color: #907373;">)</span><span style="color: #709870;">)</span>
         <span style="color: #709870;">(</span>type <span style="color: #907373;">(</span>car payload<span style="color: #907373;">)</span><span style="color: #709870;">)</span>
         <span style="color: #709870;">(</span>fname <span style="color: #907373;">(</span>cadr payload<span style="color: #907373;">)</span><span style="color: #709870;">)</span>
         <span style="color: #709870;">(</span>img-regexp <span style="color: #4E9A06;">"</span><span style="color: #4E9A06; font-weight: bold;">\</span><span style="color: #4E9A06; font-weight: bold;">\</span><span style="color: #4E9A06; font-weight: bold;">(</span><span style="color: #4E9A06;">png</span><span style="color: #4E9A06; font-weight: bold;">\</span><span style="color: #4E9A06; font-weight: bold;">\</span><span style="color: #4E9A06; font-weight: bold;">|</span><span style="color: #4E9A06;">jp[e]?g</span><span style="color: #4E9A06; font-weight: bold;">\</span><span style="color: #4E9A06; font-weight: bold;">\</span><span style="color: #4E9A06; font-weight: bold;">|</span><span style="color: #4E9A06;">svg</span><span style="color: #4E9A06; font-weight: bold;">\</span><span style="color: #4E9A06; font-weight: bold;">\</span><span style="color: #4E9A06; font-weight: bold;">)</span><span style="color: #4E9A06; font-weight: bold;">\</span><span style="color: #4E9A06; font-weight: bold;">\</span><span style="color: #4E9A06;">&gt;"</span><span style="color: #709870;">)</span><span style="color: #909183;">)</span>
    <span style="color: #909183;">(</span><span style="color: #A52A2A; font-weight: bold;">cond</span>
     <span style="color: #204A87;">;; </span><span style="color: #204A87;">insert image link</span>
     <span style="color: #709870;">(</span><span style="color: #907373;">(</span><span style="color: #A52A2A; font-weight: bold;">and</span>  <span style="color: #6276ba;">(</span>eq <span style="color: #A52A2A; font-weight: bold;">'</span><span style="color: #F5666D;">drag-n-drop</span> <span style="color: #858580;">(</span>car event<span style="color: #858580;">)</span><span style="color: #6276ba;">)</span>
            <span style="color: #6276ba;">(</span>eq <span style="color: #A52A2A; font-weight: bold;">'</span><span style="color: #F5666D;">file</span> type<span style="color: #6276ba;">)</span>
            <span style="color: #6276ba;">(</span>string-match img-regexp fname<span style="color: #6276ba;">)</span><span style="color: #907373;">)</span>
      <span style="color: #907373;">(</span>dired-copy-file fname <span style="color: #6276ba;">(</span>format <span style="color: #4E9A06;">"./imgs/%s"</span> <span style="color: #858580;">(</span>file-name-nondirectory fname<span style="color: #858580;">)</span><span style="color: #6276ba;">)</span> t<span style="color: #907373;">)</span>
      <span style="color: #907373;">(</span>insert <span style="color: #4E9A06;">"#+ATTR_HTML: :width 100%</span><span style="color: #4E9A06; font-weight: bold;">\</span><span style="color: #4E9A06; font-weight: bold;">n</span><span style="color: #4E9A06;">"</span><span style="color: #907373;">)</span>
      <span style="color: #907373;">(</span>insert <span style="color: #6276ba;">(</span>format <span style="color: #4E9A06;">"[[%s]]"</span> <span style="color: #858580;">(</span>format <span style="color: #4E9A06;">"./imgs/%s"</span> <span style="color: #80a880;">(</span>file-name-nondirectory fname<span style="color: #80a880;">)</span><span style="color: #858580;">)</span><span style="color: #6276ba;">)</span><span style="color: #907373;">)</span>
      <span style="color: #907373;">(</span>org-display-inline-images t t<span style="color: #907373;">)</span><span style="color: #709870;">)</span>
     <span style="color: #204A87;">;; </span><span style="color: #204A87;">regular drag and drop on file</span>
     <span style="color: #709870;">(</span>t
      <span style="color: #907373;">(</span><span style="color: #F5666D; font-weight: bold;">error</span> <span style="color: #4E9A06;">"I am not equipped for dnd on %s"</span> payload<span style="color: #907373;">)</span><span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
</code></pre>
</div>
</div>
</div>

<div id="outline-container-orgb59129c" class="outline-2">
<h2 id="orgb59129c">11. Emacs 的键盘宏</h2>
<div class="outline-text-2" id="text-orgb59129c">
<p>
使用键盘宏可以极大的提高我们的效率。我感觉需要单独写一个文章来介绍这个技巧。
这里介绍了如何使用，保存，以及绑定快捷键。具体看<a href="./emacs-macro.html">这里</a>。
</p>
</div>
</div>
<div id="outline-container-orga08fff6" class="outline-2">
<h2 id="orga08fff6">12. new-line-and-indent</h2>
<div class="outline-text-2" id="text-orga08fff6">
<p>
在写代码的时候，我们经常需要自动缩进，而不是回到下一行的开头。这时我们就需要这个函数了，
<b>new-line-and-indent</b> 。我们可以直接使用快捷键 <b>C-j</b> 。也可以绑定到 RETURN 键上。
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><code class="emacs-lisp"><span style="color: #707183;">(</span>add-hook <span style="color: #A52A2A; font-weight: bold;">'</span><span style="color: #F5666D;">lisp-mode-hook</span> <span style="color: #A52A2A; font-weight: bold;">'</span><span style="color: #7388d6;">(</span>lambda <span style="color: #909183;">()</span>
  <span style="color: #909183;">(</span>local-set-key <span style="color: #709870;">(</span>kbd <span style="color: #4E9A06;">"RET"</span><span style="color: #709870;">)</span> <span style="color: #A52A2A; font-weight: bold;">'</span><span style="color: #F5666D;">newline-and-indent</span><span style="color: #909183;">)</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
</code></pre>
</div>
</div>
</div>
<div id="outline-container-org0e32ef9" class="outline-2">
<h2 id="org0e32ef9">13. Butterfly</h2>
<div class="outline-text-2" id="text-org0e32ef9">
<p>
M-x butterfly
</p>
<div class="org-src-container">
<pre class="src src-lisp"><code class="lisp"><span style="color: #707183;">(</span>animate-string <span style="color: #4E9A06;">"Hello world"</span>
        <span style="color: #7388d6;">(</span>/ <span style="color: #909183;">(</span>window-height<span style="color: #909183;">)</span> 2<span style="color: #7388d6;">)</span> <span style="color: #7388d6;">(</span>- <span style="color: #909183;">(</span>/ <span style="color: #709870;">(</span>window-width<span style="color: #709870;">)</span> 2<span style="color: #909183;">)</span> 12<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
</code></pre>
</div>
</div>
</div>

<div id="outline-container-org02672b0" class="outline-2">
<h2 id="org02672b0">14. 快速生成有序序列</h2>
<div class="outline-text-2" id="text-org02672b0">
<p>
如果我们想生成如下效果的序列：
</p>
<div class="org-src-container">
<pre class="src src-python"><code class="python"><span style="background-color: #E6E6E6;"> </span>   Step 1 of 5: ...
Step 2 of 5: ...
Step 3 of 5: ...
Step 4 of 5: ...
Step 5 of 5: ...
</code></pre>
</div>

<p>
我们就可以借助键盘宏了。
</p>
<ul class="org-ul">
<li><b>C-x C-k C-f</b> 例如 "- Step %d of 5:"</li>
</ul>
<ul class="org-ul">
<li>按下 <b>F3</b> 开始宏记录</li>
<li>再次按下 F3 开始插入第一个计数（默认为 0），按下 C-x C-k C-c 可以更改默认值</li>
<li>按 return 键，到下一行</li>
<li>按下 F4 结束宏记录</li>
<li>然后多次按 F4 就可以了</li>
<li><p>
或者按 C-u &lt;次数&gt; F4
</p>

<p>
根据这个我写了一个函数可以自动做这件事了：
</p>

<div class="org-src-container">
<pre class="src src-elisp"><code class="elisp"><span style="color: #707183;">(</span><span style="color: #A52A2A; font-weight: bold;">defun</span> <span style="color: #00578E; font-weight: bold;">auto-sequence</span> <span style="color: #7388d6;">(</span>format start end<span style="color: #7388d6;">)</span>
<span style="color: #7388d6;">(</span><span style="color: #A52A2A; font-weight: bold;">interactive</span> <span style="color: #4E9A06;">"sSequence format is? </span><span style="color: #4E9A06; font-weight: bold;">\</span><span style="color: #4E9A06; font-weight: bold;">n</span><span style="color: #4E9A06;">nEnter start number: </span><span style="color: #4E9A06; font-weight: bold;">\</span><span style="color: #4E9A06; font-weight: bold;">n</span><span style="color: #4E9A06;">nEnter end number:"</span><span style="color: #7388d6;">)</span>
<span style="color: #7388d6;">(</span><span style="color: #A52A2A; font-weight: bold;">progn</span>
  <span style="color: #909183;">(</span>kmacro-set-format format<span style="color: #909183;">)</span>
  <span style="color: #909183;">(</span>kmacro-set-counter start<span style="color: #909183;">)</span>
  <span style="color: #909183;">(</span><span style="color: #A52A2A; font-weight: bold;">while</span> <span style="color: #709870;">(</span>&lt; start <span style="color: #907373;">(</span>+ 1 end<span style="color: #907373;">)</span><span style="color: #709870;">)</span>
    <span style="color: #709870;">(</span>execute-kbd-macro <span style="color: #907373;">(</span>read-kbd-macro <span style="color: #4E9A06;">"&lt;f3&gt; RET"</span><span style="color: #907373;">)</span><span style="color: #709870;">)</span>
    <span style="color: #709870;">(</span><span style="color: #A52A2A; font-weight: bold;">setq</span> start <span style="color: #907373;">(</span>+ 1 start<span style="color: #907373;">)</span><span style="color: #709870;">)</span><span style="color: #909183;">)</span>
  <span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
</code></pre>
</div>

<p>
我们只需要提供 format, start number, end number 就可以了。
</p>

<p>
最近，又发现了一个文章：<a href="https://zhuanlan.zhihu.com/p/23608879">正则替换也能玩出花来</a>。这里介绍了通过正则替换来做，也很方便。
</p></li>
</ul>
</div>
</div>

<div id="outline-container-org751ed96" class="outline-2">
<h2 id="org751ed96">15. C-x r t string-rectangle</h2>
<div class="outline-text-2" id="text-org751ed96">
<p>
这里我们说下 <b>C-x r t</b> 这个命令。举个例子一看就明白了。
</p>
<div class="org-src-container">
<pre class="src src-python"><code class="python">var <span style="color: #0084C8; font-weight: bold;">a</span> = 1
var <span style="color: #0084C8; font-weight: bold;">b</span> = 2
var <span style="color: #0084C8; font-weight: bold;">c</span> = 3
</code></pre>
</div>
<p>
改成
</p>
<div class="org-src-container">
<pre class="src src-python"><code class="python"><span style="color: #0084C8; font-weight: bold;">this.a</span> = 1
<span style="color: #0084C8; font-weight: bold;">this.b</span> = 2
<span style="color: #0084C8; font-weight: bold;">this.c</span> = 3
</code></pre>
</div>
<p>
我们就可以用这个命令了。具体的可以看 <a href="http://emacsrocks.com/e01.html">这里</a>。
</p>
</div>
</div>
<div id="outline-container-org2367969" class="outline-2">
<h2 id="org2367969">16. MULTIPLE CURSORS</h2>
<div class="outline-text-2" id="text-org2367969">
<p>
Click <a href="https://github.com/magnars/multiple-cursors.el">this</a>.
</p>

<ul class="org-ul">
<li>第一步，先标记一个 region 否则选择当前位置。</li>
</ul>
<ul class="org-ul">
<li>第二步，使用命令 C-&gt; 或者 C-+ 来 mark next like this</li>
</ul>
</div>
</div>
<div id="outline-container-org497a4ce" class="outline-2">
<h2 id="org497a4ce">17. xah math input (<a href="http://ergoemacs.org/emacs/xmsi-math-symbols-input.html">here</a>)</h2>
<div class="outline-text-2" id="text-org497a4ce">
<p>
有了这个我们就可以非常方便的输入一些常用的数学符号，而不是使用 latex 插入。
例如我们输入 字母 p，然后按 S-&lt;SPC&gt; 就转化为了 π。
</p>

<p>
在后来发现在写代码的时候经常会按到这个快捷键，所以我只在 org mode 中打开。
</p>

<div class="org-src-container">
<pre class="src src-lisp"><code class="lisp"><span style="color: #707183;">(</span>add-hook 'org-mode-hook #'xah-math-input-mode-on<span style="color: #707183;">)</span>
</code></pre>
</div>
</div>
</div>
<div id="outline-container-orgb75b417" class="outline-2">
<h2 id="orgb75b417">18. 自动在中英文之间添加空格</h2>
<div class="outline-text-2" id="text-orgb75b417">
<p>
我们可以使用 <a href="https://github.com/coldnew/pangu-spacing">pangu-spacing</a> 这个 package。
</p>
</div>
</div>
<div id="outline-container-org9c2f80d" class="outline-2">
<h2 id="org9c2f80d">19. 禁用特定模式下的快捷键绑定</h2>
<div class="outline-text-2" id="text-org9c2f80d">
<p>
例如，下面这个禁用了 org mode 默认的快捷键绑定，然后使用自己设置的快捷键绑定。
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><code class="emacs-lisp"><span style="color: #707183;">(</span>define-key org-mode-map <span style="color: #7388d6;">(</span>kbd <span style="color: #4E9A06;">"C-,"</span><span style="color: #7388d6;">)</span> nil<span style="color: #707183;">)</span>
</code></pre>
</div>
</div>
</div>
<div id="outline-container-org9186d74" class="outline-2">
<h2 id="org9186d74">20. &amp;key</h2>
<div class="outline-text-2" id="text-org9186d74">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><code class="emacs-lisp">    <span style="color: #707183;">(</span><span style="color: #A52A2A; font-weight: bold;">defun*</span> hello <span style="color: #7388d6;">(</span><span style="color: #2F8B58; font-weight: bold;">&amp;key</span> a b c<span style="color: #7388d6;">)</span>
  <span style="color: #7388d6;">(</span>message <span style="color: #909183;">(</span>format <span style="color: #4E9A06;">"%s-%s-%s"</span> a b c<span style="color: #909183;">)</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>

<span style="color: #707183;">(</span>hello <span style="color: #A020F0;">:a</span> 1
       <span style="color: #A020F0;">:b</span> 2
       <span style="color: #A020F0;">:c</span> 3<span style="color: #707183;">)</span>
</code></pre>
</div>
</div>
</div>
<div id="outline-container-org2676647" class="outline-2">
<h2 id="org2676647">21. Tramp 的使用</h2>
<div class="outline-text-2" id="text-org2676647">
<p>
在 Emacs 通过 tramp 打开远程 server 文件就像打开本地文件一样操纵。
因为 tramp 是 build in package，所以我们可以直接用。
</p>

<ol class="org-ol">
<li>C-x C-f</li>
</ol>
<ol class="org-ol">
<li><p>
/ssh:user@server
</p>

<p>
例如 /ssh: ubuntu@10.222.122.11
</p>

<p>
如果在./ssh/config 中添加了 HOST，例如 test。
</p>
<ol class="org-ol">
<li>C-x C-f</li>
</ol></li>
<li>/ssh:test</li>
</ol>
</div>
</div>
<div id="outline-container-org85555d5" class="outline-2">
<h2 id="org85555d5">22. Emacs 中行操作</h2>
<div class="outline-text-2" id="text-org85555d5">
<ul class="org-ul">
<li><a href="https://github.com/emacs-china/emacsist/blob/master/articles/2016-11-07%E4%BD%A0%E8%83%BD%E6%83%B3%E5%88%B0%E7%9A%84%E5%87%A0%E4%B9%8E%E6%89%80%E6%9C%89%E5%85%B3%E4%BA%8E%E8%A1%8C%E7%9A%84%E6%93%8D%E4%BD%9C.org">行操作</a></li>
</ul>
</div>
</div>
<div id="outline-container-org06808d1" class="outline-2">
<h2 id="org06808d1">23. Emacs 模糊打开文件</h2>
<div class="outline-text-2" id="text-org06808d1">
<p>
在之前我一直使用 C-x C-f 打开文件，它默认绑定的是
counsel-find-file。这种方式需要我们一层层的输入目录很慢，所以我希望能有一个比较快的方式。我想到了 projectile 可以做这件事，所以我把
C-x C-f 绑定到了 <b>projectile-find-file-in-known-projects</b> 这个函数上了。
</p>

<p>
这样比如我想打开 ~/workspace/github/hello/world.org 这个文件。 我现在可以在 C-x C-f 后，输入  <b>hello world</b> 。
</p>

<p>
如果我们这样设置的话会遇到一个问题：这个命令非常的慢。这时我们需要将 projectile 的 cache 打开 (<a href="https://github.com/syl20bnr/spacemacs/issues/4207#issuecomment-199951764">reference</a>):
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><code class="emacs-lisp"><span style="color: #707183;">(</span><span style="color: #A52A2A; font-weight: bold;">setq</span> projectile-enable-caching t<span style="color: #707183;">)</span>
</code></pre>
</div>

<p>
现在就很完美了
</p>
</div>
</div>
<div id="outline-container-org80c5dd3" class="outline-2">
<h2 id="org80c5dd3">24. Emacs Dired mode</h2>
<div class="outline-text-2" id="text-org80c5dd3">
<p>
<a href="https://github.com/emacs-china/emacsist/blob/master/articles/2017-02-20Emacs%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E7%A5%9E%E5%99%A8--dired%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C%E8%AF%B4%E6%98%8E.org">Emacs 文件管理神器–dired 常用操作说明</a>
</p>
</div>
</div>
<div id="outline-container-orgddbb8f4" class="outline-2">
<h2 id="orgddbb8f4">25. 定义 toggle/cycle command（<a href="http://ergoemacs.org/emacs/elisp_toggle_command.html">参考</a>）</h2>
<div class="outline-text-2" id="text-orgddbb8f4">
<p>
如果我们有两个状态要切换，比较简单：
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><code class="emacs-lisp"><span style="color: #707183;">(</span><span style="color: #A52A2A; font-weight: bold;">defun</span> <span style="color: #00578E; font-weight: bold;">yd-toggle-move-indent</span> <span style="color: #7388d6;">()</span>
    <span style="color: #7388d6;">(</span><span style="color: #A52A2A; font-weight: bold;">interactive</span><span style="color: #7388d6;">)</span>
<span style="color: #7388d6;">(</span><span style="color: #A52A2A; font-weight: bold;">if</span> <span style="color: #909183;">(</span>get <span style="color: #A52A2A; font-weight: bold;">'</span><span style="color: #F5666D;">yd-toggle-move-indent</span> <span style="color: #A52A2A; font-weight: bold;">'</span><span style="color: #F5666D;">state</span><span style="color: #909183;">)</span>
    <span style="color: #909183;">(</span><span style="color: #A52A2A; font-weight: bold;">progn</span>
      <span style="color: #709870;">(</span>call-interactively <span style="color: #A52A2A; font-weight: bold;">'</span><span style="color: #F5666D;">move-beginning-of-line</span><span style="color: #709870;">)</span>
      <span style="color: #709870;">(</span>put <span style="color: #A52A2A; font-weight: bold;">'</span><span style="color: #F5666D;">yd-toggle-move-indent</span> <span style="color: #A52A2A; font-weight: bold;">'</span><span style="color: #F5666D;">state</span> nil<span style="color: #709870;">)</span><span style="color: #909183;">)</span>
  <span style="color: #909183;">(</span><span style="color: #A52A2A; font-weight: bold;">progn</span>
    <span style="color: #709870;">(</span>call-interactively <span style="color: #A52A2A; font-weight: bold;">'</span><span style="color: #F5666D;">back-to-indentation</span><span style="color: #709870;">)</span>
    <span style="color: #709870;">(</span>put <span style="color: #A52A2A; font-weight: bold;">'</span><span style="color: #F5666D;">yd-toggle-move-indent</span> <span style="color: #A52A2A; font-weight: bold;">'</span><span style="color: #F5666D;">state</span> t<span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>


<span style="color: #707183;">(</span>define-key map <span style="color: #7388d6;">(</span>kbd <span style="color: #4E9A06;">"C-a"</span><span style="color: #7388d6;">)</span> <span style="color: #A52A2A; font-weight: bold;">'</span><span style="color: #F5666D;">yd-move-indent</span><span style="color: #707183;">)</span>
</code></pre>
</div>

<p>
这个例子中实现了通过多次按 C-a 来在当前行的开始位置与非空字符之间切换。
</p>


<p>
但是如果有多个状态呢？这里我们就需要使用数字或字符串来表示状态了。
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><code class="emacs-lisp"><span style="color: #707183;">(</span><span style="color: #A52A2A; font-weight: bold;">defun</span> <span style="color: #00578E; font-weight: bold;">yd-toggle-test</span> <span style="color: #7388d6;">()</span>
<span style="color: #7388d6;">(</span><span style="color: #A52A2A; font-weight: bold;">interactive</span><span style="color: #7388d6;">)</span>
<span style="color: #7388d6;">(</span><span style="color: #A52A2A; font-weight: bold;">if</span> <span style="color: #909183;">(</span>not <span style="color: #709870;">(</span>get <span style="color: #A52A2A; font-weight: bold;">'</span><span style="color: #F5666D;">yd-toggle-test</span> <span style="color: #A52A2A; font-weight: bold;">'</span><span style="color: #F5666D;">state</span><span style="color: #709870;">)</span><span style="color: #909183;">)</span>
    <span style="color: #909183;">(</span>put <span style="color: #A52A2A; font-weight: bold;">'</span><span style="color: #F5666D;">yd-toggle-test</span> <span style="color: #A52A2A; font-weight: bold;">'</span><span style="color: #F5666D;">state</span> <span style="color: #4E9A06;">"beginning"</span><span style="color: #909183;">)</span><span style="color: #7388d6;">)</span>

<span style="color: #7388d6;">(</span><span style="color: #A52A2A; font-weight: bold;">cond</span>
 <span style="color: #909183;">(</span><span style="color: #709870;">(</span>string= <span style="color: #4E9A06;">"beginning"</span> <span style="color: #907373;">(</span>get <span style="color: #A52A2A; font-weight: bold;">'</span><span style="color: #F5666D;">yd-toggle-test</span> <span style="color: #A52A2A; font-weight: bold;">'</span><span style="color: #F5666D;">state</span><span style="color: #907373;">)</span><span style="color: #709870;">)</span>
  <span style="color: #709870;">(</span>call-interactively <span style="color: #A52A2A; font-weight: bold;">'</span><span style="color: #F5666D;">move-beginning-of-line</span><span style="color: #709870;">)</span>
  <span style="color: #709870;">(</span>put <span style="color: #A52A2A; font-weight: bold;">'</span><span style="color: #F5666D;">yd-toggle-test</span> <span style="color: #A52A2A; font-weight: bold;">'</span><span style="color: #F5666D;">state</span> <span style="color: #4E9A06;">"indentation"</span><span style="color: #709870;">)</span><span style="color: #909183;">)</span>

 <span style="color: #909183;">(</span><span style="color: #709870;">(</span>string= <span style="color: #4E9A06;">"indentation"</span> <span style="color: #907373;">(</span>get <span style="color: #A52A2A; font-weight: bold;">'</span><span style="color: #F5666D;">yd-toggle-test</span> <span style="color: #A52A2A; font-weight: bold;">'</span><span style="color: #F5666D;">state</span><span style="color: #907373;">)</span><span style="color: #709870;">)</span>
  <span style="color: #709870;">(</span>call-interactively <span style="color: #A52A2A; font-weight: bold;">'</span><span style="color: #F5666D;">back-to-indentation</span><span style="color: #709870;">)</span>
  <span style="color: #709870;">(</span>put <span style="color: #A52A2A; font-weight: bold;">'</span><span style="color: #F5666D;">yd-toggle-test</span> <span style="color: #A52A2A; font-weight: bold;">'</span><span style="color: #F5666D;">state</span> <span style="color: #4E9A06;">"end"</span><span style="color: #709870;">)</span><span style="color: #909183;">)</span>

 <span style="color: #909183;">(</span><span style="color: #709870;">(</span>string= <span style="color: #4E9A06;">"end"</span> <span style="color: #907373;">(</span>get <span style="color: #A52A2A; font-weight: bold;">'</span><span style="color: #F5666D;">yd-toggle-test</span> <span style="color: #A52A2A; font-weight: bold;">'</span><span style="color: #F5666D;">state</span><span style="color: #907373;">)</span><span style="color: #709870;">)</span>
  <span style="color: #709870;">(</span>call-interactively <span style="color: #A52A2A; font-weight: bold;">'</span><span style="color: #F5666D;">move-end-of-line</span><span style="color: #709870;">)</span>
  <span style="color: #709870;">(</span>put <span style="color: #A52A2A; font-weight: bold;">'</span><span style="color: #F5666D;">yd-toggle-test</span> <span style="color: #A52A2A; font-weight: bold;">'</span><span style="color: #F5666D;">state</span> <span style="color: #4E9A06;">"beginning"</span><span style="color: #709870;">)</span><span style="color: #909183;">)</span>
 <span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
</code></pre>
</div>

<p>
这个函数用来使光标循环在行的开头，非空字符和结尾位置。
</p>

<p>
另外，它可以在切换 backgroud，单词的大小写（<a href="http://pragmaticemacs.com/emacs/change-case-of-text/">*</a>）等中使用。
我在切换大小写中也使用了 <b>M-c</b> 命令。
</p>
</div>
</div>

<div id="outline-container-org3a40834" class="outline-2">
<h2 id="org3a40834">26. Emacs &#x2013;script</h2>
<div class="outline-text-2" id="text-org3a40834">
<p>
我们可以将一个 elisp 文件作为一个脚本执行。
</p>

<div class="org-src-container">
<pre class="src src-shell"><code class="shell">emacs --script test.el
</code></pre>
</div>
</div>
</div>
<div id="outline-container-orgea87798" class="outline-2">
<h2 id="orgea87798">27. Install and Update packages</h2>
<div class="outline-text-2" id="text-orgea87798">
<p>
Type M-x list-packages to open the package list. Press ‘i’ to mark
for installation, ‘u’ to unmark, and ‘x’ to perform the
installation. Press ‘RET’ to read more about installing and using
each package. hit Uto mark available upgrades, then review to
decide if there are any I don't want to pick up. Then x to
upgrade.
</p>
</div>
</div>
<div id="outline-container-orgf16813a" class="outline-2">
<h2 id="orgf16813a">28. Emacs List 的操作</h2>
<div class="outline-text-2" id="text-orgf16813a">
<ul class="org-ul">
<li><a href="http://ergoemacs.org/emacs/elisp_list.html">http://ergoemacs.org/emacs/elisp_list.html</a></li>
</ul>
</div>
</div>
<div id="outline-container-orgb7747eb" class="outline-2">
<h2 id="orgb7747eb">29. Elisp 代码文件分割线</h2>
<div class="outline-text-2" id="text-orgb7747eb">
<p>
类似的效果如下
</p>

<div class="figure">
<p><img src="./imgs/20171118_220613_6018LKl.png" alt="20171118_220613_6018LKl.png" width="100%" />
</p>
</div>

<p>
我们可以通过在代码中输入<sup>L</sup> 使用命令 C-q C-l。这样可以使得我们的代码清晰一些。
</p>
</div>
</div>
<div id="outline-container-org97b453f" class="outline-2">
<h2 id="org97b453f">30. 使用 Deft 快速的记笔记</h2>
<div class="outline-text-2" id="text-org97b453f">
<p>
最近发现，有些东西不适合展示在 blog 中。例如一些摘抄，记录等等。我的要求是：当我想查的时候能够快速的查询到，而记录的时候又能快速的记录。
Deft 正是一个可以满足我需求的 mode。关于它的使用 github 上有介绍，不多说。我的快捷键绑定是 C-x d
</p>

<p>
这里提下如何高效的利用这个工具，<a href="http://pragmaticemacs.com/category/deft/">Pragmatic Emacs</a> 这里有很好的介绍。
</p>

<p>
另外一个用处是，我可以使用 Deft 来帮助我检索某一个目录。
</p>
</div>
</div>

<div id="outline-container-orgbdeb207" class="outline-2">
<h2 id="orgbdeb207">31. MULTIPLE CHOICES IN YASNIPPETS</h2>
<div class="outline-text-2" id="text-orgbdeb207">
<p>
See this: <a href="http://pragmaticemacs.com/emacs/multiple-choices-in-yasnippets/">http://pragmaticemacs.com/emacs/multiple-choices-in-yasnippets/</a>
</p>
</div>
</div>
<div id="outline-container-org62570da" class="outline-2">
<h2 id="org62570da">32. org-indent-mode</h2>
<div class="outline-text-2" id="text-org62570da">
<p>
在使用 org-mode 的时候，indentation 有时候是很烦人的。使用 org-indent-mode 可以帮助我们做这件事。
</p>
</div>
</div>
<div id="outline-container-org6a526dc" class="outline-2">
<h2 id="org6a526dc">33. zencoding mode</h2>
<div class="outline-text-2" id="text-org6a526dc">
<p>
这个 mode 非常的有意思，具体的可以看 <a href="https://github.com/rooney/zencoding">https://github.com/rooney/zencoding</a>
</p>
<div class="org-src-container">
<pre class="src src-html"><code class="html">a                        &lt;<span style="color: #00578E; font-weight: bold;">a</span>&gt;&lt;/<span style="color: #00578E; font-weight: bold;">a</span>&gt;
a.x                      &lt;<span style="color: #00578E; font-weight: bold;">a</span> <span style="color: #0084C8; font-weight: bold;">class</span>=<span style="color: #4E9A06;">"x"</span>&gt;&lt;/<span style="color: #00578E; font-weight: bold;">a</span>&gt;
a#q.x                    &lt;<span style="color: #00578E; font-weight: bold;">a</span> <span style="color: #0084C8; font-weight: bold;">id</span>=<span style="color: #4E9A06;">"q"</span> <span style="color: #0084C8; font-weight: bold;">class</span>=<span style="color: #4E9A06;">"x"</span>&gt;&lt;/<span style="color: #00578E; font-weight: bold;">a</span>&gt;
a#q.x.y.z                &lt;<span style="color: #00578E; font-weight: bold;">a</span> <span style="color: #0084C8; font-weight: bold;">id</span>=<span style="color: #4E9A06;">"q"</span> <span style="color: #0084C8; font-weight: bold;">class</span>=<span style="color: #4E9A06;">"x y z"</span>&gt;&lt;/<span style="color: #00578E; font-weight: bold;">a</span>&gt;
#q                       &lt;<span style="color: #00578E; font-weight: bold;">div</span> <span style="color: #0084C8; font-weight: bold;">id</span>=<span style="color: #4E9A06;">"q"</span>&gt;
                         &lt;/<span style="color: #00578E; font-weight: bold;">div</span>&gt;
.x                       &lt;<span style="color: #00578E; font-weight: bold;">div</span> <span style="color: #0084C8; font-weight: bold;">class</span>=<span style="color: #4E9A06;">"x"</span>&gt;
                         &lt;/<span style="color: #00578E; font-weight: bold;">div</span>&gt;
#q.x                     &lt;<span style="color: #00578E; font-weight: bold;">div</span> <span style="color: #0084C8; font-weight: bold;">id</span>=<span style="color: #4E9A06;">"q"</span> <span style="color: #0084C8; font-weight: bold;">class</span>=<span style="color: #4E9A06;">"x"</span>&gt;
                         &lt;/<span style="color: #00578E; font-weight: bold;">div</span>&gt;
#q.x.y.z                 &lt;<span style="color: #00578E; font-weight: bold;">div</span> <span style="color: #0084C8; font-weight: bold;">id</span>=<span style="color: #4E9A06;">"q"</span> <span style="color: #0084C8; font-weight: bold;">class</span>=<span style="color: #4E9A06;">"x y z"</span>&gt;
                         &lt;/<span style="color: #00578E; font-weight: bold;">div</span>&gt;
</code></pre>
</div>
<p>
打开这个 mode，然后输入例如 a，然后按 C-j。就可以扩展成 &lt;a&gt; &lt;/a&gt;了。写 html 非常的方便。
</p>
</div>
</div>
<div id="outline-container-orga04b100" class="outline-2">
<h2 id="orga04b100">34. expand &amp; mark</h2>
<div class="outline-text-2" id="text-orga04b100">
<p>
一个非常有用的 package，<a href="https://github.com/magnars/expand-region.el">expand-region</a>。
</p>
<div class="org-src-container">
<pre class="src src-elisp"><code class="elisp"><span style="color: #707183;">(</span>require-package <span style="color: #A52A2A; font-weight: bold;">'</span><span style="color: #F5666D;">expand-region</span><span style="color: #707183;">)</span>
<span style="color: #707183;">(</span>global-set-key <span style="color: #7388d6;">(</span>kbd <span style="color: #4E9A06;">"C-="</span><span style="color: #7388d6;">)</span> <span style="color: #A52A2A; font-weight: bold;">'</span><span style="color: #F5666D;">er/expand-region</span><span style="color: #707183;">)</span>
</code></pre>
</div>

<p>
自动的获取当前光标处字符串，按多次会对区域扩展。
如果扩展的太多，可以使用  <b>C&#x2013; C-=</b> rollback。
</p>

<p>
er-basic-expansions.el 这个 package 同样非常有用。通过它可以 mark 很多东西，比如：
</p>
<div class="org-src-container">
<pre class="src src-python"><code class="python">er/mark-word
er/mark-symbol
er/mark-symbol-<span style="color: #A52A2A; font-weight: bold;">with</span>-prefix
er/mark-<span style="color: #A020F0;">next</span>-accessor
er/mark-method-call
er/mark-inside-quotes
er/mark-outside-quotes
er/mark-inside-pairs
er/mark-outside-pairs
er/mark-comment
er/mark-url
er/mark-email
er/mark-defun
er/mark-html-attribute
er/mark-inner-tag
er/mark-outer-tag
</code></pre>
</div>
<p>
为了防止按键冲突，推荐使用 hydra 来进行设置。
</p>
</div>
</div>
<div id="outline-container-org707b2cd" class="outline-2">
<h2 id="org707b2cd">35. 下载远程图片到 Org 文件</h2>
<div class="outline-text-2" id="text-org707b2cd">
<p>
有时经常需要 copy 远程的图片到本地 Org 文件中，这个过程需要一些列的操作，
相对繁琐。于是写了一个函数自动做这件事，如下：
</p>
<div class="org-src-container">
<pre class="src src-elisp"><code class="elisp"><span style="color: #707183;">(</span><span style="color: #A52A2A; font-weight: bold;">defun</span> <span style="color: #00578E; font-weight: bold;">my/org-download-image</span> <span style="color: #7388d6;">(</span>link<span style="color: #7388d6;">)</span>
<span style="color: #7388d6;">(</span><span style="color: #A52A2A; font-weight: bold;">interactive</span> <span style="color: #4E9A06;">"sUrl: "</span><span style="color: #7388d6;">)</span>
<span style="color: #7388d6;">(</span><span style="color: #A52A2A; font-weight: bold;">setq</span> filename
      <span style="color: #909183;">(</span>concat
       <span style="color: #709870;">(</span>make-temp-name
        <span style="color: #907373;">(</span>concat <span style="color: #6276ba;">(</span>file-name-directory <span style="color: #858580;">(</span>buffer-file-name<span style="color: #858580;">)</span><span style="color: #6276ba;">)</span>
                <span style="color: #4E9A06;">"imgs/"</span> <span style="color: #204A87;">;; </span><span style="color: #204A87;">&#30456;&#23545;&#19982;&#24403;&#21069; org &#25991;&#20214;&#30340;&#30446;&#24405;&#65292;&#20363;&#22914;&#22914;&#26524; org &#20301;&#20110;~, &#21017;&#25226;&#25991;&#20214;&#25918;&#21040;~/imgs/xx.png</span>
                <span style="color: #6276ba;">(</span>format-time-string <span style="color: #4E9A06;">"%Y%m%d_%H%M%S_"</span><span style="color: #6276ba;">)</span><span style="color: #907373;">)</span> <span style="color: #709870;">)</span> <span style="color: #4E9A06;">".png"</span><span style="color: #909183;">)</span><span style="color: #7388d6;">)</span> <span style="color: #204A87;">;; </span><span style="color: #204A87;">&#26681;&#25454;&#26102;&#38388;&#25139;&#29983;&#25104;&#25991;&#20214;&#21517;</span>
<span style="color: #7388d6;">(</span>shell-command-to-string <span style="color: #909183;">(</span>format <span style="color: #4E9A06;">"wget %s -O %s"</span> link filename<span style="color: #909183;">)</span><span style="color: #7388d6;">)</span> <span style="color: #204A87;">;; </span><span style="color: #204A87;">&#36890;&#36807; wget &#21629;&#20196;&#19979;&#36733;&#22270;&#29255;</span>
<span style="color: #7388d6;">(</span>message <span style="color: #4E9A06;">"download image success"</span><span style="color: #7388d6;">)</span>
<span style="color: #7388d6;">(</span><span style="color: #A52A2A; font-weight: bold;">setq</span> relative-dir <span style="color: #909183;">(</span>concat <span style="color: #4E9A06;">"./imgs/"</span> <span style="color: #709870;">(</span>file-name-nondirectory filename<span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388d6;">)</span>
<span style="color: #7388d6;">(</span><span style="color: #A52A2A; font-weight: bold;">if</span> <span style="color: #909183;">(</span>file-exists-p filename<span style="color: #909183;">)</span>
    <span style="color: #909183;">(</span>insert <span style="color: #709870;">(</span>concat <span style="color: #4E9A06;">"#+ATTR_HTML: :width 70%</span><span style="color: #4E9A06; font-weight: bold;">\</span><span style="color: #4E9A06; font-weight: bold;">n</span><span style="color: #4E9A06;">[[file:"</span> relative-dir <span style="color: #4E9A06;">"]]"</span><span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388d6;">)</span> <span style="color: #204A87;">;; </span><span style="color: #204A87;">&#23558;&#22270;&#25554;&#20837;&#21040; org &#25991;&#20214;&#20013;</span>
<span style="color: #707183;">)</span>
</code></pre>
</div>

<p>
如果要更改存储目录以及文件名，根据自己的需求改下代码即可。
</p>
</div>
</div>
</div>
<div id="postamble" class="status">
<script type="text/javascript" src="https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/datejs/1.0/date.min.js"></script>

<script>
var base_url = 'https://api.github.com';
var title = document.title;
var owner = 'yydai';
var repo = 'yydai.github.io';
var search_issues = base_url + '/search/issues?q=' + title + 'in:title' + '+user:' + owner + '+label:blog'+ '+state:open';

console.log("search_issues = "+ search_issues);

function test() {
  jQuery.ajax({
      type: 'GET',
      async: false,
      dataType:'json',
      url: search_issues,
      success:function(data) {
         result = data;
      }
  });
  return result;
}
var result = test();
var items = result.items[0];
if(jQuery.isEmptyObject(items)) {
    create(title);
} else {
    html_url = items.html_url;
        document.body.innerHTML +=
'<div id="comments"><h2>Comments</h2><div id="header">Want to leave a comment? Visit <a href="'+ html_url + '"> this issue page on GitHub</a> (you will need a GitHub account).</div></div>'
}


function create(title) {
        var create_url = 'https://blog-api-server.herokuapp.com/issues?title=' + title + '&labels=blog&body=Welcome to leave comments here.&owner=yydai&repo=yydai.github.io&auth=eXlkYWk6ZGVpc3Q5MjgxNw=='

        jQuery.ajax({
      type: 'GET',
      async: false,
      dataType:'json',
      url: create_url,
      success:function(data) {
         result = data;
      }
  });
}


console.log("total_count = " + result.total_count);
if(result.total_count == 1) {
    var comments_url = result.items[0].comments_url;
} else if (result.total_count == 0) {
        // create a new issue
    //create(title);
} else {
        // result not only
        alert('Cannot load the comments.');
}

function loadComments(data) {
        repo = 'github.com'
    for (var i=0; i<data.length; i++) {
      var cuser = data[i].user.login;
      var cuserlink = 'https://' + repo + '/' + data[i].user.login;
      var cbody = data[i].body_html;
      var cavatarlink = data[i].user.avatar_url;
      var cdate = Date.parse(data[i].created_at).toString('yyyy-MM-dd HH:mm:ss');

          var html_url = items.html_url + '#issuecomment-' + data[i].url.substring(data[i].url.lastIndexOf('/')+1);

      var code = '<div class="comment"><div class="commentheader"><div class="commentgravatar">' + '<img src="' + cavatarlink + '" alt="" width="20" height="20">' + '</div><a class="commentuser" href="'+ cuserlink + '">' + cuser + '</a><a class="commentdate" href="' + html_url + '">' + cdate + '</a></div><div class="commentbody">' + cbody + '</div></div>';

      $('#comments').append(code);
    }
  }


var comments_api = comments_url + '?per_page=100';
console.log("comments api: " + comments_api);
$.ajax(comments_api, {
    headers: {Accept: 'application/vnd.github.full+json'},
    dataType: 'json',
    success: function(msg){
      loadComments(msg);
   }
  });


</script>

<hr />
 <div class='footer'>
© 2017 yydai<br/>
Email: dai92817@icloud.com
</div>
</div>
</body>
</html>
